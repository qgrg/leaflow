!function(t){function e(e){for(var r,a,c=e[0],u=e[1],l=e[2],f=0,p=[];f<c.length;f++)a=c[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);for(s&&s(e);p.length;)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,c=1;c<n.length;c++){var u=n[c];0!==o[u]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={1:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="./";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var s=u;i.push([15,0]),n()}([function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(10).default,o=n(17);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(16);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){"use strict";var r=n(12);Object.defineProperty(e,"__esModule",{value:!0}),e.symbol=function(t){return i?Symbol(t):t},e.isSymbol=function(t){if(!i)return!1;var e=Object.prototype.toString;return e.call(t)===e.call(a)},e.isDefined=c,e.isObject=function(t){var e={};return e.toString.call(t)===e.toString()},e.ensureArray=function(t){if(c(t))return[].concat(t);return[]},e.asFunc=function(t,e){if(!u(t))return function(){return t};return c(t)?t:e},e.isFunction=u,e.safeExecute=function(t,e,n){if(u(t))try{return t.apply(e,n)}catch(t){console.error(t)}return t},e.safeApply=function(t,e,n){if("function"==typeof t)try{return t.apply(n,e)}catch(t){console.error(t)}},e.findUniqueKey=function(t){if(i)return Symbol(t);return"__random__".concat(t,"_").concat(Math.random(),"__")},e.scaleObject=function(t){if(t&&"object"===(0,o.default)(t))return{x:t.x||1,y:t.y||1};return{x:t||1,y:t||1}},e.getBlnValue=e.hasSymbol=void 0;var o=r(n(13)),i="function"==typeof Symbol;e.hasSymbol=i;var a=i?Symbol("_symbol"):null;function c(t){return null!=t}function u(t){return"function"==typeof t}e.getBlnValue=function(t,e,n){return"function"==typeof t?t.apply(n,e||[]):!!t}},function(t,e,n){"use strict";var r=n(12);Object.defineProperty(e,"__esModule",{value:!0}),e.symbol=function(t){return i?Symbol(t):t},e.isSymbol=function(t){if(!i)return!1;var e=Object.prototype.toString;return e.call(t)===e.call(a)},e.isDefined=c,e.isObject=function(t){var e={};return e.toString.call(t)===e.toString()},e.ensureArray=function(t){if(c(t))return[].concat(t);return[]},e.asFunc=function(t,e){if(!u(t))return function(){return t};return c(t)?t:e},e.isFunction=u,e.safeExecute=function(t,e,n){if(u(t))try{return t.apply(e,n)}catch(t){console.error(t)}return t},e.safeApply=function(t,e,n){if("function"==typeof t)try{return t.apply(n,e)}catch(t){console.error(t)}},e.findUniqueKey=function(t){if(i)return Symbol(t);return"__random__".concat(t,"_").concat(Math.random(),"__")},e.scaleObject=function(t){if(t&&"object"===(0,o.default)(t))return{x:t.x||1,y:t.y||1};return{x:t||1,y:t||1}},e.getBlnValue=e.hasSymbol=void 0;var o=r(n(13)),i="function"==typeof Symbol;e.hasSymbol=i;var a=i?Symbol("_symbol"):null;function c(t){return null!=t}function u(t){return"function"==typeof t}e.getBlnValue=function(t,e,n){return"function"==typeof t?t.apply(n,e||[]):!!t}},function(t,e,n){var r=n(18);function o(e,n,i){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=o=Reflect.get,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=o=function(t,e,n){var o=r(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(n):i.value}},t.exports.default=t.exports,t.exports.__esModule=!0),o(e,n,i||e)}t.exports=o,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){t.exports=n(21)},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,u,"next",t)}function u(t){n(a,o,i,c,u,"throw",t)}c(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},,function(t,e,n){t.exports=n(49)},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,n(e,r)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(0);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.default=t.exports,t.exports.__esModule=!0},,,function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=x(a,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var s={};function f(){}function p(){}function h(){}var v={};v[o]=function(){return this};var d=Object.getPrototypeOf,m=d&&d(d(O([])));m&&m!==e&&n.call(m,o)&&(v=m);var y=h.prototype=f.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return s;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,s;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=y.constructor=h,h.constructor=p,p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),b.prototype[i]=function(){return this},t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),c(y,a,"Generator"),y[o]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=O,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),w(n),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;w(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},,,,,,,,function(t){t.exports=JSON.parse('{"lang":"zh-CN","prefix":"editor.","data":{"table.insertRowBefore":"向上增加一行","table.insertRowAfter":"向下增加一行","table.insertColBefore":"向左增加一列","table.insertColAfter":"向右增加一列","table.deleteCurrentRow":"删除当前行","table.deleteCurrentCol":"删除所在列","table.mergeCells":"合并单元格","table.deleteTable":"删除表格","table.otherSettings":"其他设置","table.borderSize":"边框尺寸","table.borderColor":"边框颜色","table.bgColor":"背景色"}}')},function(t){t.exports=JSON.parse('{"lang":"zh-CN","prefix":"component.","data":{"dropdown.emptyText":"暂无内容","dropdown.placeholder":"请选择","colorPicker.baseColor":"基本颜色","colorPicker.customColor":"自定义颜色","colorPicker.emptyItem":"暂无","colorPicker.moreColor":"更多选择","imageSetting.imageTitle":"图片标题","imageSetting.src":"图片地址","imageSetting.ok":"确定","videoSetting.videoTitle":"视频标题","videoSetting.src":"视频地址","videoSetting.ok":"确定","linkSetting.text":"文字","linkSetting.link":"链接","linkSetting.ok":"确定"}}')},function(t){t.exports=JSON.parse('{"lang":"zh-CN","prefix":"toolbar.","data":{"textType.normal":"正文","textType.title":"名称","textType.h1":"标题1","textType.h2":"标题2","textType.h3":"标题3","textType.h4":"标题4"}}')},,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"getCursorStyle",(function(){return te})),n.d(r,"testEventPointToLineDistance",(function(){return re})),n.d(r,"distanceOf",(function(){return ee})),n.d(r,"distanceToLine",(function(){return ne})),n.d(r,"observeViewport",(function(){return oe})),n.d(r,"observeElementVisible",(function(){return ie})),n.d(r,"getCTM",(function(){return Dt})),n.d(r,"namespaces",(function(){return ue})),n.d(r,"inRect",(function(){return pe})),n.d(r,"requestAnimationFrame",(function(){return he})),n.d(r,"cancelAnimationFrame",(function(){return de})),n.d(r,"isNativeElement",(function(){return ye})),n.d(r,"getElementScale",(function(){return xe})),n.d(r,"getScreenCTM",(function(){return Ee})),n.d(r,"getClientInfo",(function(){return we})),n.d(r,"getScreenPositionByClientInfo",(function(){return Ce})),n.d(r,"getScreenInfo",(function(){return Oe})),n.d(r,"getTransformMatrix",(function(){return ke})),n.d(r,"QRDeCompositionMatrix",(function(){return _e})),n.d(r,"createPoint",(function(){return Re})),n.d(r,"matrixTransform",(function(){return Se})),n.d(r,"Selection",(function(){return Te})),n.d(r,"select",(function(){return Pe})),n.d(r,"selectAll",(function(){return je})),n.d(r,"create",(function(){return ze})),n.d(r,"getPosition",(function(){return Ne})),n.d(r,"getScreenOffsetRect",(function(){return Be})),n.d(r,"getScreenOffsetPoints",(function(){return Ie})),n.d(r,"getViewPoints",(function(){return Le})),n.d(r,"remove",(function(){return Ve})),n.d(r,"empty",(function(){return Fe})),n.d(r,"findUpUtil",(function(){return We})),n.d(r,"toNode",(function(){return qe}));var o={};n.r(o),n.d(o,"simulateMouseDownEvent",(function(){return Ke})),n.d(o,"onPress",(function(){return Ye}));var i={};n.r(i),n.d(i,"touchable",(function(){return Ge}));var a={};n.r(a),n.d(a,"simulateMouseDownEvent",(function(){return kc})),n.d(a,"onPress",(function(){return Rc}));var c={};n.r(c),n.d(c,"touchable",(function(){return Ac}));var u=n(8),l=n.n(u),s=n(1),f=n.n(s),p=n(3),h=n.n(p),v=function(){function t(){f()(this,t),this.tagName="ky-element"}return h()(t,[{key:"create",value:function(t){return document.createElement(this.tagName)}}]),t}();v.tagName="ky-element";var d=n(4),m=n.n(d),y=n(2),g=n.n(y),b=n(0),x=n.n(b);function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var w=function(t){m()(n,t);var e=E(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-container",t))}return n}(v);w.tagName="ky-container";var C=Object.create(null),O=new function t(){f()(this,t),this.tagName="unknown"},k=function(){function t(){f()(this,t)}return h()(t,null,[{key:"createContainer",value:function(){return t.createElement(w)}},{key:"createElement",value:function(e,n){var r=t.getElementType(e);return r?r.create(n):(new e).create(n)}},{key:"getElementType",value:function(t){var e=t.tagName;return C[e]}},{key:"register",value:function(t){C[t.tagName]=t}},{key:"isType",value:function(t,e){return!(!t||1!==t.nodeType)&&t.tagName.toLowerCase()===e.tagName}},{key:"getByTagName",value:function(t){return t=t?t.toLowerCase():t,C[t]||O}},{key:"isHelpElement",value:function(e){return!(!e||1!==e.nodeType)&&t.getByTagName(e.tagName).help}},{key:"isOutputDisabled",value:function(e){return!(!e||1!==e.nodeType)&&t.isTagNameOutputDisabled(e.tagName)}},{key:"isTagNameOutputDisabled",value:function(e){return t.getByTagName(e).outputDisabled}},{key:"isWrapperElement",value:function(e){return!(!e||1!==e.nodeType)&&!!t.getByTagName(e.tagName).isWrapper}},{key:"isTagNameInstanceOf",value:function(e,n){var r=t.getByTagName(e),o=t.getByTagName(n);return r!==O&&o!==O&&r instanceof o.constructor}},{key:"isValidElement",value:function(e){return!(!e||1!==e.nodeType)&&t.getByTagName(e.tagName)!==O}},{key:"isElementInstanceOf",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n||!e||1!==e.nodeType)return!1;var o=t.getByTagName(e.tagName),i=Array.isArray(n)?n:[n];return r?i.some((function(t){return o.constructor===t})):i.some((function(t){return o instanceof t}))}}]),t}(),_=n(7),R=n.n(_);function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var A=function(t){m()(n,t);var e=S(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-box",t))}return n}(v);function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}A.tagName="ky-box";var T=function(t){m()(n,t);var e=M(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-box-wrapper",r.isWrapper=!0,t))}return n}(A);function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}T.tagName="ky-box-wrapper";var j=function(t){m()(n,t);var e=P(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-behavior",t))}return h()(n,[{key:"create",value:function(t){var e=R()(x()(n.prototype),"create",this).call(this),r=t||{},o=r.rotate,i=r.resizeModes;return!1===o&&e.setAttribute("rotate","false"),null!=i&&i.length&&e.setAttribute("resize-modes",i.join(",")),e}}]),n}(T);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}j.tagName="ky-behavior";var N=function(t){m()(n,t);var e=z(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-text",r.canFocus=!0,t))}return n}(v);function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}N.tagName="ky-text";var I=function(t){m()(n,t);var e=B(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-block-text",t))}return n}(v);function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}I.tagName="ky-block-text";var D=function(t){m()(n,t);var e=L(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-link",t))}return n}(I);function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}D.tagName="ky-link";var V=function(t){m()(n,t);var e=H(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-block",t))}return n}(v);function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}V.tagName="ky-block";var F=function(t){m()(n,t);var e=U(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.isWrapper=!0,r.tagName="ky-wrapper",t))}return n}(V);function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}F.tagName="ky-wrapper";var q=function(t){m()(n,t);var e=W(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-p",t))}return n}(F);function K(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}q.tagName="ky-p";var Z=function(t){m()(n,t);var e=K(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-li",t))}return n}(F);function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}Z.tagName="ky-li";var X=function(t){m()(n,t);var e=Y(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-marker",r.canFocus=!1,r.help=!0,t))}return n}(N);function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}X.tagName="ky-marker";var J=function(t){m()(n,t);var e=G(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-h",t))}return n}(q);function Q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}J.tagName="ky-h";var $=function(t){m()(n,t);var e=Q(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-title",t))}return n}(J);function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}$.tagName="ky-title";var et=function(t){m()(n,t);var e=tt(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-hr",t))}return n}(A);function nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}et.tagName="ky-hr";var rt=function(t){m()(n,t);var e=nt(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-checkbox",t))}return h()(n,[{key:"create",value:function(){var t=R()(x()(n.prototype),"create",this).call(this),e=k.createElement(ot);return t.appendChild(e),t}}]),n}(A);rt.tagName="ky-checkbox";var ot=function(t){m()(n,t);var e=nt(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-checkbox-content",t))}return n}(v);function it(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}ot.tagName="ky-checkbox-content";var at=function(t){m()(n,t);var e=it(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-quote",t))}return n}(q);function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}at.tagName="ky-quote";var ut=function(t){m()(n,t);var e=ct(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-custom",t))}return h()(n,[{key:"create",value:function(t){var e=R()(x()(n.prototype),"create",this).call(this);return null!=t&&t.innerHTML&&("string"==typeof t.innerHTML&&(e.innerHTML=t.innerHTML),e.setAttribute(n.InnerHTMLAttr,"")),null!=t&&t.type&&e.setAttribute("type",t.type),e}}]),n}(A);ut.InnerHTMLAttr="ky-inner-html",ut.tagName="ky-custom";n(19);function lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var st=function(t){m()(n,t);var e=lt(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-select-active",r.outputDisabled=!0,t))}return h()(n,[{key:"create",value:function(){for(var t=R()(x()(n.prototype),"create",this).call(this),e=0;e<4;e++){var r=document.createElement("i");r.setAttribute("index",String(e)),t.appendChild(r)}var o=document.createElement("ky-center");return t.appendChild(o),t}}]),n}(v);function ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}st.tagName="ky-select-active";var pt=function(t){m()(n,t);var e=ft(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-placement",r.outputDisabled=!0,t))}return n}(v);function ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}pt.tagName="ky-placement";var vt=function(t){m()(n,t);var e=ht(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-center",t))}return n}(v);vt.tagName="ky-center",k.register(new w),k.register(new v),k.register(new j),k.register(new N),k.register(new D),k.register(new V),k.register(new F),k.register(new q),k.register(new Z),k.register(new X),k.register(new A),k.register(new J),k.register(new $),k.register(new et),k.register(new rt),k.register(new ot),k.register(new at),k.register(new ut),k.register(new T),k.register(new st),k.register(new pt),k.register(new vt);var dt="1",mt="0",yt="Attribute",gt="Style",bt="None",xt="Global",Et=function(){function t(e){f()(this,t),this._model=null,this.commandType=bt,this.commandManager=e}return h()(t,[{key:"getRange",value:function(){return this.getEditor().getNormalizedRange()}},{key:"getEditor",value:function(){return this.commandManager.editor}},{key:"getContainer",value:function(){return this.getEditor().getContainer()}},{key:"initModel",value:function(){return{}}},{key:"createState",value:function(){return{data:null}}},{key:"getState",value:function(t){return this.createState()}},{key:"getModel",value:function(){return this._model?this._model:this._model=this.initModel()}},{key:"createElement",value:function(){var t;return null===(t=this.elementType)||void 0===t?void 0:t.create()}},{key:"isElementMatched",value:function(t,e){return!!e&&k.isType(t,this.elementType)}},{key:"findNearest",value:function(t,e){var n=this;return this.findNearestMatch(t,(function(t){return n.isElementMatched(t,e)}))}},{key:"findNearestMatch",value:function(t,e){for(var n=this.getContainer();t&&t!==n;){if(e(t))return t;t=t.parentElement}return null}},{key:"createBehaviorElement",value:function(t){return k.createElement(j,t)}},{key:"execute",value:function(t){}}],[{key:"isElement",value:function(e){return!t.isTextNode(e)}},{key:"isTextNode",value:function(t){return t&&3===t.nodeType}}]),t}(),wt=function(){function t(){f()(this,t),this.element=null,this.range=null}return h()(t,[{key:"clear",value:function(){this.element=null,this.range=null}},{key:"isEnabled",value:function(){return!(!this.element||!this.range)}}]),t}(),Ct=Object.create(null);function Ot(t){var e=t.editor.getContainer();if(!e)return!1;var n=t.startElement,r=t.endElement;return!(!!n&&e.contains(n))||!r||e.contains(r)}var kt=function(){function t(e){f()(this,t),this.pendingCommands=new wt,this.commands=Object.create(null),this.editor=e}return h()(t,[{key:"getCommand",value:function(t){var e=this.commands[t];if(!e){var n=Ct[t];n&&(e=this.commands[t]=new n(this))}return e}},{key:"getCommandByType",value:function(t){return Object.values(this.commands).find((function(e){return e.constructor===t}))}},{key:"getCommandState",value:function(t){var e=this.getCommand(t);return e?e.getState():null}},{key:"execCommand",value:function(t,e){var n=this.getCommand(t);if(n){if(n.commandType!==xt){var r=this.editor.getNormalizedRange();if(!r)return;Ot(r)&&r.select()}var o=Array.prototype.slice.call(arguments);return o.shift(),n.execute.apply(n,o)}}}],[{key:"install",value:function(t,e){Ct[t]=e}}]),t}(),_t=n(5),Rt=function(){return(Rt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},St=/\s+|\s*,\s*/;function At(t){return t}var Mt={passive:!0},Tt=function(){function t(t){this._options=Object.assign({},Mt,t||{}),this.mountKey=Object(_t.findUniqueKey)("eventManagerId"),this._proxyElement=null,this._eventListeners={},this._events={},this._bindEventTypes={},this._attributes={},this._nativeEventItems=[]}return t.prototype.onNative=function(t,e,n){var r=this._nativeEventItems;if(r.find((function(n){return n.name===t&&n.handler===e})))return this;r.push({name:t,handler:e,options:n});var o=this._proxyElement,i=this.mountKey;return o&&o[i]&&o.addEventListener(t,e,n),this},t.prototype.offNative=function(t,e){var n=this._nativeEventItems,r=-1;if(n.some((function(n,o){if(n.name===t&&n.handler===e)return r=o,!0})),-1!==r){n.splice(r,1);var o=this._proxyElement,i=this.mountKey;o&&o[i]&&o.removeEventListener(t,e)}return this},t.prototype.attr=function(t,e){var n=this._attributes;return 1===arguments.length?n[t]:2===arguments.length?(n[t]=e,this):Object.assign({},n)},t.prototype.option=function(t,e){var n=this._options;return 1===arguments.length?n[t]:(2===arguments.length&&(n[t]=e),this)},t.prototype.removeAttr=function(t){return delete this._attributes[t]},t.prototype.getProxyElement=function(){return this._proxyElement},t.prototype._parseEventType=function(t){return t?t.trim().split(St):[]},t.prototype._executeHandlers=function(t){var e=t.handlers;e&&e.forEach((function(e){var n=Object.create(t.event);Object(_t.safeExecute)(e,t.eventTarget,[t.eventBuilder(n)])}))},t.prototype.on=function(t,e){var n=this._eventListeners;return this._parseEventType(t).forEach((function(t){var r=n[t];r||(r=n[t]=[]),-1===r.indexOf(e)&&r.push(e)})),this},t.prototype.once=function(t,e){var n,r=this,o=function(){r.off(t,n)};n=function(){e.apply(this,arguments),o()},this.on(t,n)},t.prototype.off=function(t,e){var n=this._eventListeners;return this._parseEventType(t).forEach((function(t){var r=n[t];if(r){var o=r.indexOf(e);-1!==o&&r.splice(o,1),0===r.length&&delete n[t]}})),this},t.prototype.emit=function(t,e,n){var r=this._eventListeners;return this._parseEventType(t).forEach((function(t){var o=r[t];o&&o.forEach((function(t){Object(_t.safeExecute)(t,e,n)}))})),this},t.prototype._register=function(t,e,n){var r=t.split(":"),o=r[0],i=r.length>1?r[1]:r[0],a=this._events[o];return a||(a=this._events[o]={}),e?(a[i]={eventTarget:Object(_t.asFunc)(e),eventBuilder:Object(_t.isFunction)(n)?n:At},this._registerBindEventType(o)):(delete a[i],0===Object.keys(a).length&&this._logoutBindEventType(o)),this},t.prototype.register=function(t,e,n){var r=this;return t.split(St).forEach((function(t){t&&r._register(t,e,n)})),this},t.prototype._createEvent=function(t){var e=this,n={};for(var r in t)n[r]=t[r];var o=t,i=!1;return Object.assign(n,{native:o,stopPropagation:function(){i=!0},isStopPropagation:function(){return i},preventDefault:function(){var n,r=e._options;!1===Rt({passive:r.passive},null===(n=r.eventOptions)||void 0===n?void 0:n[t.type]).passive&&t.preventDefault()}})},t.prototype.createEvent=function(t){return this._createEvent(t)},t.prototype._logoutBindEventType=function(t){var e=this._bindEventTypes,n=e[t];if(n){delete e[t];var r=this._proxyElement;r&&r.removeEventListener(t,n)}},t.prototype._registerBindEventType=function(t){var e,n=this,r=this._bindEventTypes;if(!r[t]){var o=function(e){var r=n._events[t];if(r){var o=Object.keys(r);if(0!==o.length){var i=n._eventListeners,a=[];o.forEach((function(t){var o=r[t],c=o.eventTarget;if(c=Object(_t.safeExecute)(c,null,[e])){var u=n._createEvent(e);u.target=c;var l=i[t];a.push({handlers:l,eventTarget:c,eventBuilder:o.eventBuilder,event:u})}}));for(var c=e.target,u=!1,l=function(){var t=!1;if(a=a.filter((function(e){return e.eventTarget!==c||(u||(n._executeHandlers(e),e.event.isStopPropagation()&&(t=e.event.isStopPropagation())),!1)})),t&&(u=t),c===n._proxyElement||0===a.length)return"break";c=c.parentElement};c;){if("break"===l())break}a.forEach((function(t){n._executeHandlers(t)}))}}};if(r[t]=o,this._proxyElement){var i=this._options;this._proxyElement.addEventListener(t,o,Rt({passive:i.passive},null===(e=i.eventOptions)||void 0===e?void 0:e[t]))}return this}},t.prototype._unmount=function(){this.stop(),this._proxyElement=null},t.prototype.stop=function(){var t=this._proxyElement;if(t){var e=this._bindEventTypes;Object.keys(e).forEach((function(n){var r=e[n];null==t||t.removeEventListener(n,r)})),this._nativeEventItems.forEach((function(e){null==t||t.removeEventListener(e.name,e.handler)}));var n=this.mountKey;t[n]=!1}},t.prototype.resume=function(){var t=this._proxyElement;if(t){var e=this._options,n=this.mountKey;if(!t[n]){var r=this._bindEventTypes;Object.keys(r).forEach((function(n){var o,i=r[n];null==t||t.addEventListener(n,i,Rt({passive:e.passive},null===(o=e.eventOptions)||void 0===o?void 0:o[n]))})),this._nativeEventItems.forEach((function(e){e.options?null==t||t.addEventListener(e.name,e.handler,e.options):null==t||t.addEventListener(e.name,e.handler)})),t[n]=!0}}},t.prototype.unMount=function(){return this._unmount()},t.prototype.unmount=function(){return this._unmount()},t.prototype.mount=function(t){var e=t;"string"==typeof e&&(e=document.querySelector(e)),this._proxyElement&&this._proxyElement!==e&&this.unmount(),this._proxyElement=e,this.resume()},t}(),Pt=DOMMatrix,jt=DOMPoint,zt=-1!==navigator.userAgent.indexOf("Chrome"),Nt=function(t,e,n){var r;if(function(t){return"svg"===String(t.tagName).toLowerCase()}(t))return t.getScreenCTM();if(r=t.ownerSVGElement)return r.getScreenCTM().multiply(t.getScreenCTM());var o=t.offsetParent,i=window.getComputedStyle(t),a=o&&o!==document.body?window.getComputedStyle(o):{},c=t.offsetTop,u=t.offsetLeft,l=parseFloat(a.borderLeftWidth)||0,s=parseFloat(a.borderTopWidth)||0,f=(null==o?void 0:o.scrollTop)||0,p=(null==o?void 0:o.scrollLeft)||0,h=function(t,e){var n=0,r=0;if(!t)return{scrollTop:r,scrollLeft:n};for(var o=t.parentElement;o&&o!==e;)n+=o.scrollLeft||0,r+=o.scrollTop||0,o=o.parentElement;return{scrollTop:r,scrollLeft:n}}(t,o),v=new DOMMatrix;n||(v.e=l+u-p-h.scrollLeft||0,v.f=s+c-f-h.scrollTop||0);var d=i.transform,m=d&&"none"!==d?v.multiply(new DOMMatrix(d)):v;if(e){var y=new DOMMatrix([1,0,0,1,t.offsetWidth/2||0,t.offsetHeight/2||0]);return m.multiply(y)}return m},Bt=function(t){var e=t.ownerSVGElement;return e||t.offsetParent},It=function(t,e){var n=Bt(t);return n?It(n,t).multiply(Nt(t,t===e)):Nt(t)},Lt=function(t){return It(t,t)},Dt=function(t,e){for(var n=t,r=null;n&&(r=r?Nt(n,n===t,n===e).multiply(r):Nt(n,n===t),n!==e);)n=Bt(n);return r||new DOMMatrix};const Ht="function"==typeof btoa,Vt="function"==typeof Buffer,Ut=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder?new TextEncoder:void 0),Ft=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),Wt=((t=>{let e={};t.forEach((t,n)=>e[t]=n)})(Ft),String.fromCharCode.bind(String)),qt=("function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),t=>t.replace(/=/g,"").replace(/[+\/]/g,t=>"+"==t?"-":"_")),Kt=t=>{let e,n,r,o,i="";const a=t.length%3;for(let a=0;a<t.length;){if((n=t.charCodeAt(a++))>255||(r=t.charCodeAt(a++))>255||(o=t.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=n<<16|r<<8|o,i+=Ft[e>>18&63]+Ft[e>>12&63]+Ft[e>>6&63]+Ft[63&e]}return a?i.slice(0,a-3)+"===".substring(a):i},Zt=Ht?t=>btoa(t):Vt?t=>Buffer.from(t,"binary").toString("base64"):Kt,Yt=Vt?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let n=0,r=t.length;n<r;n+=4096)e.push(Wt.apply(null,t.subarray(n,n+4096)));return Zt(e.join(""))},Xt=t=>{if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?Wt(192|e>>>6)+Wt(128|63&e):Wt(224|e>>>12&15)+Wt(128|e>>>6&63)+Wt(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return Wt(240|e>>>18&7)+Wt(128|e>>>12&63)+Wt(128|e>>>6&63)+Wt(128|63&e)},Gt=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Jt=t=>t.replace(Gt,Xt),Qt=Vt?t=>Buffer.from(t,"utf8").toString("base64"):Ut?t=>Yt(Ut.encode(t)):t=>Zt(Jt(t)),$t=(t,e=!1)=>e?qt(Qt(t)):Qt(t);function te(t){var e=t.pointA,n=t.pointB,r=t.rotate,o=void 0===r?90:r,i=t.size||16,a=t.color||"#000",c=[n.x-e.x,n.y-e.y],u=c[0]/Math.sqrt(c[0]*c[0]+c[1]*c[1]),l=180*Math.acos(u)/Math.PI;c[1]<0&&(l=180-l),l+=o;var s=i,f=i,p=new Pt([1,0,0,1,512,512]),h=new Pt([1,0,0,1,-512,-512]),v=(new Pt).rotate(l);v=p.multiply(v).multiply(h);var d='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'.concat(s,'" height="').concat(f,'">\n    <path transform="matrix(').concat(v.a," ").concat(v.b," ").concat(v.c," ").concat(v.d," ").concat(v.e," ").concat(v.f,')" d="M768 341.333333l170.666667 170.666667-170.666667 170.666667v-128H256v128l-170.666667-170.666667 170.666667-170.666667v128h512V341.333333z" fill="').concat(a,'"></path>\n</svg>'),m=$t(d);return"url(data:image/svg+xml;base64,".concat(m,") ").concat(s/2," ").concat(f/2,",move")}function ee(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ne(t,e){var n=e.pointA,r=e.pointB,o=[r.x-n.x,r.y-n.y],i=[t.x-n.x,t.y-n.y],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),c=Math.sqrt(i[0]*i[0]+i[1]*i[1]),u=(o[0]*i[0]+o[1]*i[1])/(a*c);return Math.sin(Math.acos(u))*c}function re(t,e,n){var r=e.pointA,o=e.pointB,i=[o.x-r.x,o.y-r.y],a=[t.x-r.x,t.y-r.y],c=Math.sqrt(i[0]*i[0]+i[1]*i[1]),u=Math.sqrt(a[0]*a[0]+a[1]*a[1]),l=(i[0]*a[0]+i[1]*a[1])/(c*u);return l<0?ee(r,t)<=n:u*l>c?ee(o,t)<=n:Math.sin(Math.acos(l))*u<=n}var oe=function(t,e,n){var r,o=(n||{}).throttle,i=void 0===o?100:o,a=function(){clearTimeout(r),"function"==typeof e&&(r=setTimeout((function(){e({target:t})}),i))},c=new MutationObserver(a);t.addEventListener("scroll",a,!0),c.observe(t,{attributes:!0,childList:!0,subtree:!0});var u=new ResizeObserver(a);return u.observe(t),function(){t.removeEventListener("scroll",a),c.disconnect(),u.disconnect()}},ie=function(t,e,n){var r=new IntersectionObserver((function(t){var e=t.some((function(t){return t.isIntersecting}));n(e)}),{root:t});return r.observe(e),function(){r.disconnect()}},ae=function(){return(ae=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ce="http://www.w3.org/1999/xhtml",ue={svg:"http://www.w3.org/2000/svg",xhtml:ce,html:ce,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var le=window.Symbol?window.Symbol("_data"):"_data",se=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},fe=Object.create(null),pe=function(t,e){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height};function he(t,e){if(!e)return se.apply(window,arguments);var n=fe[e];if(!n){n=fe[e]=[t];var r=function(){n.forEach((function(t){Object(_t.safeExecute)(t)})),delete fe[e]};return se.call(window,r)}n.push(t)}var ve=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){return clearTimeout(t)};function de(){return ve.apply(window,arguments)}function me(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r in t)return t[r]}}function ye(t){if(!t)return!1;var e=t.tagName,n=t.namespaceURI;if(!e||!n)return!1;return(n===ce?document.createElement(e):document.createElementNS(n,e.toLowerCase())).constructor===t.constructor}function ge(t){return String(t.getAttribute("class")||"").split(/\s+/)}function be(t,e){t.setAttribute("class",[].concat(e).join(" "))}function xe(t){return t instanceof Te&&(t=t.node()),_e((zt&&t.getScreenCTM?t.getScreenCTM():Ee(t))||new Pt).scale||{x:1,y:1}}function Ee(t){if(t instanceof Te&&(t=t.node()),!zt)return Lt(t);return"function"==typeof t.getScreenCTM?t.getScreenCTM():Lt(t)}var we=function(t,e){var n=Ee(t),r=new Pt(n.toString()),o=r.e,i=r.f,a={x:1,y:1};if(e){var c=_e(r).scale;c&&(a.x=c.x,a.y=c.y)}r.e=r.f=0;var u=t.offsetWidth,l=t.offsetHeight,s=[{x:o-u/2,y:i-l/2},{x:o+u/2,y:i-l/2},{x:o+u/2,y:i+l/2},{x:o-u/2,y:i+l/2}],f=s.map((function(t){return(t=ae({},t)).x-=o,t.y-=i,(t=Se(t,r)).x+=o,t.y+=i,t}));return{originPoints:s,points:f,ctm:r}},Ce=function(t,e,n){var r=e.points,o=e.ctm,i={x:1,y:1};if(n){var a=_e(o).scale;a&&(i.x=a.x,i.y=a.y)}var c={pointA:r[3],pointB:r[0]},u={pointA:r[0],pointB:r[1]},l=(t.x-c.pointA.x)*(c.pointB.y-c.pointA.y)-(t.y-c.pointA.y)*(c.pointB.x-c.pointA.x),s=(t.x-u.pointA.x)*(u.pointB.y-u.pointA.y)-(t.y-u.pointA.y)*(u.pointB.x-u.pointA.x),f=ne(t,c)*(l>0?-1:1),p=ne(t,u)*(s>0?-1:1);return{x:f/i.x,y:p/i.y}},Oe=function(t,e,n){var r=we(e),o=r.originPoints,i=r.ctm,a=r.points;return{ctm:i,position:Ce(t,r,n),points:a,originPoints:o}};function ke(t){t instanceof Te&&(t=t.node());var e=window.getComputedStyle(t).transform;return new Pt(e)}function _e(t){var e=t.a,n=t.b,r=t.c,o=t.d,i=e*o-n*r,a={rotate:0,scale:{x:1,y:1},skewX:0,skewY:0};if(0!=e||0!=n){var c=Math.sqrt(e*e+n*n);a.rotate=n>0?Math.acos(e/c):-Math.acos(e/c),a.scale={x:c,y:i/c},a.skewX=Math.atan((e*r+n*o)/(c*c))}else if(0!=r||0!=o){var u=Math.sqrt(r*r+o*o);a.rotate=Math.PI/2-(o>0?Math.acos(-r/u):-Math.acos(r/u)),a.scale={x:i/u,y:u},a.skewY=Math.atan((e*r+n*o)/(u*u))}return a}function Re(t,e,n,r){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),"object"==typeof t){var o=t;t=o.x||0,e=o.y||0,n=o.z||0,r=o.w||1}return new jt(t,e,n,r)}function Se(t,e){return Re(t).matrixTransform(e)}function Ae(t,e){e=Object(_t.ensureArray)(e);var n=ge(t);return 0===arguments.length?n:(e.forEach((function(t){t.split(/\s+/).forEach((function(t){-1===n.indexOf(t)&&n.push(t)}))})),be(t,e),t)}function Me(t,e){e=Object(_t.ensureArray)(e);var n=ge(t);return n.filter((function(t){return-1===e.indexOf(t)})),be(t,n),t}var Te=function(){function t(e){if(!(this instanceof t))return new t(e);this.nodes=[].concat(e)}return t.prototype.node=function(){return this.nodes[0]||null},t.prototype.prop=function(t,e){var n=this;if(Object(_t.isObject)(t)){var r=t;return Object.keys(r).forEach((function(t){n.prop(t,r[t])})),this}var o=t,i=this.node();if(1===arguments.length)return i&&i[o];var a=Object(_t.asFunc)(e);return this.nodes.forEach((function(t,e){t[o]=a.call(t,e)})),this},t.prototype.memo=function(t,e){var n="_dom_memo_";if(Object(_t.isObject)(t)){var r={},o=t;return Object.keys(o).forEach((function(e){var i="".concat(n).concat(t);r[i]=o[e]})),this.prop(r)}var i="".concat(n).concat(t),a=[].slice.call(arguments);return a[0]=i,this.prop.apply(this,a)},t.prototype.size=function(){return this.nodes.length},t.prototype.data=function(t){var e=this.node();if(e){if(0===arguments.length)return e[le];var n=Object(_t.asFunc)(t);return this.nodes.forEach((function(t,e){t[le]=n.call(t,e)})),this}},t.prototype.offsetWidth=function(){var t=this.node();return t?t.offsetWidth:0},t.prototype.offsetHeight=function(){var t=this.node();return t?t.offsetHeight:0},t.prototype.position=function(){var t=this.bounds();return{x:t.x,y:t.y}},t.prototype.bounds=function(){var t=this.node();if(!t)return{x:0,y:0,width:0,height:0};var e=t.getBoundingClientRect();return{x:e.left||e.x,y:e.top||e.y,width:e.width,height:e.height}},t.prototype.relativePosition=function(e){var n=e;n instanceof t||(n=Pe(e));var r=this.position(),o=n.position();return{x:r.x-o.x,y:r.y-o.y}},t.prototype.text=function(t){var e=this.node();return e?0===arguments.length?e.textContent:(this.nodes.forEach((function(e,n){e.textContent=Object(_t.asFunc)(t).call(e,n)})),this):""},t.prototype.html=function(t){var e=this.node();return e?0===arguments.length?e.innerHTML:(this.nodes.forEach((function(e,n){e.innerHTML=Object(_t.asFunc)(t).call(e,n)})),this):""},t.prototype.call=function(t){return Object(_t.isFunction)(t)?(this.nodes.forEach((function(e,n){t.call(e,n)})),this):this},t.prototype.reAppend=function(){return this.nodes.forEach((function(t){var e=t.parentElement;e&&e.appendChild(t)})),this},t.prototype.attr=function(t,e){var n=this;if(Object(_t.isObject)(t)){var r=t;return Object.keys(r).forEach((function(t){n.attr(t,r[t])})),this}var o=this.nodes,i=this.node(),a=t;if(1===arguments.length)return i?i.getAttribute(a):null;if(2===arguments.length){var c=Object(_t.asFunc)(e);return o.forEach((function(t,e){var n=c.call(t,e);null!==n?t.setAttribute(a,n):t.removeAttribute(a)})),this}return i?i.getAttributeNames().map((function(t){return{name:t,value:i.getAttribute(t)}})):null},t.prototype.css=function(t,e){var n=this;if(Object(_t.isObject)(t)){var r=t;return Object.keys(r).forEach((function(t){n.css(t,r[t])})),this}var o=this.nodes,i=o[0],a=t;return 1===arguments.length?i?i.style[a]:null:2===arguments.length?(o.forEach((function(t,n){var r=Object(_t.asFunc)(e,n);t.style[a]=r.call(t)})),this):i?Object.assign({},i.style):{}},t.prototype._clazz=function(t,e){var n=Object(_t.asFunc)(e),r=this.nodes;return 0===arguments.length?Ae(r[0]):(r.forEach((function(e,r){n.call(e,r)?Me(e,t):Ae(e,t)})),this)},t.prototype.clazz=function(t,e){if(0===arguments.length)return this._clazz();if(1===arguments.length){if(!t)return!1;t=[].concat(t);var n=this._clazz();return t.length===n.length&&t.every((function(t){return n.indexOf(t)>=0}))}return this._clazz(t,!e)},t.prototype.createElement=function(e,n){"svg"===String(e).toLowerCase()&&(n=ue.svg),n=n&&ue[n]||n;var r=this.nodes[0];return new t(document.createElementNS(n||r&&r.namespaceURI||ue.html,e))},t.prototype.append=function(e,n){var r=this.node();if(e instanceof t)return e.nodes.forEach((function(t){r.appendChild(t)})),e;if(ye(e))return this.append(new t(e));var o=this.createElement(e,n);return this.append(o)},t.prototype.select=function(e){var n=this.nodes,r=[];return n.some((function(t){var n=Pe(e,t);if(n.size()>0)return r=r.concat(n.nodes),!0})),new t(r)},t.prototype.selectAll=function(e){var n=this.nodes,r=[];return n.forEach((function(t){var n=je(e,t);r=r.concat(n.nodes)})),new t(r)},t.prototype.remove=function(){this.nodes.forEach((function(t){He(t)}))},t.prototype.empty=function(){this.nodes.forEach((function(t){Ue(t)}))},t}();function Pe(t,e){return t instanceof Te?t:("string"==typeof t&&(t=(e||document).querySelector(t)),new Te(Object(_t.ensureArray)(t)[0]))}function je(t,e){return t instanceof Te?t:("string"==typeof t&&(t=[].slice.call((e||document).querySelectorAll(t))),new Te(t))}var ze=function(t,e){if(ye(t))return new Te(t);var n=(e=ue[t]||e)?document.createElementNS(e,t):document.createElement(t);return new Te(n)};function Ne(t,e){var n=e,r={x:me(t,["clientX","x"])||0,y:me(t,["clientY","y"])||0};if(n instanceof Te&&(n=n.node()),!ye(n))return r;var o=n.getBoundingClientRect();return r.x=r.x-(me(o,["left","x"])||0),r.y=r.y-(me(o,["top","y"])||0),r}function Be(t,e){void 0===e&&(e=document.documentElement);for(var n=t.offsetTop,r=t.offsetLeft,o=t.offsetWidth,i=t.offsetHeight,a=t;(a=a.offsetParent)&&a!==e;){var c=a.offsetParent,u=c&&c!==document.body?window.getComputedStyle(c):{},l=parseFloat(u.borderLeft)||0;n+=(parseFloat(u.borderTop)||0)+a.offsetTop-a.scrollTop,r+=l+a.offsetLeft-a.scrollLeft}return{x:r,y:n,width:o,height:i,top:n,left:r}}function Ie(t,e){void 0===e&&(e=document.documentElement);var n=Be(t,e);return[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}]}function Le(t,e){var n=Ee(e);n.e=0,n.f=0;var r=Ee(t);r.e=0,r.f=0;var o=Be(e),i=Ie(t).map((function(t){return Se(t,r)})),a=Se({x:o.x,y:o.y},n);return i.forEach((function(t){t.x=t.x-a.x,t.y=t.y-a.y})),i}function De(t){if(!t)return[];return t instanceof Te?t.nodes:[].concat(t)}function He(t){if(t instanceof Te)return t.remove();Object(_t.isFunction)(t.remove)?t.remove():t.parentElement&&t.parentElement.removeChild(t)}function Ve(t){De(t).forEach(He)}function Ue(t){if(t instanceof Te)return t.empty();for(;t.firstChild;)He(t.firstChild)}function Fe(t){De(t).forEach(Ue)}function We(t,e,n){var r=De(t),o=null,i=n;return i&&i instanceof Te&&(i=i.node()),r.some((function(t){var n=function(t,e,n){for(var r=Object(_t.asFunc)(e);t;){if(r.call(null,t))return t;if(t=t.parentElement,n&&("function"==typeof n?Object(_t.safeExecute)(n,null,[t]):n===t))return null}return null}(t,e,i);if(n)return o=n,!0})),o}function qe(t){return(new DOMParser).parseFromString(t,"text/html").body.firstElementChild}function Ke(t){var e=0,n=0;if("number"==typeof t.pageX)e=t.pageX,n=t.pageY;else{var r=(t.changedTouches||[])[0]||(t.touches||[])[0];r&&(e=r.clientX||r.pageX,n=r.clientY||r.pageY)}try{"number"!=typeof t.clientX&&(t.clientX=e),"number"!=typeof t.clientY&&(t.clientY=n),"number"!=typeof t.pageX&&(t.pageX=e),"number"!=typeof t.pageY&&(t.pageY=n)}catch(t){console.warn(t)}return t.tourchEvent=!0,t}var Ze,Ye=function(t,e,n){var r=(n||{}).maxDistance,o=void 0===r?5:r,i=null,a=function(t){var e=Ke(t);i=Ne(e)},c=function(t){var n=Ke(t),r=Ne(n);i&&ee(i,r)<=o&&e(n),i=null};return t.addEventListener("touchstart",a),t.addEventListener("touchend",c),function(){t.removeEventListener("touchstart",a),t.removeEventListener("touchend",c)}},Xe=!1,Ge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return Xe;Xe=!!t[0]},Je=(n(20),function(t){function e(e){return"".concat(t,"-").concat(e)}return{prefixName:e,prefixClassName:function(t,n){return 1===arguments.length&&(n=t,t=""),n?n.split(/\s+/).map((function(n){return e("".concat(t?t+"-":"").concat(n))})).join(" "):n||""}}}),Qe=Je("ky-dom"),$e=(Qe.prefixName,Qe.prefixClassName),tn=function(){return(tn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},en=Object(_t.findUniqueKey)("ResizeDataKey");!function(t){t.Top="Top",t.Right="Right",t.Bottom="Bottom",t.Left="Left"}(Ze||(Ze={}));var nn="Vertical",rn="Horizontal",on={enabled:!0,resizing:!1},an={isResizing:function(){return on.resizing},enable:function(t){return 0===arguments.length?on.enabled:on.enabled=!!t},create:function(){return null}};function cn(t){return t?"string"==typeof t?document.querySelector(t):"function"==typeof t?t():t:document.body}var un=Object(_t.findUniqueKey)("ResizeElements");function ln(t){if(!t)return null;var e=t.attr(un);return e||(e=new sn,t.attr(un,e)),e}var sn=function(){function t(){this._data={},this._values=[]}return t.prototype.has=function(t){return this._data.hasOwnProperty(t)},t.prototype.remove=function(t){delete this._data[t],this._resetValues()},t.prototype._resetValues=function(){this._values=Object.values(this._data).sort((function(t,e){var n=t&&t[en],r=e&&e[en],o=n&&n.index,i=r&&r.index;return o*=1,i*=1,Number.isNaN(o)&&(o=-99999),Number.isNaN(i)&&(i=-99999),i-o}))},t.prototype.get=function(t){return this.has(t)?this._data[t]:null},t.prototype.put=function(t,e){var n=this._data;null!=e?(n[t]=e,this._resetValues()):this.remove(t)},t.prototype.values=function(){return[].concat(this._values)},t.prototype.size=function(){return this._values.length},t}();var fn={points:[0,1],getLine:function(t){return{pointA:t._points[this.points[0]],pointB:t._points[this.points[1]]}},getCursorStyle:function(t,e){return te(this.getCursorOptions(t,e))},getCursorOptions:function(t,e){var n,r,o=this.getLine(t);return tn(tn(tn({},o),{color:null===(n=t.resizeOptions)||void 0===n?void 0:n.cursorColor,size:null===(r=t.resizeOptions)||void 0===r?void 0:r.cursorSize}),e)},test:function(t){var e=function(t){return(null==t?void 0:t.hitSize)||5}(t.resizeOptions);return re({x:t.clientX,y:t.clientY},this.getLine(t),e)}};function pn(t){return Object.assign(Object.create(fn),t)}var hn=[pn({type:Ze.Bottom,group:nn,pos:{x:0,y:1},points:[3,2],compute:function(t){return{height:t.my}}}),pn({type:Ze.Top,group:nn,pos:{x:0,y:-1},points:[0,1],compute:function(t){return{y:t.my}}}),pn({type:Ze.Right,group:rn,pos:{x:1,y:0},points:[1,2],compute:function(t){return{width:t.mx}}}),pn({type:Ze.Left,group:rn,pos:{x:-1,y:0},points:[0,3],compute:function(t){return{x:t.mx}}})];function vn(t,e){var n={},r={};if(!t)return r;if(t.tx&&(n.tx=t.tx,r.width="".concat(t.width,"px")),t.ty&&(n.ty=t.ty,r.height="".concat(t.height,"px")),t.tw&&(r.width="".concat(t.width,"px")),t.th&&(r.height="".concat(t.height,"px")),t.tx||t.ty)if(e){var o=ke(e);o.e+=t.tx||0,o.f+=t.ty||0,r.transform="".concat(o)}else r.transform="translate3d(".concat(t.tx||0,"px,").concat(t.ty||0,"px,0)");return r}var dn,mn,yn,gn,bn,xn,En,wn,Cn,On,kn,_n,Rn=(wn=$e("global-resize-render"),Cn={showVertex:!1,showBorder:!0},On={x:0,y:0},{config:function(t){t&&(Cn.showVertex=!!t.showVertex,Cn.showBorder=!!t.showBorder)},mount:function(t){!function(){if(!dn){dn=ze("div").clazz(wn,!0);var t=(mn=dn.append("svg")).append("g");yn=t.append("path"),bn=t.append("rect"),gn=t.append("text").attr("text-anchor","middle").attr("alignment-baseline","middle"),xn=mn.createElement("g");for(var e=0;e<4;e++)xn.append("circle").attr("r",5)}Cn.showVertex&&mn.append(xn)}(),(t=t||document.body).appendChild(dn.node()),En=function t(e){var n=window.getComputedStyle(e);if(["relative","absolute","fixed"].indexOf(n.position)>=0)return e;var r=e.parentElement;return r?t(r):e}(t);var e=document.documentElement,n=En.getBoundingClientRect(),r=xe(En),o=r.x,i=r.y;On.x=(En===e?0:En.scrollLeft)-n.x/(o||1),On.y=(En===e?0:En.scrollTop)-n.y/(i||1)},unmount:function(){var t=dn.node();t.parentNode&&t.parentNode.removeChild(t),dn.css({display:"none"}),En=null,Cn.showVertex=!1,Cn.showBorder=!0,xn.remove()},apply:function(t){var e=t||{},n=e.className,r=e.style,o=e.points;n&&dn.clazz(n,!0),dn.css(r);var i=0,a=0,c=0,u=0,l=xe(mn.node()),s=l.x,f=l.y,p=On.x,h=On.y,v="M"+(o=o.map((function(t){return tn(tn({},t),{x:t.x/(s||1),y:t.y/(f||1)})}))).map((function(t,e){var n=t.x,r=t.y;0===e?(i=a=n,c=u=r):(i=Math.min(i,n),a=Math.max(a,n),c=Math.min(c,r),u=Math.max(u,r));var o=r+h;return"".concat(n+p," ").concat(o)})).join("L")+"Z";mn.attr("width",a+p+5).attr("height",u+h+5),yn.attr("d",v).css({stroke:Cn.showBorder?"":"transparent"});var d=0|ee(o[0],o[1]),m=0|ee(o[1],o[2]),y=p+(i+a)/2|0,g=h+(c+u)/2|0;gn.attr("x",y).attr("y",.5+(0|g)).text("".concat(d," * ").concat(m));var b=gn.node().getBBox(),x=b.height,E=b.width+6,w=x+2;bn.attr("width",E).attr("height",w).attr("x",y-E/2).attr("y",.5+(g-w/2|0)).attr("rx",w/2).attr("ry",w/2),Cn.showVertex?xn.selectAll("circle").attr("cx",(function(t){return o[t].x+p})).attr("cy",(function(t){return o[t].y+h})).attr("opacity","1"):xn.selectAll("circle").attr("opacity","0")}}),Sn=(kn=null,_n=function(t){return void 0===t&&(t=!0),!kn&&t&&((kn=document.createElement("div")).className=$e("overlay"),Object.assign(kn.style,{position:"fixed",zIndex:9999,left:"0px",top:"0px",right:"0px",bottom:"0px"})),kn},function(){return{show:function(t){var e=_n(),n=t||document.body;e.parentElement!==n&&n.appendChild(e)},hide:function(){var t=_n(!1);(null==t?void 0:t.parentElement)&&t.parentElement.removeChild(t)}}}),An=Object(_t.findUniqueKey)("ResizeEventManager"),Mn=$e("resizing-active"),Tn=$e("resize-cursor");function Pn(t){var e=(t=t||document.body)[An];if(e)return e;e=new Tt({eventOptions:{touchmove:{passive:!1},touchstart:{passive:!1}}}),t[An]=e;var n=ln(e),r=function(){return e.getProxyElement()},o=function(t){on.resizing=!1;var n=p.pendingResize,o=r();if(null==o||o.removeAttribute(Mn),null==s||s.hide(),n){var a=n.resizeTarget,c=n.resizeData,u=a.element,l=a.options;if(t.resizeElement=u,Object(_t.safeApply)(l.onResizeEnd,[t,c]),l.overlay&&l.syncElementResize&&c){var f=vn(c,u);Object.assign(u.style,f)}}!function(t){i.touchable()?t.register("touchend:resizeEnd",null):t.register("mouseup:resizeEnd,mouseleave:resizeEnd",null)}(e),p.reset(),Rn.unmount()},a=null,c=function(){var t=new Set,e=r();e.removeAttribute(Tn),t.add(e),n.values().forEach((function(e){var n=e[en],r=f(n);r&&!t.has(r)&&(r.removeAttribute(Tn),t.add(r))}))},u=function(e,n){var o="";if(a||((a=document.createElement("style")).setAttribute("type","text/css"),a.setAttribute("rel","stylesheet")),e.length){var i=r();a.parentElement!==i&&i.appendChild(a)}if(e.length>1){var u=void 0,l=void 0;e[0].group===nn?(u=e[0],l=e[1]):(u=e[1],l=e[0]),o=u.getCursorStyle(n,{rotate:u.pos.y*l.pos.x*45})}else e.length>0&&(o=e[0].getCursorStyle(n));if(o){t.setAttribute(Tn,"");var s=f(null==n?void 0:n.resizeOptions);null==s||s.setAttribute(Tn,"")}else c();a.textContent=o?"[".concat(Tn,"]{cursor:").concat(o,";"):""},l=function(t){var e=null,o=[],i=null;return an.enable()&&n.values().some((function(n){var a=function(t,e){var n={items:[]};if(!an.enable())return n;var r=Ne(t),o=e[en];if(!o)return n;if(!Object(_t.getBlnValue)(o.enabled,[t]))return n;var i=o.modes,a=function(t){var e="function"==typeof t?t():t;return e?[].concat(e):[]}(e);if(!a.length)return n;return a.some((function(a){var c=Pe(a).bounds();if(!pe(r,{x:c.x-20,y:c.y-20,width:c.width+40,height:c.height+40}))return!1;var u=we(a),l=u.points,s=u.originPoints,f={clientX:r.x,clientY:r.y,points:s,_points:l,resizeOptions:o},p={},h=hn.filter((function(n){return!!(null==i?void 0:i.some((function(r){return"function"==typeof r?r({e:t,resizeItem:e,type:n.type}):r===n.type})))&&(!(p[n.group]||!n.test(f))&&(p[n.group]=n,!0))}));return h.length>0?(n.items=h,n.options=f,n.resizeTarget={element:a,options:o},!0):void 0})),n}(t,n),c=a.items,u=a.options,l=a.resizeTarget;if(c.length>0){e=l;var s=l.options;return s.selfTrigger?(o=function(t,e){var n=e.element;return We(t.native?t.native.target:t.target,(function(t){if(t[en])return!!t}),(function(t){return t===r()}))===n}(t,l)?c:[],i=u,!0):(s.through||function(t,e){var n=We(t.native?t.native.target:t.target,(function(t){if(t[en])return!!t}),(function(t){return t===r()}));if(!n)return!0;var o=n[en].index||0;return(e.options.index||0)>=o||!!We(e.element,(function(t){if(t===n)return!!t}),(function(t){return t===r()}))}(t,l)?(o=c,i=u):o=[],!0)}})),{resizeTarget:o.length>0?e:null,hitItems:o,options:i}};!function(t){var e=function(){return t.getProxyElement()};t.register("mousedown:resizeStart",e),t.register("touchstart:resizeStart",(function(){return e}),Ke)}(e),function(t){var e=function(){return t.getProxyElement()};i.touchable()?t.register("touchmove:resize",e,Ke):t.register("mousemove:resize",e)}(e);var s=null,f=function(t){return(null==t?void 0:t.cursorElement)?"function"==typeof t.cursorElement?t.cursorElement():t.cursorElement:null},p={pendingResize:null,reset:function(){p.pendingResize=null}};return e.on("resizeStart",(function(t){if(an.enable()){var n=l(t),o=n.resizeTarget;if(o){t.preventDefault(),t.stopPropagation();var a=n.hitItems,c=n.options,f=o.options,h=o.element;if(0!==a.length){if(t.resizeElement=h,f.cursorOverlay&&(s=s||(s=Sn())).show(e.getProxyElement()),Object(_t.safeApply)(f.onResizeStart,[t]),!t.cancel){var v=Oe(Ne(t),h),d=_e(v.ctm).scale,m=Ne(t);p.pendingResize={resizeTarget:o,hitItems:a,clientInfo:v,originWidth:h.offsetWidth,originHeight:h.offsetHeight,startEventPosition:m,lastEventPosition:m,scale:d||{x:1,y:1}},u(a,c),function(t){var e=function(){return t.getProxyElement()};i.touchable()?t.register("touchend:resizeEnd",e,Ke):t.register("mouseleave:resizeEnd,mouseup:resizeEnd",e)}(e),Rn.config({showVertex:f.overlayVertex,showBorder:!1!==f.overlayBorder}),Rn.mount(r());var y=r();null==y||y.setAttribute(Mn,""),on.resizing=!0}}else p.reset()}}})),e.on("resize",(function(t){if(an.enable()){var e=Ne(t),n=p.pendingResize;if(n){t.preventDefault();var r=n.resizeTarget,i=r.element,a=r.options;if(t.resizeElement=i,Object(_t.safeApply)(a.onBeforeResize,[t,[e]]),t.cancel)o(t);else{var s=n.lastEventPosition,f=0,h=0;if(s&&(f=e.x-s.x,h=e.y-s.y),n.lastEventPosition=e,0!==f||0!==h){var v=n.originWidth,d=n.originHeight,m=n.scale,y=n.hitItems,g=n.clientInfo,b=g.points,x=g.position,E=g.ctm,w=Ce(Ne(t),g),C={tx:0,ty:0,tw:0,th:0,x:b[0].x,y:b[0].y,dx:f,dy:h,width:0,height:0,originWidth:v,originHeight:d,modes:{}},O={mx:w.x-x.x,my:w.y-x.y},k={},_={},R=new Set,S=new Set;y.forEach((function(t){var e=t.compute(O),n=e.x,r=void 0===n?0:n,o=e.y,i=void 0===o?0:o,a=e.width,c=void 0===a?0:a,u=e.height,l=void 0===u?0:u;C.tx+=r/m.x,C.ty+=i/m.y,C.tw+=c/m.x,C.th+=l/m.y,k[t.group]=!0,_[t.type]=!0,t.points.forEach((function(e){t.group===rn?R.add(e):S.add(e)}))})),C.width=v+C.tw-C.tx,C.height=d+C.th-C.ty,C.modes=_,Object(_t.safeApply)(a.onResize,[t,C]),t.cancel&&o(t),n.resizeData=C,E.e=E.f=0;var A;if((a.overlay||a.showResizeInfo)&&(A=b.map((function(t,e){var n={x:t.x,y:t.y};if(!R.has(e)&&!S.has(e))return n;var r=Se({x:R.has(e)?O.mx/m.x:0,y:S.has(e)?O.my/m.y:0},E),o=r.x,i=r.y;return n.x+=o,n.y+=i,n})),Rn.apply({className:a.overlayClassName,points:A,style:{display:"block"}})),!a.overlay&&a.syncElementResize){var M=vn(C,i);Object.assign(i.style,M)}}}}else{var T=l(t),P=T.hitItems,j=T.options;u(P,j)}}else c()})),e.on("resizeEnd",(function(t){o(t)})),e.mount(t),e}var jn=function(){return(jn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},zn={index:0,hitSize:5,selfTrigger:!1,through:!1,enabled:!0,onResizeStart:null,onResize:null,onResizeEnd:null,syncElementResize:!1,overlay:!0,overlayClassName:"",overlayVertex:!1,modes:[Ze.Top,Ze.Bottom,Ze.Left,Ze.Right],autoDestroyEventManager:!0},Nn=1;an.create=function(){var t,e,n=null,r=Nn++,o=jn({},zn);function i(){if(n){var e=ln(n);if(e.get(r)===t)return;t&&e.put(r,t)}}return{apply:function(t,e){this.updateOptions(e),this.updateResizeItem(t)},updateResizeItem:function(e){e!==t&&(t&&delete t[en],(t=e)[en]=o,i())},updateOptions:function(t){if(!n||t&&t!==e){e=t,Object.assign(o,t);var a=cn(o.container);if(o.container=a,o.overlayContainer=cn(o.overlayContainer||a),n){if(n.getProxyElement()!==a)ln(n).remove(r),n=Pn(a),i()}else n=Pn(a)}},destroy:function(){if(n){var i=ln(n);t=null,e=null,o=jn({},zn),i.remove(r),o.autoDestroyEventManager&&0===i.size()&&function(t){var e=t.getProxyElement();t.unmount(),e&&delete e[An]}(n),n=null}}}},Object.freeze(an);var Bn=an,In=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},Ln=Object(_t.findUniqueKey)("EventManager"),Dn=Object(_t.findUniqueKey)("RotationTargetOpt"),Hn=function(t,e){var n=t.attr(Dn);if(n||t.attr(Dn,n=[]),1===arguments.length)return n;if("function"!=typeof e)throw new TypeError("invalid param type!");return-1===n.indexOf(e)&&n.push(e),n};function Vn(t){var e,n=("string"==typeof(e=t.container)?document.querySelector(e):"function"==typeof e?e():e)||document.body,r=n[Ln];if(!r){var a={options:null,startPos:null,lastPos:null,center:null,reset:function(){a.options=null,a.startPos=null,a.lastPos=null,a.center=null}};r=n[Ln]=new Tt({eventOptions:{touchmove:{passive:!1},touchstart:{passive:!1}}});var c=null;return function(t){i.touchable()?t.register("touchstart:rotateStart",(function(t){return t.target}),o.simulateMouseDownEvent):t.register("mousedown:rotateStart",(function(t){return t.target}))}(r),r.on("rotateStart",(function(t){var e=Hn(r),u=null;if(We(t.target,(function(n){return e.some((function(e){var r=e(t,n);if(r)return u={options:r,node:n},!0}))}),(function(t){return t===n})),u){t.preventDefault();var l=u.options,s=u.node;a.options=l,a.startPos=Ne(t),a.lastPos=a.startPos,a.center="function"==typeof l.center?l.center(t,s):l.center,function(t){var e=function(){return t.getProxyElement()};i.touchable()?(t.register("touchmove:rotating",e,o.simulateMouseDownEvent),t.register("touchend:rotateEnd",e,o.simulateMouseDownEvent)):(t.register("mouseup:rotateEnd,mouseleave:rotateEnd",e),t.register("mousemove:rotating",e))}(r),l.cursorOverlay&&(c=c||(c=Sn())).show(r.getProxyElement()),Object(_t.safeApply)(l.onRotateStart,[t,s])}})),r.on("rotating",(function(t){t.preventDefault();var e=Ne(t),n=a.options,r=a.lastPos,o=a.center,i=function(t,e){var n=In(t)||1,r=In(e)||1;t[0]=t[0]/n,t[1]=t[1]/n,e[0]=e[0]/r,e[1]=e[1]/r;var o=Math.min(1,t[0]*e[0]+t[1]*e[1]),i=180*Math.acos(o)/Math.PI;return i>90&&(i=180-i),(e[1]>0?1:-1)*(e[0]>t[0]?-1:1)*i}([r.x-o.x,r.y-o.y],[e.x-o.x,e.y-o.y]);a.lastPos=e,Object(_t.safeApply)(n.onRotate,[t,{angle:i}]),t.cancel&&u(t)})),r.on("rotateEnd",(function(t){u(t)})),r.mount(n),r}function u(t){!function(t){i.touchable()?(t.register("touchmove:rotating",null),t.register("touchend:rotateEnd",null)):(t.register("mousemove:rotating",null),t.register("mouseup:rotateEnd,mouseleave:rotateEnd",null))}(r);var e=a.options;null==c||c.hide(),e&&Object(_t.safeApply)(e.onRotateEnd,[t])}}var Un={mount:function(t){var e=t.container,n=t.getOptions,r=Vn({container:e});Hn(r,n);var o=r.getProxyElement();return function(){var t=Hn(r),e=t.indexOf(n);e>=0&&t.splice(e,1),0===t.length&&function(t){var e=t[Ln];e&&(e.unmount(),delete t[Ln])}(o)}}};function Fn(t,e){return"string"==typeof t?(e||document).querySelector(t):"function"==typeof t?t():t}var Wn=function(){return(Wn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var qn={scaleEnabled:!0,dragEnabled:!0},Kn={dragEnabled:!0,scaleEnabled:!0,maxZoom:10,minZoom:.01,contextZoom:void 0};function Zn(t,e,n){var r=n.zoomElement,o=e.getProxyElement();return r?Fn(r):o}var Yn=function(t,e){return void 0===e&&(e=[]),"function"==typeof t?t.apply(void 0,e):!!t},Xn=function(t,e,n){return We(t.target,(function(t){var n;if(t){var r=null===(n=t.getAttribute)||void 0===n?void 0:n.call(t,"data-zoom-ignore");if(!r)return;return!!(r=+r&e)}}),(function(t){return t===n}))},Gn=function(t,e,n){if(t){var r=[].concat(t);return!!We(e.target,(function(t){return r.some((function(e){return n=t,"function"==typeof(r=e)?!!r(n):"string"==typeof r?n.matches(r):!!r&&r===n;var n,r}))}),(function(t){return t===n}))}return!1},Jn=function(){function t(t){this.zoomState={tx:0,ty:0,scale:1},this.options=Wn(Wn({},Kn),{passive:!1}),Object.assign(this.options,t),this.eventManager=new Tt(this.options),this.initEvents()}return t.prototype.syncZoomState=function(t){if(0===arguments.length)return Wn({},this.zoomState);Object.assign(this.zoomState,t)},t.prototype.syncOptions=function(t){if(0===arguments.length)return Wn({},this.options);Object.assign(this.options,t)},t.prototype.mount=function(t){this.eventManager.mount(Fn(t))},t.prototype.initEvents=function(){var t=this.eventManager,e=function(){return t.getProxyElement()},n=this.options,r=this.zoomState,o={startPos:null,moved:!1,zoomElement:null,reset:function(){o.startPos=null,o.moved=!1,o.zoomElement=null}},i=function(e){return!!Xn(e,1,t.getProxyElement())||(!!Gn(n.dragExcludes,e,t.getProxyElement())||(!qn.dragEnabled||!Yn(n.dragEnabled,[e])||void 0))},a=function(e){return!!Xn(e,2,t.getProxyElement())||(!!Gn(n.scaleExcludes,e,t.getProxyElement())||(!qn.scaleEnabled||!Yn(n.scaleEnabled,[e])||void 0))};if(Ge()){t.register("touchstart:dragStart",(function(e){if(!(e.touches.length>1||i(e)))return t.getProxyElement()}),(function(t){return Ke(t)})),t.register("touchmove:dragMove",(function(e){if(!(e.touches.length>1))return t.getProxyElement()}),(function(t){return Ke(t)})),t.register("touchend:dragEnd",(function(){return t.getProxyElement()}),(function(t){return Ke(t)}));var c={start:{p1:{x:0,y:0},p2:{x:0,y:0},d:0},last:{p1:{x:0,y:0},p2:{x:0,y:0},d:0},scaleRunning:!1};t.register("touchmove:scale",(function(e){var n=e;if(2===n.touches.length&&!a(e)){if(c.scaleRunning)return t.getProxyElement();c.scaleRunning=!0;var r=Ne(n.touches[0]),o=Ne(n.touches[1]);c.start={p1:r,p2:o,d:ee(r,o)}}}),(function(t){var e=t,n=Object.create(t),r=e.touches[0],o=e.touches[1],i=Ne(r),a=Ne(o),u=ee(i,a),l=ee(c.last.p1,c.last.p2),s=c.start,f={x:(s.p1.x+s.p2.x)/2,y:(s.p1.y+s.p2.y)/2},p=u-l;return n.clientX=n.x=f.x,n.clientY=n.y=f.y,n.preventDefault=function(){t.preventDefault()},Math.abs(p)>1?(n.deltaY=p>0?-2:2,c.last={p1:i,p2:a,d:u}):n.deltaY=0,n.deltaMode=1,n})),t.register("touchend:scaleEnd",(function(){c.scaleRunning=!1}))}else t.register("mousedown:dragStart",(function(e){if(2!==e.button&&!i(e))return t.getProxyElement()})),t.register("mousemove:dragMove mouseup:dragEnd mouseleave:dragEnd",(function(){return t.getProxyElement()})),t.register("wheel:scale",(function(e){if(!a(e))return t.getProxyElement()}));t.on("dragStart",(function(r){if(Object(_t.safeApply)(n.onZoomDragStart,[r]),r.cancel)Object(_t.safeApply)(n.onZoomDragEnd,[r]);else{var i=Zn(e(),t,n);o.startPos=Ne(r,i),o.zoomElement=i}})),t.on("dragMove",(function(t){if(o.startPos)if(qn.dragEnabled){o.moved=!0;var e=o.zoomElement,i=o.startPos,a=Ne(t),c=Pe(e).position(),u=a.x-i.x,l=a.y-i.y,s=r.tx||0,f=r.ty||0;s+=u-c.x,f+=l-c.y;var p=Wn({},r);p.tx=s,p.ty=f,Object(_t.safeApply)(n.onZoomDragMove,[t,Wn(Wn({},p),{scale:p.scale||1})]),Object(_t.safeApply)(n.onZoomChange,[t,Wn(Wn({},p),{scale:p.scale||1})]),t.cancel?(o.reset(),Object(_t.safeApply)(n.onZoomDragEnd,[t])):Object.assign(r,p)}else o.reset()})),t.on("dragEnd",(function(t){o.reset(),Object(_t.safeApply)(n.onZoomDragEnd,[t])})),t.on("scale",(function(o){var i=function(t){var e=-t.deltaY;return 1===t.deltaMode?.05*e:e*(t.deltaMode?1:.01)}(o);if(i){Object(_t.safeApply)(n.onZoomScaleStart,[o,Wn({},r)]);var a=Pe(Zn(e(),t,n)),c=Pe(function(){var r=n.canvasElement,o=t.getProxyElement();return r?"function"==typeof r?r():"string"==typeof r?e().querySelector(r):r&&"object"==typeof r&&r instanceof Element?r:o:o}()),u=Math.pow(2,i),l=function(t,e){var n=t.canvasElement,r=t.zoomElement,o=t.zoomObj,i=t.zoomPoint,a=t.scale;e=Object.assign({},Kn,e);var c=Ne(i,r),u=n.position(),l=r.relativePosition(n);o.scale*a>e.maxZoom?a=e.maxZoom/o.scale:o.scale*a<e.minZoom&&(a=e.minZoom/o.scale);var s=e.contextZoom||xe(r.node().parentNode);s="function"==typeof s?s():s;var f=Object(_t.scaleObject)(s),p=f.x,h=f.y,v=l.x-o.tx*p,d=l.y-o.ty*h,m=a,y=i.x-c.x*m-v*m-u.x,g=i.y-c.y*m-d*m-u.y;return o.tx=y/p,o.ty=g/h,o.scale*=a,o}({canvasElement:c,zoomElement:a,zoomObj:{tx:r.tx||0,ty:r.ty||0,scale:r.scale||1},scale:u,zoomPoint:Ne(o)},n);o.cancel||Object.assign(r,l),o.cancel||(Object(_t.safeApply)(n.onZoomScale,[o,Wn({},r)]),Object(_t.safeApply)(n.onZoomChange,[o,Wn({},r)])),o.cancel||t.getProxyElement()===document.body&&n.passive||o.preventDefault()}}))},t.prototype.destroy=function(){this.eventManager.unmount()},t}(),Qn={create:function(t){return new Jn(t)},dragEnable:function(t){return 0===arguments.length?qn.dragEnabled:qn.dragEnabled=!!t},scaleEnable:function(t){return 0===arguments.length?qn.scaleEnabled:qn.scaleEnabled=!!t}},$n={ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",shift:"shiftKey"};var tr={assKeys:Object.values($n),matchKey:function(t,e){return!!e.key&&(e.assKeys.every((function(e){return t[e]}))&&String(e.key).toLowerCase()===String(t.key).toLowerCase())},parseKeyString:function(t){var e=[];return t?((t=String(t).trim()).split(/\s*\|\s*/).forEach((function(t){var n={assKeys:[],key:void 0};t.split(/\s*\+\s*/).forEach((function(t){var e=$n[t.toLowerCase()];e?-1===n.assKeys.indexOf(e)&&n.assKeys.push(e):n.key=t})),e.push(n)})),e):e}};function er(){return k.createElement(q)}function nr(t){var e=k.createElement(N);return t&&(e.textContent=t),e}var rr=new(function(){function t(){f()(this,t)}return h()(t,[{key:"emptyNode",value:function(t){for(;t.firstChild;)this.removeNode(t.firstChild)}},{key:"removeNode",value:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"appendNode",value:function(t,e){e&&t.appendChild(e)}},{key:"unshiftNode",value:function(t,e){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}},{key:"replaceNode",value:function(t,e){var n=null==e?void 0:e.parentNode;n&&n.replaceChild(t,e)}},{key:"insertNodeBefore",value:function(t,e){var n=null==e?void 0:e.parentNode;n&&n.insertBefore(t,e)}},{key:"insertNodeAfter",value:function(t,e){var n=null==e?void 0:e.parentNode;if(e&&n){var r=e.nextSibling;r?n.insertBefore(t,r):n.appendChild(t)}}}]),t}());function or(t){return t&&t.nextElementSibling}function ir(t){rr.removeNode(t)}function ar(t){rr.emptyNode(t)}function cr(t,e){rr.insertNodeAfter(t,e)}function ur(t){return!("string"==typeof t?t:t.textContent||"")}function lr(t,e,n){for(var r=t.firstChild,o=e||document.createDocumentFragment();r;){var i=r.nextSibling;if(n&&n(r))r=i;else{if(3===r.nodeType){var a=r.textContent;if(a){var c=nr();c.textContent=a,o.appendChild(c)}}else 1===r.nodeType&&o.appendChild(r);r=i}}return o}function sr(t){xr(t.startElement.parentElement,{range:t,match:Br})}function fr(t,e){var n=e||{},r=n.style,o=n.attrs;if(r){var i=hr(r);t.setAttribute("style",i)}o&&Object.keys(o).forEach((function(e){var n=o[e];t.setAttribute(e,n)}))}var pr={toString:function(){var t=this,e=[];return Object.keys(t).sort().forEach((function(n){var r=t[n];r&&e.push("".concat(n,":").concat(r))})),e.join(";")}};function hr(t){var e=Object.create(pr);return t&&Object.assign(e,t),e}function vr(t){return t?Object.keys(t).reduce((function(e,n){var r=t[n];return e[n=n.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))]=r,e}),{}):t}function dr(t,e,n){return t.getAttributeNames().forEach((function(r){if(!n||n.includes(r)){var o=t.getAttribute(r)||"";e.setAttribute(r,o)}}))}function mr(t,e){var n=Object.create(pr);return t?("string"!=typeof t&&t.getAttribute&&(t=t.getAttribute("style")),t?t.split(/\s*;\s*/).reduce((function(t,n){var r=n.split(/\s*:\s*/),o=r[0];return/\/\*/.test(o)||e&&!e.hasOwnProperty(o)||(t[o]=r[1]),t}),n):n):n}var yr={style:function(t,e){return e=e||"",!(!(t=t||"")&&e||!e&&t)&&function(t,e){if(t&&!e||!t&&e)return!1;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every((function(n){return t[n]===e[n]}))}(t=mr(t),e=mr(e))}};function gr(t,e){var n=t.getAttributeNames(),r=e.getAttributeNames();return t.tagName===e.tagName&&(["style","class"].forEach((function(t){-1===n.indexOf(t)&&n.push(t),-1===r.indexOf(t)&&r.push(t)})),n.sort(),r.sort(),n.length===r.length&&n.every((function(n,o){if(n!==r[o])return!1;var i=t.getAttribute(n),a=e.getAttribute(n);return yr.hasOwnProperty(n)?yr[n](i,a):i===a})))}function br(t,e){if(t){var n=Array.prototype.slice.call(t.children),r=e.match,o=e.range,i=void 0===o?{}:o,a=function(t){return r(t)&&!k.isElementInstanceOf(t,X)};n.forEach((function(t){if(a(t)){var e=t.previousElementSibling,n=t.nextElementSibling,r=a(e),o=a(n);ur(t)&&(r||o)&&(ir(t),i.startElement===t&&(i.startElement=r?e:n,i.startOffset=r?e.textContent.length:0),i.endElement===t&&(i.endElement=r?e:n,i.endOffset=r?e.textContent.length:0))}}))}}function xr(t,e){if(t)for(var n=e.match,r=e.range,o=void 0===r?{}:r,i=Array.prototype.slice.call(t.children),a=null,c=i.length,u=0;u<c;u++){var l=i[u];if(n(l))if(a)if(gr(a,l)||ur(l)&&(Br(l.previousElementSibling)||Br(l.nextElementSibling))){var s=a.textContent||"",f=l.textContent;a.textContent=s+f,ir(l),o.startElement===l&&(o.startElement=a,o.startOffset+=s.length),o.endElement===l&&(o.endElement=a,o.endOffset=s.length+f.length)}else a=l;else a=l;else a=null}}function Er(t,e){for(var n=e.previousElementSibling;n;){if(Br(n))return!1;n=n.previousElementSibling}return!0}function wr(t){if(k.isElementInstanceOf(t,V)&&0===t.childElementCount){var e=nr();return t.appendChild(e),t}}function Cr(t){if(t){if(!k.isElementInstanceOf(t,w))return t}else t=k.createContainer();if(0===t.childElementCount){var e=k.createElement(q);wr(e),t.appendChild(e)}return t}function Or(t,e){if(!t||3===t.nodeType)return null;if(e(t))return t;if(Ur(t))return null;for(var n=t.lastElementChild,r=Or(n,e);n&&!r;)r=Or(n=n.previousElementSibling,e);return r}function kr(t,e){if(!t||3===t.nodeType)return null;if(e(t))return t;if(Ur(t))return null;for(var n=t.firstElementChild,r=kr(n,e);n&&!r;)r=kr(n=n.nextElementSibling,e);return r}function _r(t){return kr(t,(function(t){return Br(t)}))}function Rr(t,e,n,r){for(var o,i="function"==typeof(o=n)?o:function(t){return o===t},a=t,c=-1===r?"previousElementSibling":"nextElementSibling";a&&!a[c];){if(i(a))return null;a=a.parentElement}for(a=a&&a[c];a&&!i(a);){var u=-1===r?Or(a,e):kr(a,e);if(u)return u;var l=a.parentElement;if(!(a=a[c])){for(;l&&!i(l)&&!l[c];)l=l.parentElement;a=l&&l[c]}}}function Sr(t,e,n){return Rr(t,e,n,1)}function Ar(t,e,n){return Rr(t,e,n,-1)}function Mr(t){return Or(t,(function(t){return Br(t)}))}function Tr(t,e){return jr(t,e,(function(t){return k.isElementInstanceOf(t,V)}))}function Pr(t,e){return jr(t,e,(function(t){return k.isElementInstanceOf(t,q)}))}function jr(t,e,n){for(;t&&t!==e&&!n(t);)t=t.parentNode;if(n(t))return t}function zr(t){var e=function(t){t&&0===t.childElementCount&&ir(t)},n=t.start,r=t.end,o=t.containStart,i=t.containEnd,a=t.container;if(n)if(r){var c="function"==typeof r?r:function(t){return t===r},u=a?function(t){return t===a}:function(){return!1},l=n,s=l.parentNode,f=l.previousSibling;if(o){var p=n.contains(r);if(ir(n),p)return}if(!f){for(;l&&!l.previousSibling&&!u(l);){var h=l===n?s:l.parentNode;l!==n&&e(l),l=h}f=l&&l.previousSibling,e(l)}if(!c(n))for(var v=function t(n){if(c(n))return i&&ir(n),!0;if(1===n.nodeType&&!Ur(n)){for(var r,o=n.lastChild;o;){var a=o.previousSibling;if(!0===(r=t(o)))break;o=a}return e(n),r}ir(n)};f&&!u(f);){if(c(f)){i&&ir(f);break}var d=f.parentNode,m=f.previousSibling;if(!0===v(f))break;if(!(f=m)){for(;d&&!d.previousSibling&&!u(d);){var y=d.parentNode;e(y),d=d.parentNode}f=d&&d.previousSibling,e(d)}}}else o&&ir(n)}function Nr(t){return k.isElementInstanceOf(t,N)&&!t.hasAttribute("disabled")}function Br(t){return Nr(t)&&!k.isHelpElement(t)}function Ir(t){return k.isElementInstanceOf(t,A)||Br(t)}var Lr=function(t,e){return jr(t,e,(function(t){return k.isElementInstanceOf(t,w)}))};var Dr=function(t,e){if(!t||t.collapsed)return!0;var n=t.startElement,r=t.endElement;return function(t,e,n){return Lr(t,n)===Lr(e,n)}(n,r,e)&&!function(t,e,n){return jr(t,n,(function(t){return k.isElementInstanceOf(t,ut)}))!==jr(e,n,(function(t){return k.isElementInstanceOf(t,ut)}))}(n,r,e)};function Hr(t){for(var e=t.firstElementChild;e;){var n=e.nextElementSibling;if(k.isHelpElement(e))e=n;else{if(!Ir(e))return!1;if(!Br(e))return!1;if(e.textContent)return!1;e=n}}return!0}function Vr(t){return!!function(t){return k.isElementInstanceOf(t,ut)}(t)&&!t.hasAttribute(ut.InnerHTMLAttr)}function Ur(t){return(!t||1===t.nodeType)&&(Vr(t)||k.isHelpElement(t))}function Fr(t,e){var n=t.target,o="true"===n.contentEditable,i=!!r.findUpUtil(t.target.parentElement,(function(t){return"true"===t.contentEditable&&(o=!0),Vr(t)}),(function(t){return t===e}));return i=i&&(o||["input","textarea"].indexOf(String(n.tagName).toLowerCase())>=0)}function Wr(t){for(var e=t.firstChild,n=null;e;){if(3===e.nodeType&&(n=e).textContent)return n;e=e.nextSibling}return n}function qr(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.parentElement;if(r){var o=[].slice.call(r.childNodes),i=o.indexOf(e);i>=0&&(n?t.setEnd(r,i):t.setStart(r,i))}}function Kr(t){var e=document.createRange(),n=t.startElement,r=t.startContainer,o=t.endContainer,i=t.startOffset,a=t.endOffset,c=t.endElement;return Nr(n)&&(r=n.textContent?Wr(n):null),r?(3===r.nodeType&&(i=Math.min(r.textContent.length,i)),e.setStart(r,i)):n&&qr(e,n),Nr(c)&&(o=c.textContent?Wr(c):null),o?(3===o.nodeType&&(a=Math.min(o.textContent.length,a)),e.setEnd(o,a)):c&&qr(e,c,!0),e}var Zr=function(){function t(e,n){f()(this,t),this.startOffset=-1,this.endOffset=-1,this.isTextEmpty=!1,this.editor=e,n&&this.init(n)}return h()(t,[{key:"init",value:function(t){var e,n,r=t.startContainer,o=t.startOffset,i=t.endContainer,a=t.endOffset;if(r)if(3===r.nodeType)e=r.parentElement;else if(1===r.nodeType){var c=r.childNodes[o];if(Br(c)){if(c.firstChild)r=c.firstChild;else{var u=document.createTextNode("");c.appendChild(u),r=u}e=c,o=0}else e=r}if(i)if(3===i.nodeType)n=i.parentElement;else if(1===i.nodeType){var l=i.childNodes[a];if(Br(l)){if(l.firstChild)i=l.firstChild;else{var s=document.createTextNode("");l.appendChild(s),i=s}a=(n=l).textContent.length}else n=i}this.startContainer=r,this.startOffset=o,this.endContainer=i,this.endOffset=a,this.startElement=e,this.endElement=n}},{key:"new",value:function(e){return new t(this.editor,e)}},{key:"collapsed",get:function(){return!this.startElement&&!this.startContainer||!this.endElement&&!this.endContainer||this.startContainer===this.endContainer&&this.startOffset===this.endOffset}},{key:"extractContents",value:function(){return Kr(this).extractContents()}},{key:"cloneContents",value:function(){return Kr(this).cloneContents()}},{key:"equals",value:function(t){var e=this;return!!t&&["startContainer","startOffset","endContainer","endOffset","startElement","endElement"].every((function(n){return e[n]===t[n]}))}},{key:"getNativeRange",value:function(){return Kr(this)}},{key:"select",value:function(){if(this.collapsed)return this.editor.cursor.update(this.getNativeRange()),void this.editor.events.emit("internalSelectionchange");this.editor.cursor.update(null),function(t){t instanceof Zr&&(t=Kr(t));var e=document.getSelection();e.removeAllRanges(),e.addRange(t)}(this.getNativeRange())}}],[{key:"removeAllRanges",value:function(t){var e;t.cursor.isActive()?t.cursor.update(null):null===(e=document.getSelection())||void 0===e||e.removeAllRanges()}},{key:"current",value:function(e){var n=document.getSelection();if(e.cursor.isActive()){var r=e.cursor.getRange();return new t(e,{startContainer:null==r?void 0:r.startContainer,startOffset:null==r?void 0:r.startOffset})}if(n.rangeCount>0){var o=n.getRangeAt(0);if(!o.collapsed)return new t(e,o=function(t){var e=t.startContainer,n=t.endContainer,r=t.startOffset,o=t.endOffset;if(-1===t.compareBoundaryPoints(Range.START_TO_END,t)){var i=e;e=n,n=i,i=r,r=o,o=i,(t=document.createRange()).setStart(e,r),t.setEnd(n,o)}return t}(o))}return null}}]),t}();function Yr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yr(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Gr=function(){function t(e,n){f()(this,t),this.index=0,this.actions=e,this.callback=n}return h()(t,[{key:"isFinished",value:function(){var t=this.actions||[];return this.index>=t.length}},{key:"execute",value:function(t){var e=this,n=this.actions||[];if(this.isFinished())this.callback&&this.callback(null,t);else{var r={next:function(t){e.index++,e.execute(t)}};n[this.index].execute(r,t)}}}],[{key:"newAction",value:function(t,e){var n={execute:t};return"number"==typeof e&&(n.priority=e),n}}]),t}();function Jr(t){t.sort((function(t,e){return(t.priority||0)-(e.priority||0)}))}var Qr=function(){function t(){f()(this,t),this._data=Object.create(null),this._globalActions=[]}return h()(t,[{key:"add",value:function(t,e){var n=this._data[t]||(this._data[t]=[]);return-1===n.indexOf(e)&&(n.push(e),Jr(n)),this}},{key:"addGlobal",value:function(t){if(-1===this._globalActions.indexOf(t))return this._globalActions.push(t),Jr(this._globalActions),this}},{key:"removeGlobal",value:function(t){var e=this._globalActions.indexOf(t);if(-1!==e)return this._globalActions.splice(e,1),this}},{key:"remove",value:function(t,e){var n=this._data[t];if(!n)return this;var r=n.indexOf(e);return-1!==r&&n.splice(r,1),this}},{key:"execute",value:function(t,e,n){var r=this,o=n?function(t){try{n(t)}catch(t){console.error(t)}}:null,i=function(e){var n=r._data[t],i=new Gr(n,o);try{i.execute(e)}catch(t){o&&o(new Error(String(t))),console.error(t)}};new Gr(this._globalActions,(function(t,e){t?n&&n(t):i(e)})).execute(Xr(Xr({},e),{},{type:t}))}}]),t}(),$r=n(11),to=n.n($r),eo=n(9),no=n.n(eo);function ro(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var oo=k.getElementType(V),io=function(t){m()(n,t);var e=ro(n);function n(t){var r;return f()(this,n),(r=e.call(this,t)).elementType=oo,r}return h()(n,[{key:"isElementMatched",value:function(t,e){return e?R()(x()(n.prototype),"isElementMatched",this).call(this,t,e):n.isElementType(t)}}],[{key:"isElementType",value:function(t){return k.isElementInstanceOf(t,V)}},{key:"createElement",value:function(){return oo.create()}}]),n}(Et);function ao(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var co=new F,uo=function(t){m()(n,t);var e=ao(n);function n(t){var r;return f()(this,n),(r=e.call(this,t)).elementType=co,r}return h()(n,[{key:"isElementMatched",value:function(t,e){return e?R()(x()(n.prototype),"isElementMatched",this).call(this,t,e):n.isElementType(t)}},{key:"extractContentNodes",value:function(t,e){return lr(t,e)}},{key:"isElementType",value:function(t){return k.isElementInstanceOf(t,F)}}],[{key:"createElement",value:function(){return co.create()}},{key:"isElementType",value:function(t){return k.isElementInstanceOf(t,F)}}]),n}(io);function lo(t){return Promise.resolve().then(t)}var so=function(t){var e=t-1+97,n=0;return e>122&&(n=e-122,e=122),String.fromCharCode(e)+(n>0?String(n):"")},fo=[function(t){return"".concat(t,".")},function(t){return"(".concat(t,").")},function(t){return"[".concat(t,"].")}],po=[function(t){return String(t)},function(t){return so(t).toUpperCase()},so],ho=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e%(po.length*fo.length),r=n/fo.length|0,o=n%fo.length,i=po[r],a=fo[o];return a(i(t))},vo=[function(){return"●"},function(){return"○"},function(){return"■"},function(){return"□"},function(){return"◆"},function(){return"◇"},function(){return"▶"},function(){return"▷"},function(){return"★"},function(){return"☆"},function(){return"☀"},function(){return"☼"}],mo=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e%vo.length,r=n%vo.length,o=vo[r];return o()};function yo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var go=Array.prototype.slice,bo=k.getElementType(Z),xo=new X,Eo=k.getElementType(rt),wo=null,Co=new Set,Oo=function(t){for(var e=null==t?void 0:t.firstElementChild,n=[];e;)if(k.isElementInstanceOf(e,Z))if(e.hasAttribute("block"))e=e.nextElementSibling;else{var r=e.getAttribute("type")||"ul",o=+(e.getAttribute("level")||0);n.length=o+1;var i=n[+o]||(n[+o]={index:1,type:"ul"});r!==i.type&&(i.index=1),i.type=r;var a=e.children[0];if(!k.isElementInstanceOf(a,X)){var c=xo.create();Br(a)&&"option"!==r&&dr(a,c),e.insertBefore(c,a),a=c}if("option"===r?a.setAttribute("disabled",""):a.removeAttribute("disabled"),"ol"===r)a.textContent=ho(i.index,o);else if("option"===r){if(0===a.children.length){ar(a);var u=Eo.create();u.setAttribute("ky-editor-checked",""),a.appendChild(u)}}else a.textContent=mo(i.index,o);i.index++,e=e.nextElementSibling}else e=e.nextElementSibling,n.length=0},ko=function(){var t=to()(no.a.mark((function t(e){return no.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",Promise.reject());case 2:if(Co.add(e),!wo){t.next=5;break}return t.abrupt("return",wo);case 5:return t.abrupt("return",wo=lo((function(){wo=null;var t=Array.from(Co);Co.clear(),t.forEach((function(t){Oo(t)}))})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_o=function(t){m()(n,t);var e=yo(n);function n(t){var r;return f()(this,n),(r=e.call(this,t)).elementType=bo,r}return h()(n,[{key:"getState",value:function(){var t=this.getRange(),e=this.createState();if(!t.collapsed)return e;var n=t.startElement,r=this.findNearest(n).getAttribute("type");return r&&(e.data={type:r}),e}},{key:"execute",value:function(t){var e,n=this,r=t||{},o=r.type,i=void 0===o?"ul":o,a=r.indent,c=null==t?void 0:t.enabled;"boolean"!=typeof c&&(c=(null===(e=this.getState().data)||void 0===e?void 0:e.type)!==i);var u=this.getRange();if(u.collapsed){var l=u.startContainer,s=u.startOffset,f=Pr(l,this.getContainer());if(f&&ko(f).then((function(){var t;null===(t=n.getRange())||void 0===t||t.select()})),c){var p=Tr(l,this.getContainer());if(k.isElementInstanceOf(p,Z)){if(a){var h=p.getAttribute("level")||0;p.setAttribute("level",String(+h+1)),u.select()}else{p.getAttribute("type")!==i&&p.setAttribute("type",i)}return}var v=this.createElement();v.setAttribute("type",i);var d,m=k.isElementInstanceOf(p.parentNode,w);if(go.call(p.childNodes).forEach((function(t){v.appendChild(t)})),m)p.appendChild(v);else null===(d=p.parentNode)||void 0===d||d.replaceChild(v,p)}else{var y,g=Tr(l,this.getContainer());if(!k.isElementInstanceOf(g,Z))return void u.select();var b=go.call(g.children),x=1===g.parentElement.children.length?document.createDocumentFragment():io.createElement();b.forEach((function(t){k.isElementInstanceOf(t,X)||x.appendChild(t)})),null===(y=g.parentNode)||void 0===y||y.replaceChild(x,g)}(u=u.new()).startContainer=l,u.startOffset=s,u.select()}else u.select()}}]),n}(uo);_o.validateElement=ko,_o.validateRange=function(t){if(t){var e=t.startElement,n=t.endElement,r=e.parentElement,o=null==n?void 0:n.parentElement;k.isElementInstanceOf(r,[Z,V])&&_o.validateElement(r.parentElement),k.isElementInstanceOf(o,[Z,V])&&_o.validateElement(null==o?void 0:o.parentElement)}};var Ro={type:"backspace",actions:[{execute:function(t,e){var n=e.event,r=e.editor;n.preventDefault(),r.execCommand("backspace"),t.next(e)}},{execute:function(t,e){var n=e.event,r=e.editor.getNormalizedRange();if(_o.validateRange(r),!r.collapsed){var o,i,a=r,c=a.startElement,u=a.endElement,l=k.isElementInstanceOf(c,Z),s=k.isElementInstanceOf(u,Z);l&&(o=c.parentElement),s&&(i=u.parentElement);var f=t.next(e),p=null;if(o){var h=o.parentElement;0===o.childElementCount&&(ir(o),p=wr(h))}if(i){var v=i.parentElement;if(0===i.childElementCount){ir(i);var d=wr(v);p||(p=d)}}return p&&((r=r.new()).startElement=p,r.startOffset=0,r.select()),f}var m=r.startElement,y=r.startOffset,g=r.startContainer,b=m.parentElement;if(Er(0,m)&&(0===y||ur(g))&&k.isElementInstanceOf(b,Z)){var x=Number(b.getAttribute("level"))||0;if(!b.getAttribute("block"))return n.preventDefault(),b.setAttribute("block","1"),void r.select();if(x)return b.setAttribute("level",String(x-1)),b.removeAttribute("block"),n.preventDefault(),void r.select()}t.next(e)},priority:-1e3},{execute:function(t,e){var n=e.event,r=e.editor,o=r.getNormalizedRange();if((!o||o.collapsed)&&!r.cursor.isActive()&&r.selectState.executeDelete())return void n.preventDefault();t.next(e)},priority:-9999}]},So={type:"enter",actions:[{execute:function(t,e){var n=e.editor;e.event.preventDefault(),n.execCommand("enter")}},{execute:function(t,e){t.next(e)},priority:-1e3},{execute:function(t,e){var n=e.event,r=e.editor,o=r.getNormalizedRange();if(o.collapsed&&Br(o.startElement)){var i=Pr(o.startElement,r.getContainer()),a=i.parentNode;if(k.isElementInstanceOf(a,at))if(i===a.lastElementChild&&Hr(i))return n.preventDefault(),1===a.childElementCount?(ir(i),a.parentNode.replaceChild(i,a)):cr(i,i.parentNode),void o.select()}t.next(e)},priority:-500},{execute:function(t,e){var n=e.event,r=e.editor.getNormalizedRange();if(_o.validateRange(r),!r.collapsed)return t.next(e);var o=r.startElement.parentElement;if(!(k.isElementInstanceOf(o,Z)&&o.hasAttribute("block")&&Hr(o)))return t.next(e);n.preventDefault();var i=o.parentElement;if(o.nextElementSibling){var a=k.createElement(V);lr(o,a,(function(t){return k.isElementInstanceOf(t,X)})),i.replaceChild(a,o)}else{var c=k.createElement(q);lr(o,c,(function(t){return k.isElementInstanceOf(t,X)})),ir(o),cr(c,i)}r.select()},priority:-600}]},Ao={type:"tab",actions:[{execute:function(t,e){var n=e.editor;e.event.preventDefault(),n.execCommand("tab")}},{execute:function(t,e){var n=e.editor,r=e.event,o=n.getNormalizedRange();if(o.collapsed){var i=o.startElement,a=o.startOffset;if(k.isElementInstanceOf(i.parentNode,Z)&&k.isElementInstanceOf(i,N)&&Er(i.parentElement,i)&&(0===a||ur(i)))return n.execCommand("list",{indent:!0,enabled:!0}),void r.preventDefault()}t.next(e)},priority:-9999}]},Mo={type:"textInput",actions:[{execute:function(t,e){var n=e.event,r=e.editor,o=e.text;n.preventDefault(),r.execCommand("textInput",o)}}]},To={type:"delete",actions:[{execute:function(t,e){var n=e.event,r=e.editor;n.preventDefault(),r.execCommand("delete"),t.next(e)}},{execute:function(t,e){var n=e.event,r=e.editor,o=r.getNormalizedRange();if((!o||o.collapsed)&&!r.cursor.isActive()&&r.selectState.executeDelete())return void n.preventDefault();t.next(e)},priority:-9999}]};function Po(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var jo={text:"text/ky-text",element:"text/ky-element"},zo=function(t){m()(n,t);var e=Po(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.commandType=xt,t))}return h()(n,[{key:"executeWhileSelectTarget",value:function(t){var e=this.commandManager,n=this.commandManager.editor.selectState,r=n.getTarget();if(r){var o=(t||{}).type;return"cut"===(void 0===o?"copy":o)&&n.executeDelete(),{type:jo.element,text:"",html:e.editor.parser.stringify(r)}}}},{key:"execute",value:function(t){var e=this.getRange();if(null!=e&&e.collapsed){var n=this.executeWhileSelectTarget(t);if(n)return n}if(e){for(var r=(t||{}).type,o=void 0===r?"copy":r,i=this.commandManager.editor.parser,a="cut"===o?e.extractContents():e.cloneContents(),c=a.firstChild,u=[],l=a.textContent;c;){if(3===c.nodeType){var s=nr();s.textContent=c.textContent||"",u.push(i.stringify(s))}else u.push(i.stringify(c));c=c.nextSibling}return{type:jo.text,text:l,html:u.join("")}}}}]),n}(Et);zo.InternalClipboardTypes=jo;var No=zo.InternalClipboardTypes,Bo=function(t,e){var n,r,o,i={html:e.html},a=JSON.stringify(i);null===(n=t.clipboardData)||void 0===n||n.setData("text/plain",e.text),null===(r=t.clipboardData)||void 0===r||r.setData("text/html",e.text),null===(o=t.clipboardData)||void 0===o||o.setData(e.type,a)},Io=function(t,e){var n=t.target;return!!e.contains(n===document.body?document.activeElement:n)&&!Fr(t,e)},Lo={type:"cut",actions:[{execute:function(t,e){var n=e.event,r=e.editor;if(Io(n,r.getWrapper())){n.preventDefault();var o=r.getNormalizedRange();if(Dr(o,r.getContainer())){r.saveLog();var i=r.execCommand("clipboard",{type:"cut"});if(i&&(Bo(n,i),lo((function(){r.checkUnmountCustomElements()}))),o){var a=r.newRange();a.startContainer=o.startContainer,a.startOffset=o.startOffset,a.select()}t.next(e)}}}}]},Do={type:"copy",actions:[{execute:function(t,e){var n=e.event,r=e.editor;if(Io(n,r.getWrapper())){n.preventDefault();var o=r.getNormalizedRange();if(Dr(o,r.getContainer())){var i=r.execCommand("clipboard",{type:"copy"});i&&(Bo(n,i),t.next(e))}}}}]},Ho={color:1,"text-decoration":1,"font-weight":1},Vo={address:1,article:1,aside:1,blockquote:1,details:1,p:1,dialog:1,div:1,fieldset:1,figcaption:1,figure:1,footer:1,header:1,nav:1,pre:1,section:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1};var Uo=function(){function t(){f()(this,t),this._elementParsers={}}return h()(t,[{key:"registerParser",value:function(t,e){e.connect(this),this._elementParsers[t]=e}},{key:"visit",value:function(t){var e,n=this,r=document.createDocumentFragment();function o(){e=er(),r.appendChild(e)}var i=function t(i){if(1===i.nodeType||3===i.nodeType)if(k.isValidElement(i))k.isElementInstanceOf(i,q)?r.appendChild(i):(e||o(),e.appendChild(i));else if(1===i.nodeType){var a=i;if(!function(t){var e=String(t.tagName).toLowerCase(),n=mr(t.getAttribute("style"));return!(!n||"block"!==n.display&&"flex"!==n.display)||(!(!Vo[e]||n.display)||void 0)}(a)){var c=n.extractParagraphElements(a);return e||o(),void e.appendChild(c)}e&&wr(e),o();var u=mr(a.getAttribute("style")).toString();u&&e.setAttribute("style",u);for(var l=a.firstChild;l;){var s=l.nextSibling;t(l),l=s}}else{e||o();var f=i.textContent;if(f){var p=nr(f);e.appendChild(p)}}};if(1===t.nodeType&&"body"===t.tagName.toLowerCase())for(var a=t.firstChild;a;){var c=a.nextSibling;i(a),a=c}else i(t);return r}},{key:"extractParagraphElements",value:function(t){var e=document.createDocumentFragment(),n=this._elementParsers;return function t(r){if(1!==r.nodeType&&r.textContent){var o=function(t){var e=t.getAttribute("style");if(e)return e=mr(e,Ho)}(r.parentNode),i=nr(r.textContent),a=null==o?void 0:o.toString();return a&&i.setAttribute("style",a),void e.appendChild(i)}var c=r,u=String(c.tagName).toLowerCase(),l=n[u];if(l){var s=l.parse(c);if(s){var f=Br(s);!f&&Br(e.lastElementChild)&&e.appendChild(k.createElement(N)),e.appendChild(s),f||e.appendChild(k.createElement(N))}}else for(var p=c.firstChild;p;)t(p),p=p.nextSibling}(t),e}}]),t}(),Fo=function(){function t(){f()(this,t)}return h()(t,[{key:"parse",value:function(t){}},{key:"connect",value:function(t){this.parserVisitor=t}}]),t}(),Wo=Je("ky-editor"),qo=Wo.prefixName,Ko=Wo.prefixClassName;function Zo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Yo=function(t){m()(n,t);var e=Zo(n);function n(){return f()(this,n),e.apply(this,arguments)}return h()(n,[{key:"parse",value:function(t){var e=document.createDocumentFragment();e.appendChild(function(t){var e=t.src,n=t.title,r=k.createElement(ut);r.setAttribute("type","ky-image"),r.setAttribute("src",e),r.setAttribute("title",n),r.className=Ko("image");var o=k.createElement(j);return o.appendChild(r),o.style.width="100px",o.style.height="100px",o}(t));var n=nr();return e.appendChild(n),e}}]),n}(Fo);function Xo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Go=function(t){m()(n,t);var e=Xo(n);function n(){return f()(this,n),e.apply(this,arguments)}return h()(n,[{key:"parse",value:function(t){for(var e=function(t){var e=k.createElement(D);return["href","_blank","title"].forEach((function(n){var r=t.getAttribute(n);r&&e.setAttribute(n,r)})),e}(t),n=t.firstChild;n;){var r=n.nextSibling;e.appendChild(this.parserVisitor.extractParagraphElements(n)),n=r}return e}}]),n}(Fo);n(22);function Jo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Qo=Array.prototype.slice;function $o(){var t=document.createElement("td"),e=Cr(),n=_r(e);return t.appendChild(e),{element:t,textElement:n}}function ti(t){for(var e=null,n=document.createElement("tr"),r=0;r<t;r++){var o=$o(),i=o.element,a=o.textElement;i.setAttribute("index",String(r)),e||(e=a),n.appendChild(i)}return{tr:n,firstTextElement:e}}var ei=function(t){m()(n,t);var e=Jo(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-table-resize-marker",r.outputDisabled=!0,t))}return h()(n,[{key:"create",value:function(){var t=R()(x()(n.prototype),"create",this).call(this),e=document.createElement("i");return t.appendChild(e),t}}]),n}(v);ei.tagName="ky-table-resize-marker";var ni=function(t){m()(n,t);var e=Jo(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-table",t))}return h()(n,[{key:"create",value:function(t){var e=t||{},r=e.cols,o=void 0===r?5:r,i=e.rows,a=void 0===i?5:i,c=R()(x()(n.prototype),"create",this).call(this),u=document.createElement("table"),l=100/o,s=document.createElement("colgroup");u.appendChild(s);for(var f=0,p=0;p<o;p++){var h=p===o-1?100-f:l;f+=l;var v=document.createElement("col");v.style.width="".concat(h,"%"),s.appendChild(v)}for(var d=document.createElement("tbody"),m=0;m<a;m++){var y=ti(o).tr;y.setAttribute("index",String(m)),d.appendChild(y)}return u.appendChild(d),c.appendChild(u),c}}]),n}(v);function ri(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}ni.tagName="ky-table",ni.getElementModel=function(t){var e=t.firstElementChild,n=e.firstElementChild,r=n.nextElementSibling;return{table:e,colgroup:n,tbody:r,getCols:function(){return Qo.call(n.children)},getRows:function(){return Qo.call(r.children)}}},ni.getColWidth=function(t,e){var n=String(t.style.width||"");return n.endsWith("%")?parseFloat(n.substring(0,n.length-1))/100*e:parseFloat(n)};var oi=function(t){m()(n,t);var e=ri(n);function n(){return f()(this,n),e.apply(this,arguments)}return h()(n,[{key:"parse",value:function(t){var e,n=t.querySelector("colgroup"),r=n?n.children:null,o=t.querySelector("tbody");e=o?o.children:t.querySelectorAll("tr");var i=document.createElement("colgroup"),a=0;if(r)for(var c=0;c<r.length;c++){var u=r[c],l=document.createElement("col");i.appendChild(l);var s=u.getAttribute("width"),f=hr();if(s)f.width="".concat(parseInt(s),"px");else{var p=mr(l.getAttribute("style"));f.width=p.width}a+=parseInt(f.width),l.setAttribute("style",f)}else for(var h=e[0].querySelectorAll("td"),v=0;v<h.length;v++){var d=mr(h[v].getAttribute("style")),m=document.createElement("col");i.appendChild(m);var y=hr();d.width?y.width=d.width:y.width="100px",a+=parseInt(y.width),m.setAttribute("style",y)}var g=document.createElement(ni.tagName),b=document.createElement("table");b.appendChild(i);var x=document.createElement("tbody");b.appendChild(x);var E=hr();E.width="".concat(a,"px"),b.setAttribute("style",E);for(var w=0;w<e.length;w++){var C=e[w].children,O=document.createElement("tr");O.setAttribute("index",String(w)),x.appendChild(O);for(var _=0;_<C.length;_++){var R=C[_],S=R.getAttribute("rowspan"),A=R.getAttribute("colspan"),M=document.createElement("td");if(M.setAttribute("index",String(_)),S&&M.setAttribute("rowspan",S),A&&M.setAttribute("colspan",A),R.firstChild){var T=k.createContainer(),P=this.parserVisitor.visit(R);T.appendChild(P),ar(M),M.appendChild(T)}else{var j=k.createContainer(),z=er(),N=nr();z.appendChild(N),j.appendChild(z),ar(M),M.appendChild(j)}O.appendChild(M)}}g.appendChild(b);var B=k.createElement(ut,{type:"table",innerHTML:!0});return B.appendChild(g),B}}]),n}(Fo);function ii(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var ai=function(t){m()(n,t);var e=ii(n);function n(){return f()(this,n),e.apply(this,arguments)}return h()(n,[{key:"parse",value:function(t){var e=nr(t.textContent||"");return e.setAttribute("b","1"),e}}]),n}(Fo);function ci(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var ui,li=function(t){m()(n,t);var e=ci(n);function n(){return f()(this,n),e.apply(this,arguments)}return h()(n,[{key:"parse",value:function(t){return document.createElement("br")}}]),n}(Fo);function si(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var fi,pi=new(function(){function t(){f()(this,t),this.parserVisitor=new Uo,this.registerParser()}return h()(t,[{key:"registerParser",value:function(){var t=this.parserVisitor;t.registerParser("img",new Yo),t.registerParser("a",new Go),t.registerParser("table",new oi),t.registerParser("strong",new ai),t.registerParser("br",new li)}},{key:"parse",value:function(t){var e=this.parserVisitor,n=(new DOMParser).parseFromString(t,"text/html");return e.visit(n.body)}}]),t}()),hi={execute:function(t,e){var n=e;t.editor.execCommand("textInput",n)}},vi=function(t,e){var n,r,o=pi.parse(e),i=t.event,a=t.editor,c=a.getNormalizedRange(),u=o.firstElementChild;if(u){var l=oh.getElementsByElementType(o,ut);lo((function(){l.forEach((function(t){a.mountCustomElement(t)}))}));var s=Mr(u),f=t.pasteElements=[];if(u){ir(u);for(var p,h=u.firstElementChild;h;){var v=h.nextElementSibling;f.push(h),p?cr(h,p):a.commandManager.execCommand("input",{element:h,offset:c.startOffset,endOffset:c.startOffset}),p=h,h=v}}var d=c.new();d.startElement=s,d.startOffset=null===(n=s)||void 0===n?void 0:n.textContent.length,d.select(),o.firstElementChild&&a.actionManager.execute("enter",{editor:a,event:i});var m=function(t,e){for(;t&&t!==e&&!k.isElementInstanceOf(t,V);)t=t.parentNode;if(k.isElementInstanceOf(t,V))return t}(a.getNormalizedRange().startElement,a.getContainer()),y=o.lastElementChild;if(y)return m.parentNode.insertBefore(o,m),s=Mr(y),d.startElement=s,d.startOffset=null===(r=s)||void 0===r?void 0:r.textContent.length,d.select(),f}},di={execute:function(t,e){var n=JSON.parse(e);return vi(t,n.html)}},mi={execute:function(t,e){var n=t.editor,r=JSON.parse(e);fi||(fi=document.createElement("div")),fi.innerHTML=r.html;var o=Array.prototype.slice.call(fi.children),i=fi.firstElementChild;if(i){ar(fi);var a=n.getNormalizedRange();return n.commandManager.execCommand("input",{element:i,offset:a.startOffset,endOffset:a.startOffset}),n.mountCustomElement(i.firstElementChild),o}}},yi=(ui={},l()(ui,No.text,di),l()(ui,No.element,mi),l()(ui,"text/plain",hi),ui),gi=[Ro,Ao,So,Mo,To,Lo,Do,{type:"paste",actions:[{execute:function(t,e){var n=e,r=n.event,o=n.editor;if(o.selectionEnabled()){r.preventDefault();var i=r.clipboardData,a=i.types,c=Object.keys(yi).find((function(t){return a.indexOf(t)>=0}))||"text/plain";o.saveLog();var u=i.getData(c);if(u){var s=yi[c]||hi;e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?si(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):si(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e),s.execute(e,u)}o.checkUnmountCustomElements(),t.next(e)}}},{priotity:1,execute:function(t,e){var n=e.pasteElements;null==n||n.forEach((function(t){(k.isElementInstanceOf(t,Z)||oh.getElementsByElementType(t,Z))&&_o.validateElement(t.parentElement)})),t.next(e)}}]}];var bi={apply:function(t){t.onNative("focus",(function(t){})),t.onNative("blur",(function(t){}))}};var xi={apply:function(t){var e,n=function(){var n=t.editor.saveRangeContext();if(!n)return t.editor.selectionEnabled(!1),void t.emit("selectionLost");t.editor.selectionEnabled(!0),t.emit("selectionGet");var r,o,i=(o=n,!(!(r=e)&&o||r&&!o)&&(!r&&!o||["startContainer","endContainer"].every((function(t){return r[t]===o[t]}))));i||(e=n,t.emit("selectionElementsChange")),i&&function(t,e){return!(!t&&e||t&&!e)&&(!t&&!e||["startOffset","endOffset"].every((function(n){return t[n]===e[n]})))}(e,n)||t.emit("selectionchange")};t.on("internalSelectionchange",n),document.addEventListener("selectionchange",(function(){var e=document.getSelection();e&&e.rangeCount>0&&(e.getRangeAt(0).collapsed||t.editor.cursor.update(null));t.emit("internalSelectionchange")})),t.on("unmount",(function(){document.removeEventListener("selectionchange",n)}))}},Ei=(n(23),{fullWidth:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M840.5 184.5v656h-656v-656h656m40-72h-736c-17.673 0-32 14.327-32 32v736c0 17.673 14.327 32 32 32h736c17.673 0 32-14.327 32-32v-736c0-17.673-14.327-32-32-32z" fill="#000000" p-id="7741"></path><path d="M798.91 508L666.23 406.32a6.36 6.36 0 0 0-10.23 5.05V474H368v-62.63a6.36 6.36 0 0 0-10.23-5.05L225.09 508a6.37 6.37 0 0 0 0 10.1l132.68 101.58a6.36 6.36 0 0 0 10.23-5V554h288v60.63a6.36 6.36 0 0 0 10.23 5l132.68-101.58a6.37 6.37 0 0 0 0-10.05z"></path></svg>',rotate:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M326.6 256.5A309.4 309.4 0 0 1 447.7 232v78.1a4 4 0 0 0 6.2 3.3l184.3-120.6a3.9 3.9 0 0 0 0-6.6L453.9 65.6a4 4 0 0 0-6.2 3.3V160C235.8 160.1 64 332 64 544h72a312.5 312.5 0 0 1 190.6-287.5zM760 384H264a40 40 0 0 0-40 40v304a40 40 0 0 0 40 40h496a40 40 0 0 0 40-40V424a40 40 0 0 0-40-40z m-32 312H296V456h432z"></path></svg>',delete:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M416 400l32 0 0 336-32 0 0-336ZM576 400l32 0 0 336-32 0 0-336ZM688 240 688 144c0-17.6-14.4-32-32-32L368 112c-17.6 0-32 14.4-32 32l0 96L128 240l0 48 96 0 0 560c0 35.2 28.8 64 64 64l448 0c35.2 0 64-28.8 64-64L800 288l96 0 0-48L688 240zM384 176c0-9.6 6.4-16 16-16l224 0c9.6 0 16 6.4 16 16l0 64L384 240 384 176zM752 832c0 17.6-14.4 32-32 32L304 864c-17.6 0-32-14.4-32-32L272 288l480 0L752 832z"></path></svg>'}),wi=function(t){var e=Ei[t];if(!e)return null;var n=r.toNode(e);return null==n||n.setAttribute("class",Ko("icon")),n},Ci=(n(24),Object(_t.findUniqueKey)("rotate"));var Oi={apply:function(t){function e(){t.editor.saveLog()}var n=qo("select-none"),a=Bn.create(),c=null,u=!1,l={container:document.body,cursorElement:t.editor.getWrapper(),overlay:!0,syncElementResize:!0,overlayVertex:!0,autoDestroyEventManager:!0,cursorOverlay:!0,modes:[function(t){var e=t.type,n=f();if(!n)return!1;var r=n.getAttribute("resize-modes");return!r||-1!==r.indexOf(e)}],onResizeStart:function(e){e.stopPropagation(),t.editor.getContainer().setAttribute(n,"")},onBeforeResize:function(t){u||(e(),u=!0)},onResize:function(){s(!1)},onResizeEnd:function(e,r){if(r){var o=r.modes;s(!0),c=e.resizeElement,t.editor.getContainer().removeAttribute(n),u=!1;var i=c.firstElementChild;i&&((o.Top||o.Bottom)&&(i.style.height="100%"),(o.Left||o.Right)&&(i.style.width="100%")),lo((function(){p(c)}))}}};function s(e){t.editor.selectState.setVisible(e)}function f(){return t.editor.selectState.getTarget()}function p(e){if(e){var n=function(t,e){var n=document.createElement("div");n.className=qo("behavior-header");var r=e.firstElementChild,a="";k.isElementInstanceOf(r,rt)?a="checkbox":k.isElementInstanceOf(r,et)?a="hr":k.isElementInstanceOf(r,ut)&&(a=(null==r?void 0:r.getAttribute("type"))||"");var c=t.behaviorConfig,u=oh.behaviorConfig,l=c.hasUserTypeOperations(a)?c.getTypeOperations(a):u.getTypeOperations(a);if(l.includes("fullWidth")){var s=wi("fullWidth");s.addEventListener("click",(function(){e.style.width="100%"})),n.appendChild(s)}if(l.includes("fullHeight")){var f=wi("fullWidth");Object.assign(f.style,{transform:"rotate(90deg)",transformOrigin:"center center"}),f.addEventListener("click",(function(){e.style.height="auto"})),n.appendChild(f)}if(l.includes("rotate")){var p=wi("rotate");p.style.marginRight="-2px",p[Ci]=!0,n.appendChild(p)}if(l.includes("delete")){var h=wi("delete");h.addEventListener("click",(function(){}));var v=function(){var n=e.parentElement;n&&(t.saveLog(),n.removeChild(e))};i.touchable()?o.onPress(h,v):h.addEventListener("click",v),n.appendChild(h)}n.addEventListener("click",(function(t){t.stopPropagation()}));var d=c.executeOnHeaderCreated(a,n,r)||n;return u.executeOnHeaderCreated(a,d,r)}(t.editor,e);t.editor.selectState.setActive(e,n),t.emit("selectStateChange",t.editor,[e]),c=null}}t.register("click:behaviorClick",(function(e){var n=r.findUpUtil(e.target,(function(t){if(k.isElementInstanceOf(t,j))return!!t}),(function(e){return e===t.getProxyElement()}));return n||(c||(t.editor.selectState.setActive(null),void t.emit("selectStateChange",t.editor,[null])))})),t.on("change",(function(){var e=t.editor.selectState.getTarget();null!=e&&e.parentNode||(t.editor.selectState.setActive(null),t.emit("selectStateChange",t.editor,[null]))})),t.on("behaviorClick",(function(t){p(t.target)})),a.apply((function(){return f()}),l);var h={logged:!1},v={cursorOverlay:!0,onRotateStart:function(t){var e=f();c=e,h.logged=!1,Bn.enable(!1)},onRotateEnd:function(t){Bn.enable(!0)},onRotate:function(t,n){var o=n.angle;h.logged||(e(),h.logged=!0);var i=f(),a=r.getTransformMatrix(i);a=function(t,e,n){var r=n.x,o=n.y,i=new DOMMatrix;i.translateSelf(r,o);var a=new DOMMatrix;a.rotateSelf(e);var c=new DOMMatrix;return c.translateSelf(-r,-o),t.multiplySelf(i.multiplySelf(a.multiplySelf(c)))}(a,o,{x:i.offsetWidth/2,y:i.offsetHeight/2}),i.style.transform="".concat(a)},center:function(t,e){var n,r=(null===(n=e.parentElement)||void 0===n?void 0:n.parentElement.querySelector(vt.tagName)).getBoundingClientRect();return{x:r.x,y:r.y}}};Un.mount({container:t.editor.getWrapper(),getOptions:function(t,e){if(function(t){return t&&t[Ci]}(e))return v}})}};function ki(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function _i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ri={apply:function(t){var e=null,n=function(){e||(e=lo((function(){e=null,t.emit("change",null,[t.editor])})))},r=new MutationObserver((function(e){var r,o=!1,i=ki(e);try{for(i.s();!(r=i.n()).done;){if("attributes"!==r.value.type){o=!0;break}}}catch(t){i.e(t)}finally{i.f()}o&&t.emit("nodeChange",null,[t.editor]),n()}));t.on("textInput",(function(){n()})),t.on("didMount",(function(){var e=t.editor.getContainer();r.observe(e,{attributes:!0,childList:!0,subtree:!0})})),t.on("willDestroy",(function(){r.disconnect()}))}};var Si={apply:function(t){t.on("change",(function(t){}))}};var Ai={apply:function(t){t.register("keydown:shortcutKey",(function(t){if(tr.assKeys.some((function(e){return t[e]})))return t.target})),t.on("shortcutKey",(function(e){t.emitShortcutEvent(e)}))}};var Mi={apply:function(t){t.onNative("paste",(function(e){t.editor.actionManager.execute("paste",{event:e,editor:t.editor})}))}};var Ti={apply:function(t){var e=function(e){t.editor.actionManager.execute("cut",{editor:t.editor,event:e})};document.body.addEventListener("cut",e),t.on("unmount",(function(){document.body.removeEventListener("cut",e)}))}};var Pi={apply:function(t){var e=function(e){t.editor.actionManager.execute("copy",{editor:t.editor,event:e})};document.body.addEventListener("copy",e),t.on("unmount",(function(){document.body.removeEventListener("copy",e)}))}},ji=function(t){var e=t.events;e.registerShortcutHandler("Ctrl+Z|Meta+Z",(function(){t.execCommand("log","cancel")})),e.registerShortcutHandler("Ctrl+B|Meta+B",(function(){t.execCommand("bold")})),e.registerShortcutHandler("Ctrl+I|Meta+I",(function(){t.execCommand("italic")}))},zi=qo("checked");var Ni={apply:function(t){t.register("click:toggleCheckbox",(function(e){return r.findUpUtil(e.target,(function(t){if(k.isElementInstanceOf(t,rt))return!!t}),(function(e){return e===t.getProxyElement()}))})),t.on("toggleCheckbox",(function(t){var e,n=t.target;(e=n).hasAttribute(zi)?e.removeAttribute(zi):e.setAttribute(zi,"")}))}};n(25);function Bi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Ii={apply:function(t){function e(){return t.getProxyElement()}var n=i.touchable(),a={dragInfo:null},c=function(t){return r.findUpUtil(t.target,(function(t){if(k.isElementInstanceOf(t,V))return!0}),(function(t){return t===e()}))},u=function(t){return c(t)};n?(t.register("touchstart:dragStart",u,o.simulateMouseDownEvent),t.register("touchmove:dragMove",e,o.simulateMouseDownEvent),t.register("touchend:dragEnd",e)):(t.register("mousedown:dragStart",u),t.register("mousemove:dragMove",e),t.register("mouseup:dragEnd",e));var s=function t(){clearTimeout(a.timeout),document.body.removeEventListener(n?"touchmove":"mousemove",t)},f=function(e){var n,r=e.dragInfo,o=e.dropTarget;if(r&&o){var i=r.node;if(i!==o&&i.nextElementSibling!==o){t.editor.saveLog();var a,c=i.parentElement,u=o.parentElement,l=k.isElementInstanceOf(i,Z)||k.isElementInstanceOf(o,Z),s=function(){k.isElementInstanceOf(c,w)?Cr(c):k.isElementInstanceOf(c,V)&&wr(c),l&&(_o.validateElement(c),_o.validateElement(u))};if(o.tagName===i.tagName)return null===(a=o.parentElement)||void 0===a||a.insertBefore(i,o),k.isElementInstanceOf(o,Z)&&dr(o,i,["type","level"]),void s();var f=i;if(o.tagName!==i.tagName)if(!(k.isElementInstanceOf(o,q)&&k.isElementInstanceOf(i,q)))ir(f),dr(f,f=function(t,e){for(var n="string"==typeof e?document.createElement(e):e;t.firstChild;){var r=t.firstChild;k.isElementInstanceOf(r,X)?ir(r):n.appendChild(r)}return n}(f,o.tagName),["style"]),k.isElementInstanceOf(o,Z)&&dr(o,f,["type","level"]);null===(n=o.parentElement)||void 0===n||n.insertBefore(f,o),s()}}},p=function e(){clearTimeout(a.timeout),document.body.addEventListener(n?"touchend":"mouseup",e),a.dragInfo&&(t.editor.getWrapper().removeAttribute("disable-select"),a.dragInfo.node.removeAttribute("disable-events"),ir(a.dropHelpNode),ir(a.dragInfo.block),a.dropTarget=a.dropHelpNode=null,a.dragInfo=null)};t.on("dragStart",(function(e){s(),document.body.addEventListener(n?"touchmove":"mousemove",s),a.timeout=setTimeout((function(){var o=e.target,i=function(t){var e=document.createElement("div");return e.className=Ko("drag-block"),e.appendChild(t),e}(o.cloneNode(!0)),c=t.editor.getWrapper();o.setAttribute("disable-events","");var u=o.getBoundingClientRect(),l=r.getPosition(u,c);i.style.left="".concat(l.x,"px"),i.style.top="".concat(l.y,"px"),i.style.width="".concat(u.width,"px"),c.appendChild(i),a.dragInfo={startEventPos:r.getPosition(e),startPos:{x:l.x,y:l.y},node:o,block:i},c.setAttribute("disable-select",""),document.body.addEventListener(n?"touchend":"mouseup",p)}),500)}));var h=function(e){var n=t.editor.getContainer();if(e){if(n.scrollTop<=0)return;n.scrollTop-=5}else{var r=n.scrollHeight,o=n.offsetHeight;if(n.scrollTop>r-o)return;n.scrollTop+=5}};t.on("dragMove",(function(e){if(s(),a.dragInfo){n&&e.preventDefault();var o=a.dragInfo,i=o.startPos,u=o.startEventPos,l=o.block,f=r.getPosition(e),p=f.x-u.x,v=f.y-u.y,d=t.editor.getWrapper().getBoundingClientRect(),m=f.y-d.y;m<30?h(!0):d.height-m<30&&h();var y=i.x+p,g=i.y+v;l.style.left="".concat(y,"px"),l.style.top="".concat(g,"px");var b=c(n?{target:document.elementFromPoint(f.x,f.y)}:e.native);a.dropTarget=b,function(){if(a.dragInfo){var e=a.dropTarget,n=a.dropHelpNode,o=a.dragInfo.node;if(e)if(o!==e&&o.nextElementSibling!==e){var i=n;i||((i=document.createElement("div")).className=Ko("drop-info-node"),a.dropHelpNode=i);var c=t.editor.getWrapper(),u=e.getBoundingClientRect(),l=r.getPosition(u,c);i.style.left="".concat(l.x,"px"),i.style.top="".concat(l.y,"px"),i.style.width="".concat(u.width,"px"),i.style.display="block",i.parentElement!==c&&c.appendChild(i)}else n&&(n.style.display="none");else n&&(n.style.display="none")}}()}})),t.on("dragEnd",(function(){s();var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bi(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},a);p(),f(t)}))}},Li={apply:function(t){t.onNative("click",(function(e){if(!t.editor.isEditMode()){var n=r.findUpUtil(e.target,(function(t){return k.isElementInstanceOf(t,D)}),(function(e){return e===t.getProxyElement()}));n&&t.emit("linkClick",null,[{native:e,target:n}])}}))}};n(26);var Di=function(){function t(){f()(this,t),this._operations={checkbox:["rotate","delete"],hr:["fullWidth","rotate","delete"]},this._onHeaderCreatedHandlers={}}return h()(t,[{key:"setTypeOperations",value:function(t,e){this._operations[t]=e}},{key:"hasUserTypeOperations",value:function(t){return!!this._operations[t]}},{key:"getTypeOperations",value:function(t){return this._operations[t]||["fullHeight","fullWidth","rotate","delete"]}},{key:"hasOperation",value:function(t,e){return this.getTypeOperations(t).includes(e)}},{key:"onHeaderCreated",value:function(t,e){var n=this._onHeaderCreatedHandlers;return n[t]=e,function(){n[t]===e&&delete n[t]}}},{key:"executeOnHeaderCreated",value:function(t,e,n){var r=this._onHeaderCreatedHandlers[t];return"function"==typeof r?r(e,n):e}}]),t}();function Hi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Vi=function(t){m()(n,t);var e=Hi(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-cursor",t))}return n}(v);Vi.tagName="ky-cursor";n(27);function Ui(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Fi=Array.prototype.slice,Wi=function(t,e){var n=t.getBoundingClientRect(),o=r.getScreenPositionByClientInfo({x:n.x,y:n.y},e);return{x:o.x,y:o.y,width:n.width,height:n.height}};function qi(t,e){var n=document.createRange();return 1===arguments.length?(n.selectNode(t),n):(n.setStart(t,e),n)}function Ki(t,e,n,r,o){for(var i=function t(e,n,r,i){if(r-n<2)return n;var a=(r+n)/2|0,c=qi(e,a),u=Wi(c,o);return u.y+u.height<i.y?t(e,a,r,i):t(e,n,a,i)}(t,e,n,r),a=null;i>0;){var c=qi(t,i),u=Wi(c,o);if(a||(a=u),u.x<r.x||u.x>a.x)break;i--}return i}function Zi(t,e,n,r,o){for(var i=function t(e,n,r,i){if(r-n<2)return r;var a=(r+n)/2|0,c=qi(e,a);return Wi(c,o).y>i.y?t(e,n,a,i):t(e,a,r,i)}(t,e,n,r),a=null;i<n;){var c=qi(t,i),u=Wi(c,o);if(a||(a=u),u.x>r.x||u.x<a.x)break;i++}return i}function Yi(t,e){if(!e){var n=t.lastChild;if(!t.textContent)return qi(t);for(;n;){if(3===n.nodeType)return qi(n,n.textContent.length);n=n.previousSibling}return qi(t)}if(!function(t,e){return Xi(t.x,e.x,e.x+e.width)&&Xi(t.y,e.y,e.y+e.height)}(e,t.getBoundingClientRect()))return null;console.time("getTextCursorRange");try{return function(t,e){for(var n={last:{bounding:null,range:null},nearest:{bounding:null,range:null,dx:1e4}},o=r.getClientInfo(t),i=r.getScreenPositionByClientInfo(e,o),a=t.firstChild;a;)if(3===a.nodeType){var c=a.textContent.length,u=Wi(qi(a,0),o),l=Wi(qi(a,c),o);if(i.y<u.y||i.y>l.y+l.height)a=a.nextSibling;else{for(var s=Ki(a,0,c,i,o),f=Zi(a,s,c,i,o),p=s;p<=f;p++){var h=qi(a,p),v=Wi(h,o),d=v.x>=i.x,m=Math.abs(v.x-i.x),y=n.nearest;if((!y.range||y.dx>m)&&(y.bounding=v,y.range=h,y.dx=m),d&&Xi(i.y,v.y,v.y+v.height)){var g=n.last.bounding;if(g){var b=g.x;Xi(i.y,g.y,g.y+g.height)||(b=u.x);var x=v.x-b;if(v.x-i.x<.5*x)return h;if(v.y-g.y-v.height>=0){var E=document.createRange();return E.setStart(h.startContainer,Math.max(0,h.startOffset-1)),E.setEnd(h.startContainer,h.startOffset),E}}return n.last.range||h}n.last.bounding=v,n.last.range=h}a=a.nextSibling}}else a=a.nextSibling;if(!n.nearest.range)return n.nearest.range;if(n.nearest.range&&n.last.range){var w=n.last.bounding,C=n.nearest.bounding;return Math.abs(w.y-i.y)>Math.abs(C.y-i.y)&&n.nearest.range||n.last.range}return n.last.range}(t,e)}finally{console.timeEnd("getTextCursorRange")}}function Xi(t,e,n){return t>=e&&t<=n}function Gi(t){return t.y+t.height/2}function Ji(t){return t.y+t.height}var Qi=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(t.lineIndex>2)){var r=t.last,o=function(e){var n=e.getBoundingClientRect();if(r.range||(r.bounding=n,r.range=e),t.currentRange||(t.currentRange=e,t.currentBounding=n),(n.x<r.bounding.x||n.x===r.bounding.x&&Gi(n)>Ji(r.bounding)&&n!==t.currentBounding)&&t.lineIndex++,t.lineIndex>=2)return!0;if(t.lineIndex>0)if(t.range){var o=Math.abs(n.x-t.currentBounding.x);o<=t.dx&&(t.range=e,t.bounding=n,t.dx=o)}else t.range=e,t.bounding=n,t.dx=Math.abs(n.x-t.currentBounding.x);r.bounding=n,r.range=e};if(1!==e.nodeType||e.textContent)for(var i=3===e.nodeType?e:e.firstChild;i;)if(3===i.nodeType){for(var a=i.textContent,c=a.length,u=n;u<=c;u++){var l=qi(i,u);if(o(l))break}i=i.nextSibling}else i=i.nextSibling;else{var s=qi(e);o(s)}}},$i=function(t,e,n){if(!(t.lineIndex>2)){var r=t.last,o=function(e){var n=e.getBoundingClientRect();if(r.range||(r.bounding=n,r.range=e),t.currentRange||(t.currentRange=e,t.currentBounding=n),(n.x>r.bounding.x||n.x===r.bounding.x&&Gi(n)<r.bounding.y&&n!==t.currentBounding)&&t.lineIndex++,t.lineIndex>=2)return!0;if(t.lineIndex>0)if(t.range){var o=Math.abs(n.x-t.currentBounding.x);o<=t.dx&&(t.range=e,t.bounding=n,t.dx=o)}else t.range=e,t.bounding=n,t.dx=Math.abs(n.x-t.currentBounding.x);r.bounding=n,r.range=e};if(1!==e.nodeType||e.textContent){var i=3===e.nodeType?e:e.lastChild;for(2===arguments.length&&(n=i?i.textContent.length:0);i;)if(3===i.nodeType){for(var a=n||0;a>=0;a--){var c=qi(i,a);if(o(c))break}i=i.previousSibling}else i=i.previousSibling}else o(qi(e))}};function ta(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o={last:{range:null,bounding:null},lineIndex:0,currentRange:null,currentBounding:null,range:null,bounding:null,dx:1e3,isFinish:function(){return o.lineIndex>=2}},i=1===r?Qi:$i;if(i(o,e,n),o.isFinish())return o.range;var a=1===r?Sr:Ar;return a(e,(function(t){return!(!Br(t)||(i(o,t),!o.isFinish()))}),t),o.range||o.currentRange}function ea(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function na(t,e){if(Br(t))return Yi(t,e);var n=Mr(t);if(n){var r,o=n.firstChild;if(r=o&&o.textContent?qi(o,o.textContent.length).getBoundingClientRect():qi(n).getBoundingClientRect(),e.x>r.x&&e.y>r.y)return Yi(n)}var i=Number.NaN,a=[],c=null,u=function(){a.length>=3&&a.shift(),c={items:[]},a.push(c)};u();var s=!1,f=!1;!function t(n){if(!s)for(var r=n.firstElementChild;!s&&r;)if(Vr(r))r=r.nextElementSibling;else{if(Br(r)){var o=r.firstChild;if(o&&o.textContent){var a=qi(o).getClientRects();if(a.length>1)f&&(s=!0),u();else if(a.length>0){if(a[0].x<i){if(f){s=!0;break}u()}}if(c.items.push({rects:Fi.call(a),element:r}),a.length>0){var l=a[a.length-1];i=l.x+l.width,l.y+l.height>e.y&&(f=!0)}}else{var p=qi(r).getBoundingClientRect(),h=p;if(p.x<i){if(f){s=!0;break}u()}i=p.x,c.items.push({rects:[p],element:r}),h.y+h.height>e.y&&(f=!0)}}else if(t(r),s)break;r=r.nextElementSibling}}(t);var p=null,h=Number.MAX_VALUE,v={maxX:Number.MIN_VALUE,minY:Number.MAX_VALUE};a.forEach((function(t,n){t.items.forEach((function(t){t.rects.forEach((function(r){var o=function(t,e){var n=t.x,r=t.y;return e.y>r+t.height/2&&(r+=t.height),Xi(e.x,n,n+t.width)?Math.abs(e.y-r):e.x<t.x?ea({x:t.x,y:t.y},e):ea({x:t.x+t.width,y:t.y},e)}(r,e);o<h&&(p={target:t,element:t.element,bounding:r},h=o),n===a.length-1&&(r.y<v.minY&&(v.minY=r.y),r.x+r.width>v.maxX&&(v.maxX=r.x+r.width))}))}))}));var d=null;if(p){var m=p,y=m.bounding,g=m.element;if(0===y.width)d=Yi(g);else{var b=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ui(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ui(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e);e.x<y.x?b.x=y.x:e.x>y.x+y.width&&(b.x=y.x+y.width),(e.y<y.y||e.y>y.y+y.height)&&(b.y=y.y+y.height/2),d=Yi(g,b)}}return d||n&&(d=Yi(n)),d}var ra={apply:function(t){var e=t.editor,n=t.editor.events,o=null,a=0,c=!1;n.onNative("mousedown",(function(t){o=r.getPosition(t);var e=(new Date).getTime();c=!!(a&&e-a<(i.touchable()?800:400)),a=e})),n.onNative("mouseup",(function(u){if(!(c&&!i.touchable()||Date.now()-a>800)){var l=r.getPosition(u);if(o){var s=Math.pow(o.x-l.x,2)+Math.pow(o.y-l.y,2);if((s=Math.sqrt(s))>=3)return t.update(null),void(o=null)}var f=u.target;if(r.findUpUtil(f,(function(t){return Vr(t)}),(function(t){return t===e.getContainer()})))t.update(null);else{console.time("cursor");var p=e.getContainer().querySelector(w.tagName);if(p){var h=p.getBoundingClientRect();l.x<=h.left&&(l.x=h.left+2)}var v=na(f,l);if(console.timeEnd("cursor"),v){if(c){var d,m,y=v.startContainer,g=v.startOffset,b=(null===(d=y.textContent)||void 0===d?void 0:d.length)||0;g<b?v.setEnd(y,Math.min(b,g+2)):g>0&&v.setEnd(y,Math.max(0,g-2));var x=window.getSelection();return null==x||x.removeAllRanges(),void(null===(m=window.getSelection())||void 0===m||m.addRange(v))}t.update(v),n.emit("internalSelectionchange",null,[])}o=null}}})),e.onBase("scroll",(function(){t.updatePosition()})),n.registerShortcutHandler("Ctrl+A|Meta+A",(function(){var n=e.getNormalizedRange();if(!n)return!1;var r=e.getContainer(),o=Lr(n.startContainer,r);if(o){var i=e.newRange();i.startElement=_r(o),i.startOffset=0;var a=Or(o,(function(t){return Ir(t)}));if(Nr(a)){var c=a&&a.lastChild;c?(i.endContainer=c,i.endOffset=c.textContent.length):(i.endContainer=a,i.endOffset=0)}else a&&(i.endContainer=a,i.endOffset=0);t.update(null),i.select(),r.focus()}}))}},oa={Enter:13,Delete:46,Backspace:8,Tab:9,ArrowLeft:37,ArrowTop:38,ArrowRight:39,ArrowBottom:40},ia="Enter",aa="Delete",ca="Backspace",ua="Tab";var la={apply:function(t){var e,n,r=t.editor.events,o={composition:0,logged:!1},a=r.editor,c=(e={},l()(e,oa.ArrowLeft,!0),l()(e,oa.ArrowRight,!0),l()(e,oa.ArrowTop,!0),l()(e,oa.ArrowBottom,!0),e);function u(){return r.editor.selectionEnabled()}function s(t,e){a.checkUnmountCustomElements();var n=r.createEvent(t);n.optType=e,function(t){r.emit("keyboardInput",null,[t])}(n)}function f(){r.emit("internalSelectionchange",null,[])}function p(t){var e=a.getNormalizedRange();if(!e)return null;if(t){if(!Br(e.startElement))return null}else if(!Br(e.endElement))return null;return e}var h=(n={},l()(n,oa.ArrowLeft,(function(e){var n;e.preventDefault();var r=Br(null===(n=a.getNormalizedRange())||void 0===n?void 0:n.startElement)?null:a.selectState.getTarget();if(r){var o=Ar(r,(function(t){return Br(t)}),(function(t){return t===a.getContainer()||Vr(t)}));if(o){a.selectState.setActive(null);var i=a.newRange();return i.startElement=o,i.startOffset=0,void i.select()}}if(t.isActive())t.moveLeft();else{var c=p();if(!c)return;var u=a.newRange();u.startContainer=c.startContainer,u.startOffset=c.startOffset,u.select()}f()})),l()(n,oa.ArrowTop,(function(e){if(e.preventDefault(),t.isActive())t.moveTop();else{var n=p();if(!n)return;var r=a.newRange();r.startContainer=n.startContainer,r.startOffset=n.startOffset,r.select()}f()})),l()(n,oa.ArrowRight,(function(e){var n;e.preventDefault();var r=Br(null===(n=a.getNormalizedRange())||void 0===n?void 0:n.startElement)?null:a.selectState.getTarget();if(r){var o=Sr(r,(function(t){return Br(t)}),(function(t){return t===a.getContainer()||Vr(t)}));if(o){a.selectState.setActive(null);var i=a.newRange();if(!i)return;return i.startElement=o,i.startOffset=0,void i.select()}}if(t.isActive())t.moveRight();else{var c=p(!0);if(!c)return;var u=a.newRange();u.startContainer=c.endContainer,u.startOffset=c.endOffset,u.select()}f()})),l()(n,oa.ArrowBottom,(function(e){if(e.preventDefault(),t.isActive())t.moveBottom();else{var n=p(!0);if(!n)return;var r=a.newRange();r.startContainer=n.endContainer,r.startOffset=n.endOffset,r.select()}f()})),l()(n,oa.Enter,(function(t){a.execute((function(){a.actionManager.execute("enter",{editor:a,event:t})})),s(t,ia)})),l()(n,oa.Delete,(function(t){a.execute((function(){a.actionManager.execute("delete",{editor:a,event:t})})),s(t,aa)})),l()(n,oa.Backspace,(function(t){a.execute((function(){a.actionManager.execute("backspace",{editor:a,event:t})})),s(t,ca)})),l()(n,oa.Tab,(function(t){a.execute((function(){a.actionManager.execute("tab",{editor:a,event:t})})),s(t,ua)})),n);function v(t,e){lo((function(){r.emit("textInput",null,[{text:e}])}))}function d(t,e){e&&(a.actionManager.execute("textInput",{editor:a,event:t,text:e}),a.checkUnmountCustomElements())}r.onNative("keydown",(function(t){if(!function(t){return!i.touchable()&&tr.assKeys.some((function(e){return"shiftKey"!==e&&t[e]}))}(t)&&(u()||function(t){return[oa.Backspace,oa.Delete,oa.ArrowLeft,oa.ArrowRight].indexOf(t.keyCode)>=0&&!Fr(t,r.editor.getContainer())}(t))){o.logged||(o.logged=!0,c[t.keyCode]||a.saveLog());var e=h[t.keyCode];e&&e(t)}})),t.input.addEventListener("input",(function(e){if(!o.composition){var n=t.input.value;t.input.value="",d(e,n),v(0,n)}})),r.onNative("keyup",(function(){o.composition||(o.logged=!1)}));var m=null;t.input.addEventListener("compositionstart",(function(){u()&&(o.composition=1)}));var y=function(t){var e=a.getNormalizedRange(),n=t.data;if(e.startElement===m.startElement){var r=e.startContainer,o=m.startOffset,i=e.startOffset,c=r.textContent||"",u=c.slice(0,o)+n;r.textContent=u+c.slice(i),(e=a.newRange()).startContainer=r,e.startOffset=u.length,e.select()}else{var l=e.startElement;l.textContent=n,(e=a.newRange()).startElement=l,e.startOffset=n.length,e.select()}};t.input.addEventListener("compositionupdate",(function(t){if(u()){var e=t.data;if(!m)return ur((m=a.getNormalizedRange()).startContainer.textContent)&&(m.startOffset=0),void d(t,e);y(t)}})),t.input.addEventListener("compositionend",(function(e){var n=e;y(n),v(0,n.data),o.logged=!1,o.composition=0,m=null,u()&&(t.input.value="")}))}};function sa(t){if(t){var e=t.startContainer,n=t.startOffset,r={startContainer:e,startOffset:n,endOffset:t.endOffset};return 1===e.nodeType&&(r.anchorNode=e.childNodes[n]),r}}var fa=window.setTimeout,pa=window.clearTimeout,ha=function(){function t(e){f()(this,t),this._blinkId=0,this._currentBounding={x:0,y:0,height:0},this.enableInputEventListener=!0,this.keyboardDisabled=!1,this.editor=e,this.initElements(),this.initEvents()}return h()(t,[{key:"isKeyboardDisabled",value:function(){return"function"==typeof this.keyboardDisabled?this.keyboardDisabled():this.keyboardDisabled}},{key:"initElements",value:function(){var t=this;this.element||(this.input=document.createElement("textarea"),this.element=k.createElement(Vi),this.element.appendChild(this.input),this.input.addEventListener("blur",(function(){t.enableInputEventListener&&!t.isKeyboardDisabled()&&t.update(null)})),this.update())}},{key:"initEvents",value:function(){ra.apply(this),la.apply(this)}},{key:"syncScroll",value:function(t){t.dy&&this.editor.scrollTop(this.editor.scrollTop()+t.dy)}},{key:"updatePosition",value:function(){if(this.element&&this.element.parentElement){var t=this.getCursorBounds();this._currentBounding=t,Object.assign(this.element.style,{left:"".concat(t.x,"px"),top:"".concat(t.y,"px"),transform:t.transform})}}},{key:"updateBlink",value:function(t){var e=this;this.clearBlink();var n=!0,r=!1,o=function t(){if(e.element&&e.element.parentElement){var o=e.getCursorBounds();r||(r=!0,e.syncScroll(o)),function(){var t=e.getCursorBounds();e._currentBounding=t,Object.assign(e.element.style,{opacity:n?1:0,left:"".concat(t.x,"px"),top:"".concat(t.y,"px"),height:"".concat(t.height,"px"),transform:t.transform})}(),e._blinkId=fa(t,500)}n=!n};t?o():(this.element.style.opacity="1",this._blinkId=fa(o,500))}},{key:"clearBlink",value:function(){pa(this._blinkId),this._blinkId=0}},{key:"isActive",value:function(){return!!this.rangeInfo}},{key:"getRange",value:function(){var t=this.rangeInfo;if(!t)return null;var e=document.createRange();return t.anchorNode?(e.selectNode(t.anchorNode),e):(e.setStart(t.startContainer,t.startOffset),"number"==typeof t.endOffset&&t.endOffset!==t.startOffset&&e.setEnd(t.startContainer,t.endOffset),e)}},{key:"getRangeOptions",value:function(){var t=this.getRange();return t?{startContainer:t.startContainer,startOffset:t.startOffset}:null}},{key:"getCurrentBounds",value:function(){return this._currentBounding}},{key:"getCursorBounds",value:function(t){var e=t||this.getRange();if(!e)return{x:0,y:0,height:0};var n=this.editor.getWrapper(),o=e.startContainer,i=1===o.nodeType?o:null==o?void 0:o.parentElement,a=0,c=1,u=1;if(i){var l=r.getCTM(i,n);a=r.QRDeCompositionMatrix(l).rotate||0;var s=r.getElementScale(i);c=s.x,u=s.y}c=c||1,u=u||1;var f=e.getBoundingClientRect(),p=n.getBoundingClientRect(),h=f.x-p.x,v=f.y-p.y,d=window.getComputedStyle(i),m=parseFloat(d.lineHeight),y=(m-parseFloat(d.fontSize))/2||0,g=f.height/u,b=0;return v<0?b=v-10:v+g>p.height&&(b=v+g-p.height+10),{x:h/c,y:v/u-y/Math.cos(a),height:m||Math.sqrt(Math.pow(f.width,2)+Math.pow(f.height,2))/u,transform:a?"rotate(".concat(180*a/Math.PI,"deg)"):"none",dy:b}}},{key:"update",value:function(t){if(arguments.length>0&&(this.rangeInfo=sa(t)),this.element){var e=this.element.style;if(this.rangeInfo){var n,r=this.getRange(),o=this.getCursorBounds(r);this._currentBounding=o;var i=1===(null===(n=r.startContainer)||void 0===n?void 0:n.nodeType)?r.startContainer:r.startContainer.parentElement,a=window.getComputedStyle(i),c=i?a.color:"",u={opacity:1,left:"".concat(o.x,"px"),top:"".concat(o.y,"px"),height:"".concat(o.height,"px"),transform:o.transform,"background-color":c||"#000"};Object.assign(e,u),this.syncScroll(o),this.updateBlink(!!o.dy),Object.assign(this.input.style,{fontSize:a.fontSize}),this.isKeyboardDisabled()||this.input.focus()}else this.hide(),this.isKeyboardDisabled()||this.input.blur()}}},{key:"hide",value:function(){if(this.element){var t=this.element.style;Object.assign(t,{left:"0px",top:"0px",height:"0px"}),this.clearBlink()}}},{key:"moveLeft",value:function(){if(this.isActive()){var t=new Zr(this.editor,this.getRangeOptions()),e=t,n=e.startContainer,r=e.startOffset;if(r>0)r--,(t=t.new()).startContainer=n,t.startOffset=r;else{var o=Ar(t.startElement,Br,this.editor.getContainer());o&&((t=t.new()).startElement=o,t.startOffset=o.textContent.length)}this.update(t.getNativeRange())}}},{key:"moveRight",value:function(){if(this.isActive()){var t=new Zr(this.editor,this.getRangeOptions()),e=t,n=e.startContainer,r=e.startOffset;if(r===n.textContent.length){var o=Sr(t.startElement,Br,this.editor.getContainer());o&&((t=t.new()).startElement=o,t.startOffset=0)}else r++,(t=t.new()).startContainer=n,t.startOffset=r;this.update(t.getNativeRange())}}},{key:"moveTop",value:function(){if(this.isActive()){var t=new Zr(this.editor,this.getRangeOptions());(t=ta(this.editor.getContainer(),t.startElement,t.startOffset,-1))&&this.update(t)}}},{key:"moveBottom",value:function(){if(this.isActive()){var t=new Zr(this.editor,this.getRangeOptions());(t=ta(this.editor.getContainer(),t.startElement,t.startOffset,1))&&this.update(t)}}},{key:"render",value:function(){return this.element}}]),t}(),va=function(){function t(){f()(this,t),this._keyMapping=Object.create(null),this._keyMatches=[]}return h()(t,[{key:"put",value:function(t,e){if("string"==typeof t||"number"==typeof t)this._keyMapping[t]=e;else if("function"==typeof t){if(this._keyMatches.find((function(e){return e.match===t})))return;this._keyMatches.push({match:t,transfer:e})}}},{key:"get",value:function(t){var e=String(t.tagName).toLowerCase(),n=this._keyMapping[e];if(n)return n;var r=this._keyMatches.find((function(e){return e.match(t)}));return r?r.transfer:void 0}}]),t}(),da={};function ma(t,e){return t.getAttributeNames().reduce((function(n,r){if(da.hasOwnProperty(r)||e&&e.hasOwnProperty(r))return n;var o=t.getAttribute(r);return n+=o?" ".concat(r,'="').concat(o,'"'):" ".concat(r)}),"").trim()}var ya=function(){function t(){f()(this,t),this._content="",this._length=0}return h()(t,[{key:"append",value:function(t){t=String(t),this._content+=t,this._length+=t.length}},{key:"size",value:function(){return this._length}},{key:"toString",value:function(){return this._content}}]),t}(),ga=function(){function t(){f()(this,t),this.transfers=new va}return h()(t,[{key:"registerTransfer",value:function(t,e){this.transfers.put(t,e)}},{key:"getTransfer",value:function(t){return this.transfers.get(t)}},{key:"stringifyInfo",value:function(t){var e=this.transfers;function n(t){try{if(!t)return;if(1!==t.nodeType)return void i.append(t.textContent);var r=t,o=String(r.tagName).toLowerCase(),a=e.get(r);if(a&&a.stringify)return a.stringify.call(i,r);var c=r.firstChild,u=ma(r);for(i.append("<".concat(o).concat(u?" "+u:"",">"));c;){var l=c.nextSibling;n(c),c=l}i.append("</".concat(o,">"))}finally{}}var r=new ya,o=new ya,i={append:function(t){r.append(t)},appendContent:function(t){o.append(t)},size:function(){return r.size()},contentSize:function(){return o.size()},next:n,toString:function(){return r.toString()},contentToString:function(){return o.toString()}};return n(t),{xml:i.toString(),text:o.toString()}}},{key:"stringify",value:function(t){return this.stringifyInfo(t).xml}},{key:"parseNode",value:function(t){if(!t)return t;if(k.isElementInstanceOf(t,N))return t;if(Vr(t))return ar(t),t;var e=t,n=this.transfers.get(e);if(n&&n.parse)return n.parse(e);for(var r=e.firstElementChild;r;){var o=r.nextElementSibling,i=this.parseNode(r);i||ir(r),i!==r&&r.parentNode===e&&e.replaceChild(i,r),r=o}return e}},{key:"parse",value:function(t){var e=(new DOMParser).parseFromString(t,"text/html");return this.parseNode(e)}}],[{key:"registerIgnoreAttribute",value:function(t){da[t]=!0}}]),t}();ga.getElementAttrString=ma;var ba=function t(){f()(this,t)};ba.START_CURSOR="start-cursor",ba.END_CURSOR="end-cursor";function xa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Ea=function(t){m()(n,t);var e=xa(n);function n(t){var r;return f()(this,n),(r=e.call(this,{passive:!1}))._shortcutItems=[],r.editor=t,r}return h()(n,[{key:"install",value:function(t){t.apply(this)}},{key:"emitShortcutEvent",value:function(t){this._shortcutItems.some((function(e){if(e.keyInfos.some((function(e){return tr.matchKey(t,e)})))return!1!==e.handler(t)&&t.preventDefault(),!0}))}},{key:"registerShortcutHandler",value:function(t,e){if(e){var n=tr.parseKeyString(t);this._shortcutItems.push({keyInfos:n,handler:e})}}}]),n}(Tt);function wa(t){ir(t),Ca(t)}function Ca(t){oh.getElementsByElementType(t,ut).forEach((function(t){oh.unmountCustomElement(t)}))}function Oa(t,e){oh.getElementsByElementType(e,ut).forEach((function(e){t.mountCustomElement(e)}))}var ka=function(){function t(e){f()(this,t),this.render=e}return h()(t,[{key:"_updateItem",value:function(t,e,n){if(e)if(t||!n){if(t.nodeType!==e.nodeType)return t.parentNode.replaceChild(e,t),Ca(t),void Oa(this.render,e);if(3!==t.nodeType){var r=t,o=e;if(r.tagName!==o.tagName)return r.parentNode.replaceChild(o,r),Ca(r),void Oa(this.render,o);if(function(t,e){var n=t.getAttributeNames(),r=e.getAttributeNames(),o=n.reduce((function(t,e){return t[e]=!0,t}),{});r.forEach((function(r){var i=e.getAttribute(r);if(!n.hasOwnProperty(r)||i!==t.getAttribute(r))try{t.setAttribute(r,i)}catch(t){}delete o[r]})),Object.keys(o).forEach((function(e){t.removeAttribute(e)}))}(r,o),!Vr(r))for(var i=r.firstChild,a=o.firstChild;i||a;){var c=i&&i.nextSibling,u=a&&a.nextSibling;a?i?this._updateItem(i,a,r):(r.appendChild(a),Oa(this.render,a)):wa(i),i=c,a=u}}else{var l=t.textContent,s=e.textContent;l!==s&&(t.textContent=s)}}else n.appendChild(e);else wa(t)}},{key:"update",value:function(t){for(var e=this.render.parser.parse(t),n=this.render.getContainer(),r=n.firstChild,o=e.body.firstChild;r||o;){var i=r&&r.nextSibling,a=o&&o.nextSibling;this._updateItem(r,o,n),r=i,o=a}}}]),t}(),_a=n(6),Ra=function(){return(Ra=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Sa=/\s+|\s*,\s*/;function Aa(t){return t}var Ma={passive:!0},Ta=function(){function t(t){this._options=Object.assign({},Ma,t||{}),this.mountKey=Object(_a.findUniqueKey)("eventManagerId"),this._proxyElement=null,this._eventListeners={},this._events={},this._bindEventTypes={},this._attributes={},this._nativeEventItems=[]}return t.prototype.onNative=function(t,e,n){var r=this._nativeEventItems;if(r.find((function(n){return n.name===t&&n.handler===e})))return this;r.push({name:t,handler:e,options:n});var o=this._proxyElement,i=this.mountKey;return o&&o[i]&&o.addEventListener(t,e,n),this},t.prototype.offNative=function(t,e){var n=this._nativeEventItems,r=-1;if(n.some((function(n,o){if(n.name===t&&n.handler===e)return r=o,!0})),-1!==r){n.splice(r,1);var o=this._proxyElement,i=this.mountKey;o&&o[i]&&o.removeEventListener(t,e)}return this},t.prototype.attr=function(t,e){var n=this._attributes;return 1===arguments.length?n[t]:2===arguments.length?(n[t]=e,this):Object.assign({},n)},t.prototype.option=function(t,e){var n=this._options;return 1===arguments.length?n[t]:(2===arguments.length&&(n[t]=e),this)},t.prototype.removeAttr=function(t){return delete this._attributes[t]},t.prototype.getProxyElement=function(){return this._proxyElement},t.prototype._parseEventType=function(t){return t?t.trim().split(Sa):[]},t.prototype._executeHandlers=function(t){var e=t.handlers;e&&e.forEach((function(e){var n=Object.create(t.event);Object(_a.safeExecute)(e,t.eventTarget,[t.eventBuilder(n)])}))},t.prototype.on=function(t,e){var n=this._eventListeners;return this._parseEventType(t).forEach((function(t){var r=n[t];r||(r=n[t]=[]),-1===r.indexOf(e)&&r.push(e)})),this},t.prototype.once=function(t,e){var n,r=this,o=function(){r.off(t,n)};n=function(){e.apply(this,arguments),o()},this.on(t,n)},t.prototype.off=function(t,e){var n=this._eventListeners;return this._parseEventType(t).forEach((function(t){var r=n[t];if(r){var o=r.indexOf(e);-1!==o&&r.splice(o,1),0===r.length&&delete n[t]}})),this},t.prototype.emit=function(t,e,n){var r=this._eventListeners;return this._parseEventType(t).forEach((function(t){var o=r[t];o&&o.forEach((function(t){Object(_a.safeExecute)(t,e,n)}))})),this},t.prototype._register=function(t,e,n){var r=t.split(":"),o=r[0],i=r.length>1?r[1]:r[0],a=this._events[o];return a||(a=this._events[o]={}),e?(a[i]={eventTarget:Object(_a.asFunc)(e),eventBuilder:Object(_a.isFunction)(n)?n:Aa},this._registerBindEventType(o)):(delete a[i],0===Object.keys(a).length&&this._logoutBindEventType(o)),this},t.prototype.register=function(t,e,n){var r=this;return t.split(Sa).forEach((function(t){t&&r._register(t,e,n)})),this},t.prototype._createEvent=function(t){var e=this,n={};for(var r in t)n[r]=t[r];var o=t,i=!1;return Object.assign(n,{native:o,stopPropagation:function(){i=!0},isStopPropagation:function(){return i},preventDefault:function(){var n,r=e._options;!1===Ra({passive:r.passive},null===(n=r.eventOptions)||void 0===n?void 0:n[t.type]).passive&&t.preventDefault()}})},t.prototype.createEvent=function(t){return this._createEvent(t)},t.prototype._logoutBindEventType=function(t){var e=this._bindEventTypes,n=e[t];if(n){delete e[t];var r=this._proxyElement;r&&r.removeEventListener(t,n)}},t.prototype._registerBindEventType=function(t){var e,n=this,r=this._bindEventTypes;if(!r[t]){var o=function(e){var r=n._events[t];if(r){var o=Object.keys(r);if(0!==o.length){var i=n._eventListeners,a=[];o.forEach((function(t){var o=r[t],c=o.eventTarget;if(c=Object(_a.safeExecute)(c,null,[e])){var u=n._createEvent(e);u.target=c;var l=i[t];a.push({handlers:l,eventTarget:c,eventBuilder:o.eventBuilder,event:u})}}));for(var c=e.target,u=!1,l=function(){var t=!1;if(a=a.filter((function(e){return e.eventTarget!==c||(u||(n._executeHandlers(e),e.event.isStopPropagation()&&(t=e.event.isStopPropagation())),!1)})),t&&(u=t),c===n._proxyElement||0===a.length)return"break";c=c.parentElement};c;){if("break"===l())break}a.forEach((function(t){n._executeHandlers(t)}))}}};if(r[t]=o,this._proxyElement){var i=this._options;this._proxyElement.addEventListener(t,o,Ra({passive:i.passive},null===(e=i.eventOptions)||void 0===e?void 0:e[t]))}return this}},t.prototype._unmount=function(){this.stop(),this._proxyElement=null},t.prototype.stop=function(){var t=this._proxyElement;if(t){var e=this._bindEventTypes;Object.keys(e).forEach((function(n){var r=e[n];null==t||t.removeEventListener(n,r)})),this._nativeEventItems.forEach((function(e){null==t||t.removeEventListener(e.name,e.handler)}));var n=this.mountKey;t[n]=!1}},t.prototype.resume=function(){var t=this._proxyElement;if(t){var e=this._options,n=this.mountKey;if(!t[n]){var r=this._bindEventTypes;Object.keys(r).forEach((function(n){var o,i=r[n];null==t||t.addEventListener(n,i,Ra({passive:e.passive},null===(o=e.eventOptions)||void 0===o?void 0:o[n]))})),this._nativeEventItems.forEach((function(e){e.options?null==t||t.addEventListener(e.name,e.handler,e.options):null==t||t.addEventListener(e.name,e.handler)})),t[n]=!0}}},t.prototype.unMount=function(){return this._unmount()},t.prototype.unmount=function(){return this._unmount()},t.prototype.mount=function(t){var e=t;"string"==typeof e&&(e=document.querySelector(e)),this._proxyElement&&this._proxyElement!==e&&this.unmount(),this._proxyElement=e,this.resume()},t}(),Pa=n(10),ja=n.n(Pa),za=DOMMatrix,Na=DOMPoint,Ba=-1!==navigator.userAgent.indexOf("Chrome"),Ia=function(t,e,n){var r;if(function(t){return"svg"===String(t.tagName).toLowerCase()}(t))return t.getScreenCTM();if(r=t.ownerSVGElement)return r.getScreenCTM().multiply(t.getScreenCTM());var o=t.offsetParent,i=window.getComputedStyle(t),a=o&&o!==document.body?window.getComputedStyle(o):{},c=t.offsetTop,u=t.offsetLeft,l=parseFloat(a.borderLeftWidth)||0,s=parseFloat(a.borderTopWidth)||0,f=(null==o?void 0:o.scrollTop)||0,p=(null==o?void 0:o.scrollLeft)||0,h=function(t,e){var n=0,r=0;if(!t)return{scrollTop:r,scrollLeft:n};for(var o=t.parentElement;o&&o!==e;)n+=o.scrollLeft||0,r+=o.scrollTop||0,o=o.parentElement;return{scrollTop:r,scrollLeft:n}}(t,o),v=new DOMMatrix;n||(v.e=l+u-p-h.scrollLeft||0,v.f=s+c-f-h.scrollTop||0);var d=i.transform,m=d&&"none"!==d?v.multiply(new DOMMatrix(d)):v;if(e){var y=new DOMMatrix([1,0,0,1,t.offsetWidth/2||0,t.offsetHeight/2||0]);return m.multiply(y)}return m},La=function(t){var e=t.ownerSVGElement;return e||t.offsetParent},Da=function(t){return function t(e,n){var r=La(e);return r?t(r,e).multiply(Ia(e,e===n)):Ia(e)}(t,t)};const Ha="function"==typeof btoa,Va="function"==typeof Buffer,Ua=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder?new TextEncoder:void 0),Fa=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),Wa=((t=>{let e={};t.forEach((t,n)=>e[t]=n)})(Fa),String.fromCharCode.bind(String)),qa=("function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),t=>t.replace(/=/g,"").replace(/[+\/]/g,t=>"+"==t?"-":"_")),Ka=t=>{let e,n,r,o,i="";const a=t.length%3;for(let a=0;a<t.length;){if((n=t.charCodeAt(a++))>255||(r=t.charCodeAt(a++))>255||(o=t.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=n<<16|r<<8|o,i+=Fa[e>>18&63]+Fa[e>>12&63]+Fa[e>>6&63]+Fa[63&e]}return a?i.slice(0,a-3)+"===".substring(a):i},Za=Ha?t=>btoa(t):Va?t=>Buffer.from(t,"binary").toString("base64"):Ka,Ya=Va?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let n=0,r=t.length;n<r;n+=4096)e.push(Wa.apply(null,t.subarray(n,n+4096)));return Za(e.join(""))},Xa=t=>{if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?Wa(192|e>>>6)+Wa(128|63&e):Wa(224|e>>>12&15)+Wa(128|e>>>6&63)+Wa(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return Wa(240|e>>>18&7)+Wa(128|e>>>12&63)+Wa(128|e>>>6&63)+Wa(128|63&e)},Ga=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Ja=t=>t.replace(Ga,Xa),Qa=Va?t=>Buffer.from(t,"utf8").toString("base64"):Ua?t=>Ya(Ua.encode(t)):t=>Za(Ja(t)),$a=(t,e=!1)=>e?qa(Qa(t)):Qa(t);function tc(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ec(t,e){var n=e.pointA,r=e.pointB,o=[r.x-n.x,r.y-n.y],i=[t.x-n.x,t.y-n.y],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),c=Math.sqrt(i[0]*i[0]+i[1]*i[1]),u=(o[0]*i[0]+o[1]*i[1])/(a*c);return Math.sin(Math.acos(u))*c}var nc=function(){return(nc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},rc="http://www.w3.org/1999/xhtml",oc={svg:"http://www.w3.org/2000/svg",xhtml:rc,html:rc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var ic=window.Symbol?window.Symbol("_data"):"_data";window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,Object.create(null);window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame;function ac(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r in t)return t[r]}}function cc(t){if(!t)return!1;var e=t.tagName,n=t.namespaceURI;if(!e||!n)return!1;return(n===rc?document.createElement(e):document.createElementNS(n,e.toLowerCase())).constructor===t.constructor}function uc(t){return String(t.getAttribute("class")||"").split(/\s+/)}function lc(t,e){t.setAttribute("class",[].concat(e).join(" "))}function sc(t){return t instanceof gc&&(t=t.node()),vc((Ba&&t.getScreenCTM?t.getScreenCTM():fc(t))||new za).scale||{x:1,y:1}}function fc(t){if(t instanceof gc&&(t=t.node()),!Ba)return Da(t);return"function"==typeof t.getScreenCTM?t.getScreenCTM():Da(t)}var pc=function(t,e){var n=fc(t),r=new za(n.toString()),o=r.e,i=r.f,a={x:1,y:1};if(e){var c=vc(r).scale;c&&(a.x=c.x,a.y=c.y)}r.e=r.f=0;var u=t.offsetWidth,l=t.offsetHeight,s=[{x:o-u/2,y:i-l/2},{x:o+u/2,y:i-l/2},{x:o+u/2,y:i+l/2},{x:o-u/2,y:i+l/2}],f=s.map((function(t){return(t=nc({},t)).x-=o,t.y-=i,(t=dc(t,r)).x+=o,t.y+=i,t}));return{originPoints:s,points:f,ctm:r}},hc=function(t,e,n){var r=e.points,o=e.ctm,i={x:1,y:1};if(n){var a=vc(o).scale;a&&(i.x=a.x,i.y=a.y)}var c={pointA:r[3],pointB:r[0]},u={pointA:r[0],pointB:r[1]},l=(t.x-c.pointA.x)*(c.pointB.y-c.pointA.y)-(t.y-c.pointA.y)*(c.pointB.x-c.pointA.x),s=(t.x-u.pointA.x)*(u.pointB.y-u.pointA.y)-(t.y-u.pointA.y)*(u.pointB.x-u.pointA.x),f=ec(t,c)*(l>0?-1:1),p=ec(t,u)*(s>0?-1:1);return{x:f/i.x,y:p/i.y}};function vc(t){var e=t.a,n=t.b,r=t.c,o=t.d,i=e*o-n*r,a={rotate:0,scale:{x:1,y:1},skewX:0,skewY:0};if(0!=e||0!=n){var c=Math.sqrt(e*e+n*n);a.rotate=n>0?Math.acos(e/c):-Math.acos(e/c),a.scale={x:c,y:i/c},a.skewX=Math.atan((e*r+n*o)/(c*c))}else if(0!=r||0!=o){var u=Math.sqrt(r*r+o*o);a.rotate=Math.PI/2-(o>0?Math.acos(-r/u):-Math.acos(r/u)),a.scale={x:i/u,y:u},a.skewY=Math.atan((e*r+n*o)/(u*u))}return a}function dc(t,e){return function(t,e,n,r){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),"object"===ja()(t)){var o=t;t=o.x||0,e=o.y||0,n=o.z||0,r=o.w||1}return new Na(t,e,n,r)}(t).matrixTransform(e)}function mc(t,e){e=Object(_a.ensureArray)(e);var n=uc(t);return 0===arguments.length?n:(e.forEach((function(t){t.split(/\s+/).forEach((function(t){-1===n.indexOf(t)&&n.push(t)}))})),lc(t,e),t)}function yc(t,e){e=Object(_a.ensureArray)(e);var n=uc(t);return n.filter((function(t){return-1===e.indexOf(t)})),lc(t,n),t}var gc=function(){function t(e){if(!(this instanceof t))return new t(e);this.nodes=[].concat(e)}return t.prototype.node=function(){return this.nodes[0]||null},t.prototype.prop=function(t,e){var n=this;if(Object(_a.isObject)(t)){var r=t;return Object.keys(r).forEach((function(t){n.prop(t,r[t])})),this}var o=t,i=this.node();if(1===arguments.length)return i&&i[o];var a=Object(_a.asFunc)(e);return this.nodes.forEach((function(t,e){t[o]=a.call(t,e)})),this},t.prototype.memo=function(t,e){var n="_dom_memo_";if(Object(_a.isObject)(t)){var r={},o=t;return Object.keys(o).forEach((function(e){var i="".concat(n).concat(t);r[i]=o[e]})),this.prop(r)}var i="".concat(n).concat(t),a=[].slice.call(arguments);return a[0]=i,this.prop.apply(this,a)},t.prototype.size=function(){return this.nodes.length},t.prototype.data=function(t){var e=this.node();if(e){if(0===arguments.length)return e[ic];var n=Object(_a.asFunc)(t);return this.nodes.forEach((function(t,e){t[ic]=n.call(t,e)})),this}},t.prototype.offsetWidth=function(){var t=this.node();return t?t.offsetWidth:0},t.prototype.offsetHeight=function(){var t=this.node();return t?t.offsetHeight:0},t.prototype.position=function(){var t=this.bounds();return{x:t.x,y:t.y}},t.prototype.bounds=function(){var t=this.node();if(!t)return{x:0,y:0,width:0,height:0};var e=t.getBoundingClientRect();return{x:e.left||e.x,y:e.top||e.y,width:e.width,height:e.height}},t.prototype.relativePosition=function(e){var n=e;n instanceof t||(n=bc(e));var r=this.position(),o=n.position();return{x:r.x-o.x,y:r.y-o.y}},t.prototype.text=function(t){var e=this.node();return e?0===arguments.length?e.textContent:(this.nodes.forEach((function(e,n){e.textContent=Object(_a.asFunc)(t).call(e,n)})),this):""},t.prototype.html=function(t){var e=this.node();return e?0===arguments.length?e.innerHTML:(this.nodes.forEach((function(e,n){e.innerHTML=Object(_a.asFunc)(t).call(e,n)})),this):""},t.prototype.call=function(t){return Object(_a.isFunction)(t)?(this.nodes.forEach((function(e,n){t.call(e,n)})),this):this},t.prototype.reAppend=function(){return this.nodes.forEach((function(t){var e=t.parentElement;e&&e.appendChild(t)})),this},t.prototype.attr=function(t,e){var n=this;if(Object(_a.isObject)(t)){var r=t;return Object.keys(r).forEach((function(t){n.attr(t,r[t])})),this}var o=this.nodes,i=this.node(),a=t;if(1===arguments.length)return i?i.getAttribute(a):null;if(2===arguments.length){var c=Object(_a.asFunc)(e);return o.forEach((function(t,e){var n=c.call(t,e);null!==n?t.setAttribute(a,n):t.removeAttribute(a)})),this}return i?i.getAttributeNames().map((function(t){return{name:t,value:i.getAttribute(t)}})):null},t.prototype.css=function(t,e){var n=this;if(Object(_a.isObject)(t)){var r=t;return Object.keys(r).forEach((function(t){n.css(t,r[t])})),this}var o=this.nodes,i=o[0],a=t;return 1===arguments.length?i?i.style[a]:null:2===arguments.length?(o.forEach((function(t,n){var r=Object(_a.asFunc)(e,n);t.style[a]=r.call(t)})),this):i?Object.assign({},i.style):{}},t.prototype._clazz=function(t,e){var n=Object(_a.asFunc)(e),r=this.nodes;return 0===arguments.length?mc(r[0]):(r.forEach((function(e,r){n.call(e,r)?yc(e,t):mc(e,t)})),this)},t.prototype.clazz=function(t,e){if(0===arguments.length)return this._clazz();if(1===arguments.length){if(!t)return!1;t=[].concat(t);var n=this._clazz();return t.length===n.length&&t.every((function(t){return n.indexOf(t)>=0}))}return this._clazz(t,!e)},t.prototype.createElement=function(e,n){"svg"===String(e).toLowerCase()&&(n=oc.svg),n=n&&oc[n]||n;var r=this.nodes[0];return new t(document.createElementNS(n||r&&r.namespaceURI||oc.html,e))},t.prototype.append=function(e,n){var r=this.node();if(e instanceof t)return e.nodes.forEach((function(t){r.appendChild(t)})),e;if(cc(e))return this.append(new t(e));var o=this.createElement(e,n);return this.append(o)},t.prototype.select=function(e){var n=this.nodes,r=[];return n.some((function(t){var n=bc(e,t);if(n.size()>0)return r=r.concat(n.nodes),!0})),new t(r)},t.prototype.selectAll=function(e){var n=this.nodes,r=[];return n.forEach((function(t){var n=function(t,e){if(t instanceof gc)return t;"string"==typeof t&&(t=[].slice.call((e||document).querySelectorAll(t)));return new gc(t)}(e,t);r=r.concat(n.nodes)})),new t(r)},t.prototype.remove=function(){this.nodes.forEach((function(t){wc(t)}))},t.prototype.empty=function(){this.nodes.forEach((function(t){Cc(t)}))},t}();function bc(t,e){return t instanceof gc?t:("string"==typeof t&&(t=(e||document).querySelector(t)),new gc(Object(_a.ensureArray)(t)[0]))}function xc(t,e){var n=e,r={x:ac(t,["clientX","x"])||0,y:ac(t,["clientY","y"])||0};if(n instanceof gc&&(n=n.node()),!cc(n))return r;var o=n.getBoundingClientRect();return r.x=r.x-(ac(o,["left","x"])||0),r.y=r.y-(ac(o,["top","y"])||0),r}function Ec(t){if(!t)return[];return t instanceof gc?t.nodes:[].concat(t)}function wc(t){if(t instanceof gc)return t.remove();Object(_a.isFunction)(t.remove)?t.remove():t.parentElement&&t.parentElement.removeChild(t)}function Cc(t){if(t instanceof gc)return t.empty();for(;t.firstChild;)wc(t.firstChild)}function Oc(t,e,n){var r=Ec(t),o=null,i=n;return i&&i instanceof gc&&(i=i.node()),r.some((function(t){var n=function(t,e,n){for(var r=Object(_a.asFunc)(e);t;){if(r.call(null,t))return t;if(t=t.parentElement,n&&("function"==typeof n?Object(_a.safeExecute)(n,null,[t]):n===t))return null}return null}(t,e,i);if(n)return o=n,!0})),o}function kc(t){var e=0,n=0;if("number"==typeof t.pageX)e=t.pageX,n=t.pageY;else{var r=(t.changedTouches||[])[0]||(t.touches||[])[0];r&&(e=r.clientX||r.pageX,n=r.clientY||r.pageY)}try{"number"!=typeof t.clientX&&(t.clientX=e),"number"!=typeof t.clientY&&(t.clientY=n),"number"!=typeof t.pageX&&(t.pageX=e),"number"!=typeof t.pageY&&(t.pageY=n)}catch(t){console.warn(t)}return t.tourchEvent=!0,t}var _c,Rc=function(t,e,n){var r=(n||{}).maxDistance,o=void 0===r?5:r,i=null,a=function(t){var e=kc(t);i=xc(e)},c=function(t){var n=kc(t),r=xc(n);i&&tc(i,r)<=o&&e(n),i=null};return t.addEventListener("touchstart",a),t.addEventListener("touchend",c),function(){t.removeEventListener("touchstart",a),t.removeEventListener("touchend",c)}},Sc=!1,Ac=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return Sc;Sc=!!t[0]},Mc=(n(28),function(t){function e(e){return"".concat(t,"-").concat(e)}return{prefixName:e,prefixClassName:function(t,n){return 1===arguments.length&&(n=t,t=""),n?n.split(/\s+/).map((function(n){return e("".concat(t?t+"-":"").concat(n))})).join(" "):n||""}}}("ky-dom")),Tc=(Mc.prefixName,Mc.prefixClassName),Pc=function(){return(Pc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},jc=Object(_a.findUniqueKey)("ResizeDataKey");!function(t){t.Top="Top",t.Right="Right",t.Bottom="Bottom",t.Left="Left"}(_c||(_c={}));var zc="Vertical",Nc="Horizontal",Bc={enabled:!0,resizing:!1},Ic={isResizing:function(){return Bc.resizing},enable:function(t){return 0===arguments.length?Bc.enabled:Bc.enabled=!!t},create:function(){return null}};function Lc(t){return t?"string"==typeof t?document.querySelector(t):"function"==typeof t?t():t:document.body}var Dc=Object(_a.findUniqueKey)("ResizeElements");function Hc(t){if(!t)return null;var e=t.attr(Dc);return e||(e=new Vc,t.attr(Dc,e)),e}var Vc=function(){function t(){this._data={},this._values=[]}return t.prototype.has=function(t){return this._data.hasOwnProperty(t)},t.prototype.remove=function(t){delete this._data[t],this._resetValues()},t.prototype._resetValues=function(){this._values=Object.values(this._data).sort((function(t,e){var n=t&&t[jc],r=e&&e[jc],o=n&&n.index,i=r&&r.index;return o*=1,i*=1,Number.isNaN(o)&&(o=-99999),Number.isNaN(i)&&(i=-99999),i-o}))},t.prototype.get=function(t){return this.has(t)?this._data[t]:null},t.prototype.put=function(t,e){var n=this._data;null!=e?(n[t]=e,this._resetValues()):this.remove(t)},t.prototype.values=function(){return[].concat(this._values)},t.prototype.size=function(){return this._values.length},t}();var Uc={points:[0,1],getLine:function(t){return{pointA:t._points[this.points[0]],pointB:t._points[this.points[1]]}},getCursorStyle:function(t,e){return function(t){var e=t.pointA,n=t.pointB,r=t.rotate,o=void 0===r?90:r,i=t.size||16,a=t.color||"#000",c=[n.x-e.x,n.y-e.y],u=c[0]/Math.sqrt(c[0]*c[0]+c[1]*c[1]),l=180*Math.acos(u)/Math.PI;c[1]<0&&(l=180-l),l+=o;var s=i,f=i,p=new za([1,0,0,1,512,512]),h=new za([1,0,0,1,-512,-512]),v=(new za).rotate(l);v=p.multiply(v).multiply(h);var d='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'.concat(s,'" height="').concat(f,'">\n    <path transform="matrix(').concat(v.a," ").concat(v.b," ").concat(v.c," ").concat(v.d," ").concat(v.e," ").concat(v.f,')" d="M768 341.333333l170.666667 170.666667-170.666667 170.666667v-128H256v128l-170.666667-170.666667 170.666667-170.666667v128h512V341.333333z" fill="').concat(a,'"></path>\n</svg>'),m=$a(d);return"url(data:image/svg+xml;base64,".concat(m,") ").concat(s/2," ").concat(f/2,",move")}(this.getCursorOptions(t,e))},getCursorOptions:function(t,e){var n,r,o=this.getLine(t);return Pc(Pc(Pc({},o),{color:null===(n=t.resizeOptions)||void 0===n?void 0:n.cursorColor,size:null===(r=t.resizeOptions)||void 0===r?void 0:r.cursorSize}),e)},test:function(t){var e=function(t){return(null==t?void 0:t.hitSize)||5}(t.resizeOptions);return function(t,e,n){var r=e.pointA,o=e.pointB,i=[o.x-r.x,o.y-r.y],a=[t.x-r.x,t.y-r.y],c=Math.sqrt(i[0]*i[0]+i[1]*i[1]),u=Math.sqrt(a[0]*a[0]+a[1]*a[1]),l=(i[0]*a[0]+i[1]*a[1])/(c*u);return l<0?tc(r,t)<=n:u*l>c?tc(o,t)<=n:Math.sin(Math.acos(l))*u<=n}({x:t.clientX,y:t.clientY},this.getLine(t),e)}};function Fc(t){return Object.assign(Object.create(Uc),t)}var Wc=[Fc({type:_c.Bottom,group:zc,pos:{x:0,y:1},points:[3,2],compute:function(t){return{height:t.my}}}),Fc({type:_c.Top,group:zc,pos:{x:0,y:-1},points:[0,1],compute:function(t){return{y:t.my}}}),Fc({type:_c.Right,group:Nc,pos:{x:1,y:0},points:[1,2],compute:function(t){return{width:t.mx}}}),Fc({type:_c.Left,group:Nc,pos:{x:-1,y:0},points:[0,3],compute:function(t){return{x:t.mx}}})];function qc(t,e){var n={},r={};if(!t)return r;if(t.tx&&(n.tx=t.tx,r.width="".concat(t.width,"px")),t.ty&&(n.ty=t.ty,r.height="".concat(t.height,"px")),t.tw&&(r.width="".concat(t.width,"px")),t.th&&(r.height="".concat(t.height,"px")),t.tx||t.ty)if(e){var o=function(t){t instanceof gc&&(t=t.node());var e=window.getComputedStyle(t).transform;return new za(e)}(e);o.e+=t.tx||0,o.f+=t.ty||0,r.transform="".concat(o)}else r.transform="translate3d(".concat(t.tx||0,"px,").concat(t.ty||0,"px,0)");return r}var Kc=function(){var t,e,n,r,o,i,a,c=Tc("global-resize-render"),u={showVertex:!1,showBorder:!0},l={x:0,y:0};function s(){if(!t){t=function(t,e){if(cc(t))return new gc(t);var n=(e=oc[t]||e)?document.createElementNS(e,t):document.createElement(t);return new gc(n)}("div").clazz(c,!0);var a=(e=t.append("svg")).append("g");n=a.append("path"),o=a.append("rect"),r=a.append("text").attr("text-anchor","middle").attr("alignment-baseline","middle"),i=e.createElement("g");for(var l=0;l<4;l++)i.append("circle").attr("r",5)}u.showVertex&&e.append(i)}return{config:function(t){t&&(u.showVertex=!!t.showVertex,u.showBorder=!!t.showBorder)},mount:function(e){s(),(e=e||document.body).appendChild(t.node()),a=function t(e){var n=window.getComputedStyle(e);if(["relative","absolute","fixed"].indexOf(n.position)>=0)return e;var r=e.parentElement;return r?t(r):e}(e);var n=document.documentElement,r=a.getBoundingClientRect(),o=sc(a),i=o.x,c=o.y;l.x=(a===n?0:a.scrollLeft)-r.x/(i||1),l.y=(a===n?0:a.scrollTop)-r.y/(c||1)},unmount:function(){var e=t.node();e.parentNode&&e.parentNode.removeChild(e),t.css({display:"none"}),a=null,u.showVertex=!1,u.showBorder=!0,i.remove()},apply:function(a){var c=a||{},s=c.className,f=c.style,p=c.points;s&&t.clazz(s,!0),t.css(f);var h=0,v=0,d=0,m=0,y=sc(e.node()),g=y.x,b=y.y,x=l.x,E=l.y,w="M"+(p=p.map((function(t){return Pc(Pc({},t),{x:t.x/(g||1),y:t.y/(b||1)})}))).map((function(t,e){var n=t.x,r=t.y;0===e?(h=v=n,d=m=r):(h=Math.min(h,n),v=Math.max(v,n),d=Math.min(d,r),m=Math.max(m,r));var o=r+E;return"".concat(n+x," ").concat(o)})).join("L")+"Z";e.attr("width",v+x+5).attr("height",m+E+5),n.attr("d",w).css({stroke:u.showBorder?"":"transparent"});var C=0|tc(p[0],p[1]),O=0|tc(p[1],p[2]),k=x+(h+v)/2|0,_=E+(d+m)/2|0;r.attr("x",k).attr("y",.5+(0|_)).text("".concat(C," * ").concat(O));var R=r.node().getBBox(),S=R.height,A=R.width+6,M=S+2;o.attr("width",A).attr("height",M).attr("x",k-A/2).attr("y",.5+(_-M/2|0)).attr("rx",M/2).attr("ry",M/2),u.showVertex?i.selectAll("circle").attr("cx",(function(t){return p[t].x+x})).attr("cy",(function(t){return p[t].y+E})).attr("opacity","1"):i.selectAll("circle").attr("opacity","0")}}}(),Zc=function(){var t=null,e=function(e){return void 0===e&&(e=!0),!t&&e&&((t=document.createElement("div")).className=Tc("overlay"),Object.assign(t.style,{position:"fixed",zIndex:9999,left:"0px",top:"0px",right:"0px",bottom:"0px"})),t};return function(){return{show:function(t){var n=e(),r=t||document.body;n.parentElement!==r&&r.appendChild(n)},hide:function(){var t=e(!1);(null==t?void 0:t.parentElement)&&t.parentElement.removeChild(t)}}}}(),Yc=Object(_a.findUniqueKey)("ResizeEventManager"),Xc=Tc("resizing-active"),Gc=Tc("resize-cursor");function Jc(t){var e=(t=t||document.body)[Yc];if(e)return e;e=new Ta({eventOptions:{touchmove:{passive:!1},touchstart:{passive:!1}}}),t[Yc]=e;var n=Hc(e),r=function(){return e.getProxyElement()},o=function(t){Bc.resizing=!1;var n=p.pendingResize,o=r();if(null==o||o.removeAttribute(Xc),null==s||s.hide(),n){var i=n.resizeTarget,a=n.resizeData,u=i.element,l=i.options;if(t.resizeElement=u,Object(_a.safeApply)(l.onResizeEnd,[t,a]),l.overlay&&l.syncElementResize&&a){var f=qc(a,u);Object.assign(u.style,f)}}!function(t){c.touchable()?t.register("touchend:resizeEnd",null):t.register("mouseup:resizeEnd,mouseleave:resizeEnd",null)}(e),p.reset(),Kc.unmount()},i=null,a=function(){var t=new Set,e=r();e.removeAttribute(Gc),t.add(e),n.values().forEach((function(e){var n=e[jc],r=f(n);r&&!t.has(r)&&(r.removeAttribute(Gc),t.add(r))}))},u=function(e,n){var o="";if(i||((i=document.createElement("style")).setAttribute("type","text/css"),i.setAttribute("rel","stylesheet")),e.length){var c=r();i.parentElement!==c&&c.appendChild(i)}if(e.length>1){var u=void 0,l=void 0;e[0].group===zc?(u=e[0],l=e[1]):(u=e[1],l=e[0]),o=u.getCursorStyle(n,{rotate:u.pos.y*l.pos.x*45})}else e.length>0&&(o=e[0].getCursorStyle(n));if(o){t.setAttribute(Gc,"");var s=f(null==n?void 0:n.resizeOptions);null==s||s.setAttribute(Gc,"")}else a();i.textContent=o?"[".concat(Gc,"]{cursor:").concat(o,";"):""},l=function(t){var e=null,o=[],i=null;return Ic.enable()&&n.values().some((function(n){var a=function(t,e){var n={items:[]};if(!Ic.enable())return n;var r=xc(t),o=e[jc];if(!o)return n;if(!Object(_a.getBlnValue)(o.enabled,[t]))return n;var i=o.modes,a=function(t){var e="function"==typeof t?t():t;return e?[].concat(e):[]}(e);if(!a.length)return n;return a.some((function(a){var c,u,l=bc(a).bounds();if(c=r,u={x:l.x-20,y:l.y-20,width:l.width+40,height:l.height+40},!(c.x>=u.x&&c.x<=u.x+u.width&&c.y>=u.y&&c.y<=u.y+u.height))return!1;var s=pc(a),f=s.points,p=s.originPoints,h={clientX:r.x,clientY:r.y,points:p,_points:f,resizeOptions:o},v={},d=Wc.filter((function(n){return!!(null==i?void 0:i.some((function(r){return"function"==typeof r?r({e:t,resizeItem:e,type:n.type}):r===n.type})))&&(!(v[n.group]||!n.test(h))&&(v[n.group]=n,!0))}));return d.length>0?(n.items=d,n.options=h,n.resizeTarget={element:a,options:o},!0):void 0})),n}(t,n),c=a.items,u=a.options,l=a.resizeTarget;if(c.length>0){e=l;var s=l.options;return s.selfTrigger?(o=function(t,e){var n=e.element;return Oc(t.native?t.native.target:t.target,(function(t){if(t[jc])return!!t}),(function(t){return t===r()}))===n}(t,l)?c:[],i=u,!0):(s.through||function(t,e){var n=Oc(t.native?t.native.target:t.target,(function(t){if(t[jc])return!!t}),(function(t){return t===r()}));if(!n)return!0;var o=n[jc].index||0;return(e.options.index||0)>=o||!!Oc(e.element,(function(t){if(t===n)return!!t}),(function(t){return t===r()}))}(t,l)?(o=c,i=u):o=[],!0)}})),{resizeTarget:o.length>0?e:null,hitItems:o,options:i}};!function(t){var e=function(){return t.getProxyElement()};t.register("mousedown:resizeStart",e),t.register("touchstart:resizeStart",(function(){return e}),kc)}(e),function(t){var e=function(){return t.getProxyElement()};c.touchable()?t.register("touchmove:resize",e,kc):t.register("mousemove:resize",e)}(e);var s=null,f=function(t){return(null==t?void 0:t.cursorElement)?"function"==typeof t.cursorElement?t.cursorElement():t.cursorElement:null},p={pendingResize:null,reset:function(){p.pendingResize=null}};return e.on("resizeStart",(function(t){if(Ic.enable()){var n=l(t),o=n.resizeTarget;if(o){t.preventDefault(),t.stopPropagation();var i=n.hitItems,a=n.options,f=o.options,h=o.element;if(0!==i.length){if(t.resizeElement=h,f.cursorOverlay&&(s=s||(s=Zc())).show(e.getProxyElement()),Object(_a.safeApply)(f.onResizeStart,[t]),!t.cancel){var v=function(t,e,n){var r=pc(e),o=r.originPoints,i=r.ctm,a=r.points;return{ctm:i,position:hc(t,r,n),points:a,originPoints:o}}(xc(t),h),d=vc(v.ctm).scale,m=xc(t);p.pendingResize={resizeTarget:o,hitItems:i,clientInfo:v,originWidth:h.offsetWidth,originHeight:h.offsetHeight,startEventPosition:m,lastEventPosition:m,scale:d||{x:1,y:1}},u(i,a),function(t){var e=function(){return t.getProxyElement()};c.touchable()?t.register("touchend:resizeEnd",e,kc):t.register("mouseleave:resizeEnd,mouseup:resizeEnd",e)}(e),Kc.config({showVertex:f.overlayVertex,showBorder:!1!==f.overlayBorder}),Kc.mount(r());var y=r();null==y||y.setAttribute(Xc,""),Bc.resizing=!0}}else p.reset()}}})),e.on("resize",(function(t){if(Ic.enable()){var e=xc(t),n=p.pendingResize;if(n){t.preventDefault();var r=n.resizeTarget,i=r.element,c=r.options;if(t.resizeElement=i,Object(_a.safeApply)(c.onBeforeResize,[t,[e]]),t.cancel)o(t);else{var s=n.lastEventPosition,f=0,h=0;if(s&&(f=e.x-s.x,h=e.y-s.y),n.lastEventPosition=e,0!==f||0!==h){var v=n.originWidth,d=n.originHeight,m=n.scale,y=n.hitItems,g=n.clientInfo,b=g.points,x=g.position,E=g.ctm,w=hc(xc(t),g),C={tx:0,ty:0,tw:0,th:0,x:b[0].x,y:b[0].y,dx:f,dy:h,width:0,height:0,originWidth:v,originHeight:d,modes:{}},O={mx:w.x-x.x,my:w.y-x.y},k={},_={},R=new Set,S=new Set;y.forEach((function(t){var e=t.compute(O),n=e.x,r=void 0===n?0:n,o=e.y,i=void 0===o?0:o,a=e.width,c=void 0===a?0:a,u=e.height,l=void 0===u?0:u;C.tx+=r/m.x,C.ty+=i/m.y,C.tw+=c/m.x,C.th+=l/m.y,k[t.group]=!0,_[t.type]=!0,t.points.forEach((function(e){t.group===Nc?R.add(e):S.add(e)}))})),C.width=v+C.tw-C.tx,C.height=d+C.th-C.ty,C.modes=_,Object(_a.safeApply)(c.onResize,[t,C]),t.cancel&&o(t),n.resizeData=C,E.e=E.f=0;var A;if((c.overlay||c.showResizeInfo)&&(A=b.map((function(t,e){var n={x:t.x,y:t.y};if(!R.has(e)&&!S.has(e))return n;var r=dc({x:R.has(e)?O.mx/m.x:0,y:S.has(e)?O.my/m.y:0},E),o=r.x,i=r.y;return n.x+=o,n.y+=i,n})),Kc.apply({className:c.overlayClassName,points:A,style:{display:"block"}})),!c.overlay&&c.syncElementResize){var M=qc(C,i);Object.assign(i.style,M)}}}}else{var T=l(t),P=T.hitItems,j=T.options;u(P,j)}}else a()})),e.on("resizeEnd",(function(t){o(t)})),e.mount(t),e}var Qc=function(){return(Qc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},$c={index:0,hitSize:5,selfTrigger:!1,through:!1,enabled:!0,onResizeStart:null,onResize:null,onResizeEnd:null,syncElementResize:!1,overlay:!0,overlayClassName:"",overlayVertex:!1,modes:[_c.Top,_c.Bottom,_c.Left,_c.Right],autoDestroyEventManager:!0},tu=1;Ic.create=function(){var t,e,n=null,r=tu++,o=Qc({},$c);function i(){if(n){var e=Hc(n);if(e.get(r)===t)return;t&&e.put(r,t)}}return{apply:function(t,e){this.updateOptions(e),this.updateResizeItem(t)},updateResizeItem:function(e){e!==t&&(t&&delete t[jc],(t=e)[jc]=o,i())},updateOptions:function(t){if(!n||t&&t!==e){e=t,Object.assign(o,t);var a=Lc(o.container);if(o.container=a,o.overlayContainer=Lc(o.overlayContainer||a),n){if(n.getProxyElement()!==a)Hc(n).remove(r),n=Jc(a),i()}else n=Jc(a)}},destroy:function(){if(n){var i=Hc(n);t=null,e=null,o=Qc({},$c),i.remove(r),o.autoDestroyEventManager&&0===i.size()&&function(t){var e=t.getProxyElement();t.unmount(),e&&delete e[Yc]}(n),n=null}}}},Object.freeze(Ic);Object(_a.findUniqueKey)("EventManager"),Object(_a.findUniqueKey)("RotationTargetOpt");function eu(t,e){return"string"==typeof t?(e||document).querySelector(t):"function"==typeof t?t():t}var nu=function(){return(nu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var ru={scaleEnabled:!0,dragEnabled:!0},ou={dragEnabled:!0,scaleEnabled:!0,maxZoom:10,minZoom:.01,contextZoom:void 0};function iu(t,e,n){var r=n.zoomElement,o=e.getProxyElement();return r?eu(r):o}var au=function(t,e){return void 0===e&&(e=[]),"function"==typeof t?t.apply(void 0,e):!!t},cu=function(t,e,n){return Oc(t.target,(function(t){var n;if(t){var r=null===(n=t.getAttribute)||void 0===n?void 0:n.call(t,"data-zoom-ignore");if(!r)return;return!!(r=+r&e)}}),(function(t){return t===n}))},uu=function(t,e,n){if(t){var r=[].concat(t);return!!Oc(e.target,(function(t){return r.some((function(e){return n=t,"function"==typeof(r=e)?!!r(n):"string"==typeof r?n.matches(r):!!r&&r===n;var n,r}))}),(function(t){return t===n}))}return!1},lu=(function(){function t(t){this.zoomState={tx:0,ty:0,scale:1},this.options=nu(nu({},ou),{passive:!1}),Object.assign(this.options,t),this.eventManager=new Ta(this.options),this.initEvents()}t.prototype.syncZoomState=function(t){if(0===arguments.length)return nu({},this.zoomState);Object.assign(this.zoomState,t)},t.prototype.syncOptions=function(t){if(0===arguments.length)return nu({},this.options);Object.assign(this.options,t)},t.prototype.mount=function(t){this.eventManager.mount(eu(t))},t.prototype.initEvents=function(){var t=this.eventManager,e=function(){return t.getProxyElement()},n=this.options,r=this.zoomState,o={startPos:null,moved:!1,zoomElement:null,reset:function(){o.startPos=null,o.moved=!1,o.zoomElement=null}},i=function(e){return!!cu(e,1,t.getProxyElement())||(!!uu(n.dragExcludes,e,t.getProxyElement())||(!ru.dragEnabled||!au(n.dragEnabled,[e])||void 0))},a=function(e){return!!cu(e,2,t.getProxyElement())||(!!uu(n.scaleExcludes,e,t.getProxyElement())||(!ru.scaleEnabled||!au(n.scaleEnabled,[e])||void 0))};if(Ac()){t.register("touchstart:dragStart",(function(e){if(!(e.touches.length>1||i(e)))return t.getProxyElement()}),(function(t){return kc(t)})),t.register("touchmove:dragMove",(function(e){if(!(e.touches.length>1))return t.getProxyElement()}),(function(t){return kc(t)})),t.register("touchend:dragEnd",(function(){return t.getProxyElement()}),(function(t){return kc(t)}));var c={start:{p1:{x:0,y:0},p2:{x:0,y:0},d:0},last:{p1:{x:0,y:0},p2:{x:0,y:0},d:0},scaleRunning:!1};t.register("touchmove:scale",(function(e){var n=e;if(2===n.touches.length&&!a(e)){if(c.scaleRunning)return t.getProxyElement();c.scaleRunning=!0;var r=xc(n.touches[0]),o=xc(n.touches[1]);c.start={p1:r,p2:o,d:tc(r,o)}}}),(function(t){var e=t,n=Object.create(t),r=e.touches[0],o=e.touches[1],i=xc(r),a=xc(o),u=tc(i,a),l=tc(c.last.p1,c.last.p2),s=c.start,f={x:(s.p1.x+s.p2.x)/2,y:(s.p1.y+s.p2.y)/2},p=u-l;return n.clientX=n.x=f.x,n.clientY=n.y=f.y,n.preventDefault=function(){t.preventDefault()},Math.abs(p)>1?(n.deltaY=p>0?-2:2,c.last={p1:i,p2:a,d:u}):n.deltaY=0,n.deltaMode=1,n})),t.register("touchend:scaleEnd",(function(){c.scaleRunning=!1}))}else t.register("mousedown:dragStart",(function(e){if(2!==e.button&&!i(e))return t.getProxyElement()})),t.register("mousemove:dragMove mouseup:dragEnd mouseleave:dragEnd",(function(){return t.getProxyElement()})),t.register("wheel:scale",(function(e){if(!a(e))return t.getProxyElement()}));t.on("dragStart",(function(r){if(Object(_a.safeApply)(n.onZoomDragStart,[r]),r.cancel)Object(_a.safeApply)(n.onZoomDragEnd,[r]);else{var i=iu(e(),t,n);o.startPos=xc(r,i),o.zoomElement=i}})),t.on("dragMove",(function(t){if(o.startPos)if(ru.dragEnabled){o.moved=!0;var e=o.zoomElement,i=o.startPos,a=xc(t),c=bc(e).position(),u=a.x-i.x,l=a.y-i.y,s=r.tx||0,f=r.ty||0;s+=u-c.x,f+=l-c.y;var p=nu({},r);p.tx=s,p.ty=f,Object(_a.safeApply)(n.onZoomDragMove,[t,nu(nu({},p),{scale:p.scale||1})]),Object(_a.safeApply)(n.onZoomChange,[t,nu(nu({},p),{scale:p.scale||1})]),t.cancel?(o.reset(),Object(_a.safeApply)(n.onZoomDragEnd,[t])):Object.assign(r,p)}else o.reset()})),t.on("dragEnd",(function(t){o.reset(),Object(_a.safeApply)(n.onZoomDragEnd,[t])})),t.on("scale",(function(o){var i=function(t){var e=-t.deltaY;return 1===t.deltaMode?.05*e:e*(t.deltaMode?1:.01)}(o);if(i){Object(_a.safeApply)(n.onZoomScaleStart,[o,nu({},r)]);var a=bc(iu(e(),t,n)),c=bc(function(){var r=n.canvasElement,o=t.getProxyElement();return r?"function"==typeof r?r():"string"==typeof r?e().querySelector(r):r&&"object"===ja()(r)&&r instanceof Element?r:o:o}()),u=Math.pow(2,i),l=function(t,e){var n=t.canvasElement,r=t.zoomElement,o=t.zoomObj,i=t.zoomPoint,a=t.scale;e=Object.assign({},ou,e);var c=xc(i,r),u=n.position(),l=r.relativePosition(n);o.scale*a>e.maxZoom?a=e.maxZoom/o.scale:o.scale*a<e.minZoom&&(a=e.minZoom/o.scale);var s=e.contextZoom||sc(r.node().parentNode);s="function"==typeof s?s():s;var f=Object(_a.scaleObject)(s),p=f.x,h=f.y,v=l.x-o.tx*p,d=l.y-o.ty*h,m=a,y=i.x-c.x*m-v*m-u.x,g=i.y-c.y*m-d*m-u.y;return o.tx=y/p,o.ty=g/h,o.scale*=a,o}({canvasElement:c,zoomElement:a,zoomObj:{tx:r.tx||0,ty:r.ty||0,scale:r.scale||1},scale:u,zoomPoint:xc(o)},n);o.cancel||Object.assign(r,l),o.cancel||(Object(_a.safeApply)(n.onZoomScale,[o,nu({},r)]),Object(_a.safeApply)(n.onZoomChange,[o,nu({},r)])),o.cancel||t.getProxyElement()===document.body&&n.passive||o.preventDefault()}}))},t.prototype.destroy=function(){this.eventManager.unmount()}}(),{ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",shift:"shiftKey"});Object.values(lu);var su=function(){function t(e){f()(this,t),this.editor=e}return h()(t,[{key:"destroy",value:function(){var t=this._container;null!=t&&t.parentNode&&t.parentNode.removeChild(t),this._deconnect&&(this._deconnect(),this._deconnect=null),this._container=null,this._target=null}},{key:"setVisible",value:function(t){this._container&&Object.assign(this._container.style,{opacity:t?"1":"0"})}},{key:"executeDelete",value:function(){if(this.isActive()){var t=this._target;if(this.destroy(),!t)return null;var e=t.previousElementSibling,n=t.nextElementSibling,r=n,o=0;if(ir(t),Br(e)&&Br(n)&&(e.textContent?n.textContent||(r=e,o=e.textContent.length,ir(n)):ir(e)),Br(r))try{var i=this.editor.commandManager.editor.newRange();i.startElement=r,i.startOffset=o,i.select()}catch(t){console.warn("range losing !")}return t}}},{key:"getTarget",value:function(){return this._target}},{key:"getContainer",value:function(){return this._container}},{key:"isActive",value:function(){return!!this._container}},{key:"setActive",value:function(t,e){var n=this;if(t!==this._target)if(t){this.destroy();var o=r.create(k.createElement(st)).css({"will-change":"transform,left,top,width,height"});e&&o.append(e),this._container=o.node(),this._target=t;var i=this.editor.getWrapper(),a=function(){if(n._container){var e=r.getCTM(t,i),a=t.offsetWidth,c=t.offsetHeight;o.css({left:-a/2+"px",top:-c/2+"px",width:a+"px",height:c+"px",transform:e})}};a(),i.appendChild(this._container),this._deconnect=r.observeViewport(this.editor.getContainer(),(function(){a()}),{throttle:0})}else this.destroy()}}]),t}();function fu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pu(t){var e=Zr.current(t);if(e)return hu(t.getContainer(),e.startContainer,e.endContainer)?e:null}function hu(t,e,n){for(var r=e;r&&r!==t;){if(Ur(r))return!1;if(k.isValidElement(r))break;r=r.parentNode}if(e&&(!r||r!==t&&!t.contains(r)))return!1;for(r=n;r&&r!==t;){if(Ur(r))return!1;if(k.isValidElement(r))break;r=r.parentNode}return!(n&&(!r||r!==t&&!t.contains(r)))}var vu=Object(_a.findUniqueKey)("unmount"),du=Object.create(null),mu=function(t,e){var n=new URL(t);return"api.internal"!==n.hostname?t:(n.hostname="127.0.0.1",e.docId&&n.searchParams.set("docId",e.docId),e.localServerPort&&(n.port=String(e.localServerPort)),n.toString())},yu=function(){function t(e){f()(this,t),this._data={},this._container=null,this._wrapper=null,this.parser=new ga,this.selectState=new su(this),this._customUnmountElements=[],this.customElementMounts=Object.create(null),this.editMode=!1,this.loggedCommands={bold:!0,italic:!0,link:!0,style:!0,list:!0,insertBox:!0,insertImage:!0,insertTable:!0,tableSelection:!0,blockStyle:!0,sup:!0,sub:!0,stroke:!0,underline:!0,overline:!0,header:!0,paragraph:!0,insertHr:!0,insertCheckbox:!0,quote:!0,resetText:!0,keydown:!0,insertCustom:!0},this._selectionEnabled=!1,this.commandFilter=new Qr,this.blobs=new Map,this.localUrlSchema="local://",this.behaviorConfig=new Di,this.extensionsApi={},this.settings={};var n=e||{},r=n.log,o=void 0===r||r,i=n.editMode,a=void 0===i||i,c=n.localServerPort,u=n.settings,l=n.urlTransformer,s=void 0===l?mu:l;this.editMode=!!a,this.updater=new ka(this),this.createUI(),this.initParser(),this.baseEvents=new Ea(this),this.events=new Ea(this),this._log=o,this.actionManager=new Qr,this.commandManager=new kt(this),this.localServerPort=c,this._urlTransformer=s,this.cursor=new ha(this),this.init(),this.applySettings(u)}return h()(t,[{key:"init",value:function(){var t;t=this.actionManager,gi.forEach((function(e){var n=e.type;e.actions.forEach((function(e){t.add(n,e)}))})),function(t){if(t.baseEvents.install(Li),t.isEditMode()){var e=t.events;e.install(Ni),e.install(bi),e.install(xi),e.install(Oi),e.install(Ri),e.install(Si),e.install(Ai),e.install(Mi),e.install(Ti),e.install(Pi),e.install(Ii),ji(t),t.getContainer().addEventListener("scroll",(function(e){t.baseEvents.emit("scroll",null,[e])}))}}(this),this.syncUI()}},{key:"selectionEnabled",value:function(t){if(0===arguments.length)return this._selectionEnabled;this._selectionEnabled=!!t}},{key:"saveRangeContext",value:function(){var t=pu(this);if(t)return this._range=t}},{key:"newRange",value:function(t){return new Zr(this,t)}},{key:"getNormalizedRange",value:function(){return pu(this)||this._currentRange}},{key:"removeRanges",value:function(){return Zr.removeAllRanges(this)}},{key:"saveLog",value:function(){this._log&&this.commandManager.execCommand("log","push")}},{key:"blur",value:function(){this.cursor.update(null),this.selectState.setActive(null)}},{key:"execCommand",value:function(t,e,n){var r=this,o=this.commandFilter,i=Array.prototype.slice.call(arguments),a=null;return this.execute((function(){o.execute(t,{editor:r,params:e},(function(e){r.loggedCommands[t]&&r.saveLog(),a=r.commandManager.execCommand.apply(r.commandManager,i),n&&n(e)}))})),a}},{key:"execute",value:function(t){if("function"!=typeof t)return t;var e=this.getNormalizedRange();e||(e=this._range);try{return this._currentRange=e,t()}finally{this._currentRange=null}}},{key:"checkUnmountCustomElements",value:function(){var e=this;this._pendingCheckUnmount||(this._pendingCheckUnmount=lo((function(){e._pendingCheckUnmount=null;var n=e._customUnmountElements,r=e.getContainer();r&&(e._customUnmountElements=n.filter((function(e){return!!r.contains(e)||(t.unmountCustomElement(e),!1)})))})))}},{key:"mountEvents",value:function(){var t=this.getWrapper();this.isEditMode()?this.events.mount(t):this.events.unmount()}},{key:"render",value:function(t){var e=this.getWrapper();this.cursor&&e.appendChild(this.cursor.render()),this._render(t);var n,r,o=this.getContainer();k.isElementInstanceOf(o.firstElementChild,w)||(n=o,r=Cr(),rr.unshiftNode(n,r)),o.setAttribute("tabindex","-1"),this.baseEvents.mount(e),this.mountEvents(),this.events.emit("didMount")}},{key:"defineCustomMount",value:function(t,e){if("function"!=typeof e)throw new TypeError("mount is not a function type!");this.customElementMounts[t]=e}},{key:"createUI",value:function(){var t=this._wrapper=document.createElement("div");t.className=Ko("render");var e=this._container=document.createElement("div");e.className=Ko("content"),e.spellcheck=!1,t.appendChild(e)}},{key:"syncUI",value:function(){var t=this.getWrapper();this.isEditMode()?null==t||t.removeAttribute("ky-readonly"):null==t||t.setAttribute("ky-readonly","")}},{key:"initParser",value:function(){var t;t=this,ga.registerIgnoreAttribute("ky-active"),ga.registerIgnoreAttribute("tid"),t.parser.registerTransfer("style",{stringify:function(){}}),t.parser.registerTransfer("div",{stringify:function(e){if(e===t.getContainer())for(var n=e.firstElementChild;n;){var r=n.nextElementSibling;this.next(n),n=r}}}),t.parser.registerTransfer(N.tagName,{stringify:function(e){var n,r=this.range;r||(r=this.range=t.getNormalizedRange());var o=N.tagName,i=ga.getElementAttrString(e,(n={},l()(n,ba.START_CURSOR,!0),l()(n,ba.END_CURSOR,!0),n));r&&(r.startElement===e&&(i&&(i+=" "),i+="".concat(ba.START_CURSOR,'="').concat(r.startOffset,'"')),r.endElement===e&&(i&&(i+=" "),i+="".concat(ba.END_CURSOR,'="').concat(r.endOffset,'"')));var a=e.textContent;this.append("<".concat(o).concat(i?" "+i:"",">")),this.append(a),this.append("</".concat(o,">")),this.appendContent(a)}}),t.parser.registerTransfer("br",{stringify:function(t){this.append("<br/>")}}),t.parser.registerTransfer((function(t){return Vr(t)}),{stringify:function(t){var e=ut.tagName,n=ga.getElementAttrString(t);this.append("<".concat(e).concat(n?" "+n:"",">")),this.append("</".concat(e,">"))},parse:function(t){return ar(t),t}}),t.parser.registerTransfer((function(t){var e=String(t.tagName).toLowerCase();return"style"===e&&!t.hasAttribute("style-setting")||k.isTagNameOutputDisabled(e)}),{stringify:function(t){}})}},{key:"getContainer",value:function(){return this._container}},{key:"getWrapper",value:function(){return this._wrapper}},{key:"getTitle",value:function(){var t,e=null===(t=this.getContainer().firstElementChild)||void 0===t?void 0:t.firstElementChild;return k.isElementInstanceOf(e,$)&&e.textContent||""}},{key:"put",value:function(t,e){this._data[t]=e}},{key:"get",value:function(t){return this._data[t]}},{key:"remove",value:function(t){delete this._data[t]}},{key:"_render",value:function(t){var e=this,n=this.getContainer();!function(t){for(;t.firstChild;)ir(t.firstChild)}(n);for(var r=t.el,o=t.content,i=this.parser.parse(o||"").body.firstElementChild;i;){var a=i.nextElementSibling;n.appendChild(i),i=a}var c=this.getElementsByElementType(ut);r.appendChild(this.getWrapper()),c.forEach((function(t){e.mountCustomElement(t)}))}},{key:"mountCustomElement",value:function(t){try{if(k.isElementInstanceOf(t,ut)){var e=t.getAttribute("type")||"",n=this.customElementMounts[e]||du[e],r=t[vu];if(r&&r.mount)return;if(r=t[vu]={context:this,mount:!0},n){var o=n(t,this);if("function"==typeof o){r.unmount=o;var i=this._customUnmountElements;-1===i.indexOf(t)&&i.push(t)}}}}catch(t){}}},{key:"getElementsByTagName",value:function(t,e){return this.getElementsByElementType(k.getByTagName(t).constructor,e)}},{key:"getElementsByElementType",value:function(e,n){var r=this.getContainer();return t.getElementsByElementType(r,e,n)}},{key:"setEditMode",value:function(t){var e=!!t;this.editMode!==e&&(this.editMode=e,this.mountEvents(),e||this.blur(),this.events.emit("editModeChange",this,[e])),this.syncUI()}},{key:"isEditMode",value:function(){return this.editMode}},{key:"destroy",value:function(){this.events.emit("willDestroy"),this.events.unmount(),this.blur()}},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"off",value:function(t,e){this.events.off(t,e)}},{key:"onBase",value:function(t,e){this.baseEvents.on(t,e)}},{key:"offBase",value:function(t,e){this.baseEvents.off(t,e)}},{key:"stringify",value:function(){return this.stringifyInfo().xml}},{key:"stringifyInfo",value:function(){return this.parser.stringifyInfo(this.getContainer())}},{key:"parse",value:function(t){return this.parser.parse(t)}},{key:"scrollTop",value:function(t){var e=this.getContainer();if(0===arguments.length)return e.scrollTop;e.scrollTop=t}},{key:"scrollLeft",value:function(t){var e=this.getContainer();if(0===arguments.length)return e.scrollLeft;e.scrollLeft=t}},{key:"disableEvents",value:function(t){var e=this.getWrapper();t?e.setAttribute("disable-events",""):e.removeAttribute("disable-events")}},{key:"getOutlineItems",value:function(){return t=this.getContainer(),oh.getElementsByElementType(t,J).map((function(t){var e=t.getAttribute("level")||"1";return{element:t,isTitle:k.isElementInstanceOf(t,$),level:parseInt(e)||1}}));var t}},{key:"isLocalUrlSchema",value:function(t){return t.startsWith(this.localUrlSchema)}},{key:"fetch",value:function(t){var e=this.blobs.get(t);return e?Promise.resolve("function"==typeof e?e():e):Promise.reject("blob not found!")}},{key:"transformLocalUrl",value:function(t){return this._urlTransformer?this._urlTransformer(t,this):t}},{key:"applySettings",value:function(t){Object.assign(this.settings,t);var e=this.settings.background;e&&this.setBackground(e)}},{key:"getSettings",value:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fu(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.settings)}},{key:"setBackground",value:function(t){this.settings.background=t,this.getContainer().style.setProperty("--kyEditorBackground",t)}},{key:"getBackground",value:function(){return this.settings.background}}],[{key:"defineCustomMount",value:function(t,e){if("function"!=typeof e)throw new TypeError("mount is not a function type!");du[t]=e}},{key:"unmountCustomElement",value:function(t){try{if(k.isElementInstanceOf(t,ut)){var e=t[vu];if(delete t[vu],e){var n=e.unmount,r=e.context,o=[].concat(r._customUnmountElements),i=o.indexOf(t);-1!==i&&(o.splice(i,1),r._customUnmountElements=o),"function"==typeof n&&n(t)}}}catch(t){console.error(t)}}},{key:"getElementsByElementType",value:function(t,e,n){var r=[],o=n||{},i=o.maxCountLimit,a=o.exact;return function n(o){if(o&&!(i&&r.length>=i)&&(k.isElementInstanceOf(o,e,a)&&r.push(o),!(i&&r.length>=i)&&o&&(t===o||!Vr(o))))for(var c=o.firstElementChild;c;)n(c),c=c.nextElementSibling}(t),r}},{key:"getTextContent",value:function(t){return this.getElementsByElementType(t,N,{exact:!0}).reduce((function(t,e){return t+(e.textContent||"")}),"")}}]),t}();function gu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}yu.PendingAttribute="data-pending",yu.isRangeElementValid=hu,yu.behaviorConfig=new Di;var bu=k.getElementType(N),xu=function(t){m()(n,t);var e=gu(n);function n(t){var r;return f()(this,n),(r=e.call(this,t)).currentRange={},r.elementType=bu,r}return h()(n,[{key:"syncElementState",value:function(t){return t}},{key:"visitRangeTextElement",value:function(t,e){var n=this.getContainer(),r=t.startElement,o=t.endElement;if(r!==o){var i=!1;!function t(r){if(!i&&Et.isElement(r))if(Nr(r)){var c=or(r),u=r.parentElement;if(e(r,{stop:a}),r===o&&(i=!0),!i){for(;!i&&c;)t(c),c=or(c);if(!i&&u!==n){for(;u&&u!==n;){if(or(u))break;u=u.parentElement}var l=or(u);l&&t(l)}}}else for(var s=Array.prototype.slice.call(r.children),f=s.length,p=0;!i&&p<f;p++)t(s[p])}(r)}else e(r);function a(){i=!0}}},{key:"isActive",value:function(t){return n.isElementType(t)}},{key:"isRangeActive",value:function(t){var e=this,n=t.startElement;if(n===t.endElement)return this.isActive(n);var r=!0,o=Date.now();return this.visitRangeTextElement(t,(function(t,n){var i;(Date.now()-o>=1500||!e.isActive(t))&&(r=!1,null===(i=n.cancel)||void 0===i||i.call(n))})),r}},{key:"isEnabled",value:function(){return!0}},{key:"isNeedSyncState",value:function(t){var e=this.isActive(t);return this.isEnabled()!==e}},{key:"execCommandAtElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=t.textContent,o=this.currentRange;if(this.isNeedSyncState(t))if(r&&1!==arguments.length){var i=this;arguments.length<3&&(n=r.length);var a=r.slice(0,e),c=r.slice(e,n),u=r.slice(n),l=document.createDocumentFragment();[a,c,u].forEach((function(e,n){if(e){var r=t.cloneNode(),a=1===n?i.syncElementState(r):r;e=a.textContent||e,a.textContent=e,1===n&&(o.startElement===t&&(o.startElement=a,o.startOffset=0),o.endElement===t&&(o.endElement=a,o.endOffset=e.length)),l.appendChild(a)}})),t.parentElement.replaceChild(l,t)}else this.syncElementState(t)}},{key:"execCommandAtRange",value:function(){var t=this.currentRange=this.getRange();this._execCommandAtRange(),t.select()}},{key:"_execCommandAtRange",value:function(){var t=this,e=this.currentRange,n=e.startElement,r=e.endElement,o=e.startOffset,i=e.endOffset;if(n!==r)this.visitRangeTextElement(e,(function(a){var c=a.parentElement,u=c.lastElementChild===a;n===a?t.execCommandAtElement(a,o):r===a?t.execCommandAtElement(a,0,i):t.execCommandAtElement(a),u&&xr(c,{range:e,match:Nr})}));else{if(!this.isNeedSyncState(n))return;Nr(n)&&t.execCommandAtElement(n,o,i)}}},{key:"executeWhileCollapse",value:function(){var t=this.commandManager,e=this.getRange(),n=t.pendingCommands,r=e.startElement,o=this.isEnabled();if(n.isEnabled()&&!n.range.equals(e)&&n.clear(),n.isEnabled()){var i=n.element;o!==this.isActive(i)&&(i=this.syncElementState(i)),gr(r,i)&&n.clear()}else{if(o!==this.isActive(r)){var a=r.cloneNode();a=this.syncElementState(a),n.element=a}ur(r)&&(e.startOffset=0,e.isTextEmpty=!0),n.range=e}e.select()}}],[{key:"createElement",value:function(){return bu.create()}},{key:"isElementType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return k.isElementInstanceOf(t,N,e)}}]),n}(Et);function Eu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}function wu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=mr(t,n);return Object.keys(n).some((function(t){var n=r[t];if(e.hasOwnProperty(t)){var o=e[t];if(-1===o.indexOf(n))return o.push(n),!0}else e[t]=[n]})),e}var Cu=function(t){m()(n,t);var e=Eu(n);function n(t){var r;return f()(this,n),(r=e.call(this,t)).attrName="style",r.commandType=gt,r}return h()(n,[{key:"initModel",value:function(){return{value:null}}},{key:"getRangeStyle",value:function(t,e){var n={},r=Date.now();return this.visitRangeTextElement(t,(function(t,o){if(o&&(Date.now()-r>=1500||Object.keys(e).every((function(t){var e=n[t];return e&&e.length>1}))))return void o.stop();wu(t,n,e)})),n}},{key:"getStyle",value:function(t){var e=t.type,n=t.styleNames,r=this.commandManager.editor,o=[].concat(n).reduce((function(t,e){return t[e]=!0,t}),{}),i=this.getRange(),a={};return i?"block"===e?(wu(Tr(i.startElement,r.getContainer()),a,o),a):i.collapsed?(wu(i.startElement,a,o),a):this.getRangeStyle(i,o):a}},{key:"getState",value:function(t){var e=this.createState();return e.data=this.getStyle.apply(this,arguments),e}},{key:"isActive",value:function(t){if(1!==t.nodeType)return!1;var e=this.getModel(),n=mr(t.getAttribute("style")||""),r=e.value||{};return Object.keys(r).every((function(t){if(!n)return!1;var e=r[t];return n[t]===e}))}},{key:"isEnabled",value:function(){return!0}},{key:"syncElementState",value:function(t){var e=this.getModel(),n=mr(t.getAttribute("style")||""),r=e.value;r&&Object.assign(n,r);var o=n.toString();return o?t.setAttribute("style",o):t.removeAttribute("style"),t}},{key:"execute",value:function(t){var e=this.getRange();this.getModel().value=vr(t),e.collapsed?this.executeWhileCollapse():this.execCommandAtRange()}}]),n}(xu);Cu.fillStyleValues=wu;var Ou=function(){function t(e){f()(this,t),this.values={},e&&(this.values=String(e).split(/\s+/).reduce((function(t,e){return t[e]=!0,t}),{}))}return h()(t,[{key:"addValue",value:function(t){if(t){var e=String(t).split(/\s+/),n=this.values;e.forEach((function(t){t&&!n.hasOwnProperty(t)&&(n[t]=!0)}))}}},{key:"removeValue",value:function(t){if(t){var e=String(t).split(/\s+/),n=this.values;e.forEach((function(t){delete n[t]}))}}},{key:"contains",value:function(e){if(!e)return!1;e instanceof t||(e=new t(e));var n=this.values;return Object.keys(e.values).every((function(t){return n.hasOwnProperty(t)}))}},{key:"toString",value:function(){return Object.keys(this.values).join(" ")}}]),t}();function ku(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var _u={"text-decoration":1},Ru=function(t){m()(n,t);var e=ku(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"initModel",value:function(){return{enabled:!1,styles:[]}}},{key:"getStyleItems",value:function(){return this.getModel().styles||[]}},{key:"isCompositionStyleValue",value:function(t,e){return _u.hasOwnProperty(t)}},{key:"isStyleValueEqual",value:function(t,e,n){return e&&n&&this.isCompositionStyleValue(t,n)?new Ou(e).contains(n):e===n}},{key:"syncStyleValue",value:function(t){var e=this,n=this.isEnabled();this.getStyleItems().forEach((function(r){var o=t[r.name];if(n)if(e.isCompositionStyleValue(r.name,r.value)){var i=new Ou(o);i.addValue(r.value),t[r.name]=i.toString()}else t[r.name]=r.value;else if(o){var a=new Ou(o);a.removeValue(r.value),t[r.name]=a.toString()}}))}},{key:"isActive",value:function(t){var e=this;if(1!==t.nodeType)return!1;var n=mr(t.getAttribute(this.attrName)||"");return this.getStyleItems().every((function(t){return e.isStyleValueEqual(t.name,n[t.name],t.value)}))}},{key:"isEnabled",value:function(){return this.getModel().enabled}},{key:"syncElementState",value:function(t){if(0===this.getStyleItems())return null;var e=this.attrName,n=mr(t.getAttribute(e)||"");this.syncStyleValue(n);var r=n.toString();return r?t.setAttribute(e,r):t.removeAttribute(e),t}},{key:"getState",value:function(t){var e=this.createState(),n=this.getRange();return n.collapsed?(e.data=this.isActive(n.startElement),e):(e.data=this.isRangeActive(n),e)}},{key:"execute",value:function(t){var e,n=this.getRange(),r=this.getModel();r.enabled=0===arguments.length?!(null!==(e=this.getState())&&void 0!==e&&e.data):!!t,n.collapsed?this.executeWhileCollapse():this.execCommandAtRange()}}]),n}(Cu);function Su(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Au=function(t){m()(n,t);var e=Su(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"initModel",value:function(){return{enabled:!1,styles:[{name:"font-weight",value:"bold"}]}}}]),n}(Ru);function Mu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Tu=function(t){m()(n,t);var e=Mu(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"initModel",value:function(){return{enabled:!1,styles:[{name:"font-style",value:"italic"}]}}}]),n}(Ru);function Pu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var ju=function(t){m()(n,t);var e=Pu(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"execute",value:function(t){var e=this.commandManager,n=t.element,r=t.style,o=t.attrs,i=t.resize,a=void 0!==i&&i,c=this.getRange().startOffset,u=n;if(u||(u=this.createElement()),a){var l={rotate:t.rotate};a&&"boolean"!=typeof a&&(l.resizeModes=a);var s=this.createBehaviorElement(l);s.appendChild(u),u=s}return fr(u,{style:r,attrs:o}),e.execCommand("input",{element:u,offset:c,endOffset:c}),u}}]),n}(Et);function zu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Nu=k.getElementType(D),Bu=function(t){m()(n,t);var e=zu(n);function n(t){var r;return f()(this,n),(r=e.call(this,t)).elementType=Nu,r}return h()(n,[{key:"isEnabled",value:function(){return!0}},{key:"createLinkElement",value:function(){var t=this.getModel(),e=this.createElement(),n=t.value;return n&&Object.keys(n).forEach((function(t){var r=n[t];r&&"text"!==t&&e.setAttribute(t,r)})),e}},{key:"execute",value:function(t){var e=this.getRange();this.getModel().value=t,e.collapsed||e.extractContents();var r=this.createLinkElement(),o=null==t?void 0:t.text;r.setAttribute("target","_blank"),r.setAttribute("href",t.href);var i=nr();i.textContent=o,r.appendChild(i),R()(x()(n.prototype),"execute",this).call(this,{element:r})}}]),n}(ju);function Iu(t){var e,n=!1;return function(){return n||(e=t(),n=!0),e}}function Lu(t){return(new DOMParser).parseFromString(t,"text/html").body.firstElementChild}function Du(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Hu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hu(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function Hu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}function Uu(t,e){return Ar(t,Ir,e)}var Fu=function(t){m()(n,t);var e=Vu(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"backspaceUntilNextTextElement",value:function(t){var e=this.commandManager.editor,n=t.startElement;if(n&&!Ir(n)){var r=Mr(n);r&&(n=r)}var o,i=Uu(n,e.getContainer()),a=0;i&&(Br(i)?(o=i,a=i.textContent.length):cr(o=nr(),i),zr({start:n,containStart:!0,end:o}),(t=t.new()).startElement=o,t.startOffset=a,xr(o.parentElement,{match:Br,range:t}),t.select())}},{key:"backspaceTextNormal",value:function(t,e){var n=this.commandManager.editor,o=t.startElement,i=t.startOffset,a=(e||{}).count,c=Iu((function(){return Uu(o,n.getContainer())})),u=Iu((function(){return Tr(c(),n.getContainer())})),l=Iu((function(){return Tr(o,n.getContainer())})),s=o.textContent,f=s.slice(0,i),p=s.slice(i),h=ur(f);if(h&&f&&(o.textContent=p),!h){var v=a||function(t){var e,n="",r=Du(t.substring(Math.max(0,t.length-10),t.length));try{for(r.s();!(e=r.n()).done;){n=e.value}}catch(t){r.e(t)}finally{r.f()}return n.length}(f),d=(f=f.slice(0,Math.max(0,f.length-v)))+p,m=o,y=f.length;o.textContent=d;var g=ur(f),b=g;if(g){var x=c();if(x)u()===l()&&(Br(x)?(m=x,y=x.textContent.length,zr({start:o,containStart:ur(d),end:x}),b=!0):x&&zr({start:o,end:x}));else if(ur(d)){if(Br(m.nextElementSibling)){var E=m.nextElementSibling;ir(m),m=E,y=0}b=!0}}return(t=t.new()).startElement=m,t.startOffset=y,b&&sr(t),void t.select()}var C=c(),O=this.findNearestMatch(C,(function(t){return k.isElementInstanceOf(t,w)}));O&&(O!==this.findNearestMatch(o,(function(t){return k.isElementInstanceOf(t,w)}))&&(C=null));if(C){var _,R,S=u(),A=l();if(S===A||A.contains(S)){var M=o,T=0,P=Br(C);!P&&Br(C.previousElementSibling)&&(C=C.previousElementSibling,P=!0);var j=P;if(zr({start:o,containStart:P&&ur(o),end:C,containEnd:!P,container:n.getContainer()}),P){M=C;var z=C.textContent||"";T=z.length,j=ur(z)}return(t=t.new()).startElement=M,t.startOffset=T,j&&sr(t),void t.select()}for(var N=document.createDocumentFragment(),B=A.firstElementChild,I=0;B;){var L=B.nextElementSibling;k.isHelpElement(B)||0==I++&&Br(B)&&ur(B)?(ir(B),B=L):(N.appendChild(B),B=L)}var D=C,H=0,V=!1;if(Br(D)){var U=C.textContent||"";H=U.length,V=ur(U)}else Br(N.firstElementChild)?D=D.nextElementSibling:cr(D=nr(),C);var F=A.parentElement;zr({start:A,containStart:!0,end:D,container:n.getContainer()}),F===C.parentElement?cr(N,D):C.parentNode.appendChild(N),(t=t.new()).startElement=D,t.startOffset=H,V&&sr(t),t.select()}else{var W=r.findUpUtil(o,(function(t){return k.isElementInstanceOf(t,w)}),(function(t){return t===n.getContainer()}));if(ur(o)&&(_=o).getAttributeNames().forEach((function(t){R&&R.hasOwnProperty(t)||_.removeAttribute(t)})),W){var K=l();if(K&&!k.isElementInstanceOf(K,q)){var Z,Y=document.createDocumentFragment();lr(K,Y),null===(Z=K.parentElement)||void 0===Z||Z.replaceChild(Y,K)}}t.select()}}},{key:"backspaceWhileCollapsed",value:function(t,e){Br(t.startElement)?this.backspaceTextNormal(t,e):this.backspaceUntilNextTextElement(t)}},{key:"backspaceAtRange",value:function(t){var e=this.commandManager.editor,n=t.startElement,r=t.startOffset,o=t.endElement,i=t.endOffset;if(n===o){var a=n.textContent;n.textContent=a.slice(0,r)+a.slice(i)}else{var c={start:o,containStart:!Br(o),end:n,containEnd:!Br(n)};c.containEnd||(n.textContent=n.textContent.slice(0,r)),c.containStart||(o.textContent=o.textContent.slice(i),c.containStart=ur(o)),zr(c)}if(Br(n))(t=t.new()).startElement=n,t.startOffset=r,sr(t),t.select();else{var u=e.getContainer();if(u.firstElementChild)Br(o)&&((t=t.new()).startElement=o,t.startOffset=0,sr(t),t.select());else{var l=er(),s=nr();l.appendChild(s),u.appendChild(l),(t=t.new()).startElement=s,t.startOffset=0,t.select()}}}},{key:"execute",value:function(t){var e=this.getRange();if(e.collapsed)this.backspaceWhileCollapsed(e,t);else{if(!Dr(e,this.getContainer()))return;this.backspaceAtRange(e)}}}]),n}(Et);function Wu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var qu=function(t){m()(n,t);var e=Wu(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"execute",value:function(t){var e=this.commandManager,n=e.editor,r=this.getRange();if(r.collapsed){var o=r.startElement,i=r.startOffset,a=(t||{}).count,c=void 0===a?1:a,u=Iu((function(){return Sr(o,Ir,(function(t){return t===n.getContainer()||k.isElementInstanceOf(t,V)}))}));if(Br(o)){var l=o.textContent||"",s=l.slice(0,i),f=l.slice(i);if(f.length>0){if(l=s+(f=f.slice(Math.max(0,c))),o.textContent=l,!l){var p=u();Br(p)?((r=r.new()).startElement=p,r.startOffset=0,zr({start:p,end:o,containEnd:!0}),sr(r)):sr(r)}return void r.select()}}var h=u();if(h)if(Br(h)){var v=h.textContent||"";v=v.slice(1),h.textContent=v,(r=r.new()).startElement=h,r.startOffset=0,sr(r),r.select()}else zr({start:h,containStart:!0,end:o}),sr(r),r.select()}else e.execCommand("backspace")}}]),n}(Et);function Ku(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Zu=function(t){m()(n,t);var e=Ku(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"execute",value:function(t){var e=t||{},n=e.offset,r=e.endOffset,o=e.element,i=this.getRange();void 0===r&&(r=n);var a=i.startElement;if(xu.isElementType(a)){var c=a.textContent||"",u=c.slice(0,n),l=c.slice(r),s=document.createDocumentFragment(),f=a.cloneNode();f.textContent=u,s.appendChild(f),s.appendChild(o);var p=a.cloneNode(),h=document.createTextNode(l);p.appendChild(h),s.appendChild(p),a.parentElement.replaceChild(s,a),i=i.new();var v=!1;if(xu.isElementType(o))i.startContainer=o.lastChild||o,o.lastChild&&(i.startOffset=o.lastChild.textContent.length),v=!0;else{var d=_r(o);!d&&Br(o.nextElementSibling)?(d=o.nextElementSibling,i.startElement=d,i.startOffset=0,v=!0):Br(d)&&(i.startElement=d,i.startOffset=d.textContent.length,v=!0)}br(o.parentNode,{match:function(t){return xu.isElementType(t)},range:i}),v&&i.select()}}}]),n}(Et);function Yu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Xu=function(t){m()(n,t);var e=Yu(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"isElementMatched",value:function(t,e){return k.isElementInstanceOf(t,V,e)}},{key:"execute",value:function(){var t=this.getRange(),e=t.collapsed,n=t.startElement,r=t.startContainer,o=t.startOffset,i=this.findNearest(r);if(i){var a=null,c=function(t){return k.isElementInstanceOf(t,J)}(i)?er():i.cloneNode();if(e){var u=i.lastChild,l=0,s=Br(u);if(Et.isTextNode(u)||s){var f=u.textContent;l=f?f.length:0}(t=t.new()).startContainer=r,t.startOffset=o,s?t.endElement=u:t.endContainer=u,t.endOffset=l;var p=t.extractContents();Nr(p.lastElementChild)||p.appendChild(Br(n)?n.cloneNode():(new N).create()),sr({startElement:n,startOffset:0});for(var h=p.firstChild;h;){var v=h.nextSibling;if(k.isValidElement(h))c.appendChild(h);else if(3===h.nodeType&&!ur(h)){var d=Br(n)?n.cloneNode():xu.createElement();d.appendChild(h),c.appendChild(d)}h=v}xr(c,{match:Br,range:t}),t=t.new();var m=function(t){for(;t;){if(Br(t))return t;t=t.firstElementChild}return null}(c);m||(m=xu.createElement(),c.firstChild?c.insertBefore(m,c.firstChild):c.appendChild(m)),a=m}else{var y=this.findNearest(t.endContainer);if(t.extractContents(),y)for(var g=y.firstElementChild;g;){g=g.nextElementSibling}var b=xu.createElement();c.appendChild(b),a=b,t=t.new()}!function(t){if(!t.firstElementChild){var e=xu.createElement();t.appendChild(e)}}(i),cr(c,i),t.startElement=a,t.startOffset=0,t.select()}}}]),n}(uo);function Gu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Ju=function(t){m()(n,t);var e=Gu(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"execute",value:function(t){if(t){var e=this.commandManager,n=e.pendingCommands,r=this.getRange(),o=r.startContainer,i=r.startOffset,a=r.startElement,c=0,u=null;if(k.isElementInstanceOf(a,I)||k.isElementInstanceOf(a.parentNode,I)){var l=i,s=a.textContent||"",f=(s=s.slice(0,l)+s.slice(l)).slice(0,l);(function(t){var e=t.parentNode;return!!e&&e.firstElementChild===t}(a)&&!f||function(t){var e=t.parentNode;return!!e&&e.lastElementChild===t}(a)&&f===s)&&(c=1,s&&!f&&(c=2),u=k.isElementInstanceOf(a,I)?a:a.parentElement)}if(n.isEnabled()){var p=n.range,h=p.startContainer,v=p.startOffset,d=p.startElement;if((h===o||d===a)&&(i===v||ur(a))){var m=n.element.cloneNode();return void(c?(m.textContent=t,1===c?cr(m,u):u.parentElement.insertBefore(m,u),(r=r.new()).startElement=m,r.startOffset=m.textContent.length,r.select()):(m.textContent=t,e.execCommand("input",{offset:i,endOffset:i,element:m})))}}if(c){var y=a.textContent,g=y.slice(0,i);if(!g||g===y){var b=xu.createElement();b.textContent=t;var x=k.isElementInstanceOf(a,I)?a:a.parentNode;return 1===c?cr(b,x):x.parentElement.insertBefore(b,x),(r=r.new()).startElement=b,r.startOffset=t.length,void r.select()}}if(xu.isElementType(a)){var E=a.textContent,w=E.slice(0,i);return ur(w)&&(i=0),E=w+t+E.slice(i),a.textContent=E,(r=r.new()).startElement=a,r.startOffset=i+t.length,br(a.parentNode,{match:function(t){return xu.isElementType(t)},range:r}),void r.select()}!function(t,e){var n=t.startContainer,r=xu.createElement();r.textContent=e,n.parentNode.replaceChild(r,n),(t=t.new()).startElement=r,t.startOffset=e.length,xr(r.parentNode,{match:function(t){return xu.isElementType(t)},range:t}),t.select()}(r,t)}}}]),n}(Et);function Qu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var $u=new A,tl=function(t){m()(n,t);var e=Qu(n);function n(t){var r;return f()(this,n),(r=e.call(this,t)).elementType=$u,r}return h()(n,[{key:"execute",value:function(t){return R()(x()(n.prototype),"execute",this).call(this,t)}}]),n}(ju);function el(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var nl=function(t){m()(n,t);var e=el(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"execute",value:function(){var t=this.getRange();if(!t.collapsed){var e=t.endContainer,n=t.endOffset;return(t=t.new()).startContainer=e,t.startOffset=n,void t.select()}var r=t.startElement,o=t.startOffset;if(Br(r)){var i=r.textContent||"",a=i.slice(0,o),c=i.slice(o),u="".concat(a,"&nbsp;&nbsp;&nbsp;&nbsp;").concat(c);r.innerHTML=u,(t=t.new()).startElement=r,t.startOffset=a.length+4,t.select()}}}]),n}(Et);function rl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}function ol(t,e){for(;t&&t!==e&&(n=t,!k.isElementInstanceOf(n,V));)t=t.parentNode;var n;return t}var il=function(t){m()(n,t);var e=rl(n);function n(t){var r;return f()(this,n),(r=e.call(this,t)).commandType=gt,r}return h()(n,[{key:"initModel",value:function(){return{value:null}}},{key:"syncElementState",value:function(t){var e=this.getModel(),n=mr(t.getAttribute("style")),r=e.value;r&&Object.assign(n,r);var o=n.toString();return o?t.setAttribute("style",o):t.removeAttribute("style"),t}},{key:"isActive",value:function(t){if(1!==t.nodeType)return!1;var e=this.getModel(),n=mr(t.getAttribute("style")||""),r=e.value||{};return Object.keys(r).every((function(t){return!!n&&n[t]===r[t]}))}},{key:"executeAtRange",value:function(){!function(t){var e=t.container,n=t.command,r=t.range,o=r.startElement,i=r.endElement,a=o,c=[],u=function(t){-1===c.indexOf(t)&&(c.push(t),n.syncElementState(t))},l=function t(n){var r=Nr(n);if(n===i&&r)return u(ol(n,e)),!1;if(!r){for(var o=n.firstElementChild;o;)if(-1===c.indexOf(o)){var a=o.nextElementSibling,l=t(o);if(!1===l)return l;o=a}return n!==i&&void 0}u(ol(n,e))};t:for(;a&&a!==e;){for(var s=a.nextElementSibling,f=a.parentNode;s;){var p=s.nextElementSibling;if(!1===l(s))break t;s=p}a=f}Nr(o)?u(ol(o,e)):l(o)}({range:this.getRange(),container:this.getContainer(),command:this})}},{key:"execute",value:function(t){var e=this.getRange();this.getModel().value=vr(t);var n=this.commandManager.editor;if(e.collapsed){var r=ol(e.startContainer,n.getContainer());r&&this.syncElementState(r)}else this.executeAtRange();e.select()}}]),n}(Et);function al(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}function cl(t,e,n){Object.keys(n).forEach((function(n){var r=t.getAttribute(n);if(e.hasOwnProperty(n))e[n]=[r];else{var o=e[n];-1===o.indexOf(r)&&(o.push(r),e[n]=o)}}))}function ul(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}function ll(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var sl=function(t){m()(n,t);var e=ll(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"initModel",value:function(){return{name:"su",value:"0"}}},{key:"getAttributeValue",value:function(){return"1"}},{key:"isActive",value:function(t){if(!t||1!==t.nodeType)return!1;var e=this.getModel();return k.isElementInstanceOf(t,N)&&t.getAttribute(e.name)===this.getAttributeValue()}},{key:"isEnabled",value:function(){return this.getModel().value===this.getAttributeValue()}},{key:"execute",value:function(t){var e=this.getRange(),n=this.getModel(),r=0===arguments.length?!this.isEnabled():!!t;n.value=r?this.getAttributeValue():"0",e.collapsed?this.executeWhileCollapse():this.execCommandAtRange()}}]),n}(function(t){m()(n,t);var e=ul(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"isActive",value:function(t){if(!t||1!==t.nodeType)return!1;var e=this.getModel();return R()(x()(n.prototype),"isActive",this).call(this,t)&&t.getAttribute(e.name)===dt}},{key:"isEnabled",value:function(){return this.getModel().value===dt}},{key:"getState",value:function(t){var e=this.createState(),n=this.getRange();return n.collapsed?(e.data=this.isActive(n.startElement),e):(e.data=this.isRangeActive(n),e)}},{key:"execute",value:function(t){var e=this.getRange();this.getModel().value=t?dt:mt,e.collapsed?this.executeWhileCollapse():this.execCommandAtRange()}}]),n}(function(t){m()(n,t);var e=al(n);function n(t){var r;return f()(this,n),(r=e.call(this,t)).commandType=yt,r}return h()(n,[{key:"getRangeAttrs",value:function(t,e){e=e||{};var n={};return this.visitRangeTextElement(t,(function(t){cl(t,n,e)})),n}},{key:"getAttributes",value:function(t){var e=t.attrNames,n=[].concat(e).reduce((function(t,e){return t[e]=!0,t}),{}),r=this.getRange(),o={};return r.collapsed?(cl(r.startElement,o,n),o):this.getRangeAttrs(r,n)}},{key:"syncElementState",value:function(t){var e=this.getModel();return this.isEnabled()?t.setAttribute(e.name,e.value):t.removeAttribute(e.name),t}}]),n}(xu)));function fl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var pl=function(t){m()(n,t);var e=fl(n);function n(){return f()(this,n),e.apply(this,arguments)}return h()(n,[{key:"getAttributeValue",value:function(){return"2"}}]),n}(sl),hl=function t(e){f()(this,t),this.time=(new Date).getTime(),this.data=String(e)},vl=function(){function t(){f()(this,t),this.maxSize=50}return h()(t,[{key:"pushLog",value:function(t){var e=this.cursor;if(!e||e.data!==t){var n=new hl(t);e&&(e.right&&(e.right.left=null),e.right=n,n.left=e),this.cursor=n,this._control()}}},{key:"_control",value:function(){for(var t=this.cursor,e=0;t&&e<this.maxSize-1;)t=t.left,e++;t&&(t.left=null)}},{key:"isEmpty",value:function(){return!!this.cursor}},{key:"isCancelEnabled",value:function(){var t=this.cursor;return!!t&&(!!t.left||!t.left&&!t.right)}},{key:"isRedoEnabled",value:function(){return this.isHasNextItem()}},{key:"isHasNextItem",value:function(){var t=this.cursor;return!(!t||!t.right)}},{key:"isHasPreviousItem",value:function(){var t=this.cursor;return!(!t||!t.left)}},{key:"nextItem",value:function(){if(this.isHasNextItem())return this.cursor=this.cursor.right}},{key:"previousItem",value:function(){if(this.isHasPreviousItem())return this.cursor=this.cursor.left}}]),t}();function dl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var ml=function(t){m()(n,t);var e=dl(n);function n(t){var r;return f()(this,n),(r=e.call(this,t)).logManager=new vl,r.commandType=xt,r.pendingAutoFocus=null,r.isTopStack=!0,r}return h()(n,[{key:"autoFocus",value:function(){var t=this;this.pendingAutoFocus||(this.pendingAutoFocus=lo((function(){t.pendingAutoFocus=null;var e,n=t.getEditor(),r=n.getContainer(),o=ba.START_CURSOR,i=ba.END_CURSOR,a=r.querySelector("[".concat(o,"]")),c=r.querySelector("[".concat(i,"]"));if((a||c)&&(e=n.newRange(),a&&(e.startElement=a,e.startOffset=0|a.getAttribute(o),a.removeAttribute(o)),c&&(e.endElement=c,e.endOffset=0|c.getAttribute(i),c.removeAttribute(i)),e.select(),!e.collapsed)){var u=n.getContainer();null==u||u.focus()}n.cursor.update()})))}},{key:"cancel",value:function(){this.isTopStack&&(this.isTopStack=!1,this.push(!0)),console.time("popLog");var t=this.getEditor(),e=this.logManager.previousItem();e&&t.updater.update(e.data),console.timeEnd("popLog"),this.autoFocus()}},{key:"redo",value:function(){console.time("popLog");var t=this.getEditor(),e=this.logManager.nextItem();e&&t.updater.update(e.data),console.timeEnd("popLog"),this.autoFocus()}},{key:"push",value:function(t){console.time("pushLog");var e=this.getEditor().stringify();this.logManager.pushLog(e),console.timeEnd("pushLog"),t||(this.isTopStack=!0)}},{key:"getState",value:function(t){var e=this.createState(),n=this.logManager,r=n.isRedoEnabled(),o=n.isCancelEnabled();return e.data={cancel:o,redo:r},e}},{key:"execute",value:function(t){"cancel"===t?this.cancel():"redo"===t?this.redo():"push"===t&&this.push()}}]),n}(Et);function yl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var gl=function(t){m()(n,t);var e=yl(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.styleValue="",t))}return h()(n,[{key:"initModel",value:function(){return{enabled:!1,styles:[{name:"text-decoration",value:this.styleValue}]}}},{key:"isCompositionStyleValue",value:function(t,e){return!!e&&R()(x()(n.prototype),"isCompositionStyleValue",this).call(this,t,e)}},{key:"execute",value:function(t){var e,r=0===arguments.length?!(null!==(e=this.getState())&&void 0!==e&&e.data):!!t;return R()(x()(n.prototype),"execute",this).call(this,r)}}]),n}(Ru),bl=function(t){m()(n,t);var e=yl(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.styleValue="line-through",t))}return n}(gl),xl=function(t){m()(n,t);var e=yl(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.styleValue="underline",t))}return n}(gl),El=function(t){m()(n,t);var e=yl(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.styleValue="overline",t))}return n}(gl),wl=function(t){m()(n,t);var e=yl(n);function n(){return f()(this,n),e.apply(this,arguments)}return n}(gl);function Cl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}wl.Stroke=bl,wl.Underline=xl,wl.Overline=El;var Ol=function(t){m()(n,t);var e=Cl(n);function n(){return f()(this,n),e.apply(this,arguments)}return h()(n,[{key:"execute",value:function(t){var e=this.getRange(),n=e.startContainer,r=e.startOffset,o=Pr(n,this.commandManager.editor.getContainer());if(o){(e=e.new()).startContainer=n,e.startOffset=r,e.endContainer=o,e.endOffset=o.childElementCount;for(var i=e.extractContents().firstChild,a=document.createDocumentFragment(),c=er(),u=c;i;){var l=i.nextSibling;if(k.isElementInstanceOf(i,q)){i.childElementCount>0&&(u=i,a.appendChild(i)),i=l}else{if(3!==i.nodeType||ur(i))k.isValidElement(i)&&u.appendChild(i);else{var s=nr();s.appendChild(i),u.appendChild(s)}i=l}}if(u===c){if(0===u.childElementCount){var f=nr();u.appendChild(f)}a.appendChild(u)}var p=_r(a);cr(a,o),p&&((e=e.new()).startElement=p,e.startOffset=0,sr(e),e.select())}}}]),n}(Et);function kl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var _l=function(t){m()(n,t);var e=kl(n);function n(){return f()(this,n),e.apply(this,arguments)}return h()(n,[{key:"isElementType",value:function(t){return k.isElementInstanceOf(t,J,!0)}},{key:"getState",value:function(){var t=this.createState(),e=this.getRange(),n=this.commandManager.editor,r=Pr(e.startElement,n.getContainer());if(!r)return t;if(this.isElementType(r)){var o=r.getAttribute("level")||1;t.data={level:o}}return t}},{key:"execute",value:function(t){var e=t||{},n=e.level,r=e.insertMode;n=Number(n)||0;var o=String(n),i=this.commandManager.editor,a=this.getRange(),c=Pr(a.startElement,i.getContainer());if(c){if(r){var u=k.createElement(J);if(u.setAttribute("level",o),ur(c)&&!k.isElementInstanceOf(c,J,!0))this.extractContentNodes(c,u),c.parentElement.replaceChild(u,c);else{var l;if(wr(u),this.commandManager.execCommand("enter"),c=Pr((a=this.getRange()).startElement,i.getContainer()))if(ur(c))this.extractContentNodes(c,u),c.parentElement.replaceChild(u,c);else null===(l=c.parentElement)||void 0===l||l.insertBefore(u,c);var s=_r(u);s&&((a=a.new()).startElement=s,a.startOffset=0)}}else if(k.isElementInstanceOf(c,J,!0)){var f=c.getAttribute("level");(f=Number(f)||0)!==o&&c.setAttribute("level",o)}else{var p=k.createElement(J);p.setAttribute("level",o),this.extractContentNodes(c,p),c.parentElement.replaceChild(p,c)}a.select()}}}]),n}(uo);function Rl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Sl=function(t){m()(n,t);var e=Rl(n);function n(){return f()(this,n),e.apply(this,arguments)}return h()(n,[{key:"isElementType",value:function(t){return k.isElementInstanceOf(t,$,!0)}},{key:"getState",value:function(){var t=this.createState(),e=this.getRange(),n=this.commandManager.editor,r=Pr(e.startElement,n.getContainer());if(!r)return t;var o=this.isElementType(r);return t.data=o,t}},{key:"execute",value:function(t){var e=(t||{}).insertMode,n=this.commandManager.editor,r=this.getRange(),o=Pr(r.startElement,n.getContainer());if(o){if(e){var i=k.createElement($);if(ur(o)&&!k.isElementInstanceOf(o,$,!0))this.extractContentNodes(o,i),o.parentElement.replaceChild(i,o);else{var a;if(wr(i),this.commandManager.execCommand("enter"),o=Pr((r=this.getRange()).startElement,n.getContainer()))if(ur(o))this.extractContentNodes(o,i),o.parentElement.replaceChild(i,o);else null===(a=o.parentElement)||void 0===a||a.insertBefore(i,o);var c=_r(i);c&&((r=r.new()).startElement=c,r.startOffset=0)}}else if(!k.isElementInstanceOf(o,$,!0)){var u=k.createElement($);this.extractContentNodes(o,u),o.parentElement.replaceChild(u,o)}r.select()}}}]),n}(uo);function Al(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Ml=k.getElementType(et),Tl=function(t){m()(n,t);var e=Al(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.elementType=Ml,t))}return h()(n,[{key:"execute",value:function(){var t=this.elementType.create();t.style["background-color"]="#ccc",R()(x()(n.prototype),"execute",this).call(this,{element:t,resize:!0,style:{width:"100%",height:"5px"}})}}]),n}(ju);function Pl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pl(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Nl=k.getElementType(rt),Bl=function(t){m()(n,t);var e=zl(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.elementType=Nl,t))}return h()(n,[{key:"execute",value:function(t){var e=this.elementType.create(),r=this.createBehaviorElement();r.appendChild(e);r.style.width="".concat(16,"px"),r.style.height="".concat(16,"px"),R()(x()(n.prototype),"execute",this).call(this,jl(jl({},t),{},{element:r,resize:!1}))}}]),n}(ju);function Il(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Ll=k.getElementType(q),Dl=function(t){m()(n,t);var e=Il(n);function n(t){var r;return f()(this,n),(r=e.call(this,t)).elementType=Ll,r}return h()(n,[{key:"isElementMatched",value:function(t,e){return e?k.isElementInstanceOf(t,q,e):n.isElementType(t)}},{key:"isElementType",value:function(t,e){return k.isElementInstanceOf(t,q,e)}},{key:"getState",value:function(t){var e=this.createState(),n=this.getRange(),r=this.commandManager.editor,o=Pr(n.startElement,r.getContainer());return e.data=this.isElementType(o),e}},{key:"execute",value:function(){var t=this.getRange(),e=this.commandManager.editor,n=Pr(t.startElement,e.getContainer());if(n)if(this.isElementType(n,!0))t.select();else{var r=this.elementType.create();this.extractContentNodes(n,r),n.parentNode.replaceChild(r,n),t.select()}}}],[{key:"createElement",value:function(){return Ll.create()}},{key:"isElementType",value:function(t){return k.isElementInstanceOf(t,q)}}]),n}(uo);function Hl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Vl=k.getElementType(at),Ul=function(t){m()(n,t);var e=Hl(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.elementType=Vl,t))}return h()(n,[{key:"isElementType",value:function(t){return k.isElementInstanceOf(t,at)}},{key:"getState",value:function(t){var e=this.createState(),n=this.getRange(),r=this.findNearest(n.startElement);return r?(e.data=k.isElementInstanceOf(r.parentElement,at),e):e}},{key:"execute",value:function(t){var e=this,n=this.getRange(),r=this.findNearest(n.startElement);if(r){var o=t||{},i=o.enabled,a=function(){var t=e.elementType.create(),o=r.cloneNode();e.extractContentNodes(r,o),t.appendChild(o),r.parentNode.replaceChild(t,r),n.select()};if(o.insertMode){var c=this.isElementType(r.parentElement);if(ur(r)&&!c)return void a();if(c)return void n.select();this.commandManager.execCommand("enter");var u=Pr((n=this.getRange()).startElement,this.commandManager.editor.getContainer());if(u)if(ur(u))r=u,a();else{var l,s=this.elementType.create(),f=u.cloneNode();wr(f),s.appendChild(f),null===(l=u.parentElement)||void 0===l||l.insertBefore(s,u);var p=_r(f);p&&((n=n.new()).startElement=p,n.startOffset=0,n.select())}}else{if(i)return this.isElementType(r.parentElement)?void n.select():void a();if(this.isElementType(r.parentNode)){var h=r.parentNode,v=this.extractContentNodes(h);h.parentNode.replaceChild(v,h),n.select()}else n.select()}}}}]),n}(Dl);function Fl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Wl=function(t){m()(n,t);var e=Fl(n);function n(){return f()(this,n),e.apply(this,arguments)}return h()(n,[{key:"isActive",value:function(t){return!1}},{key:"syncElementState",value:function(t){return t.getAttributeNames().forEach((function(e){t.removeAttribute(e)})),t}},{key:"execute",value:function(){this.getRange().collapsed?this.executeWhileCollapse():this.execCommandAtRange()}}]),n}(xu);function ql(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Kl=k.getElementType(ut),Zl=function(t){m()(n,t);var e=ql(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.elementType=Kl,t))}return h()(n,[{key:"execute",value:function(t){var e=t||{},r=e.type,o=e.width,i=e.height,a=e.style,c=e.attrs,u=e.rotate,l=void 0===u||u,s=e.resize,f=void 0===s||s;if("string"!=typeof r&&"number"!=typeof r)throw new Error("params.type is invalid !");var p=this.elementType.create({innerHTML:null==t?void 0:t.innerHTML,type:r});fr(p,{attrs:c});var h={};f?(o&&(h.width="number"==typeof o?"".concat(o,"px"):o),i&&(h.height="number"==typeof i?"".concat(i,"px"):i)):h=a,R()(x()(n.prototype),"execute",this).call(this,{element:p,rotate:l,resize:f,style:h}),this.commandManager.editor.mountCustomElement(p)}}]),n}(tl);function Yl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Xl=function(t){m()(n,t);var e=Yl(n);function n(){return f()(this,n),e.apply(this,arguments)}return h()(n,[{key:"cancel",value:function(){this.formatAttrs=null,this.getRange().select()}},{key:"extractFormat",value:function(){var t=this.getRange(),e={};this.visitRangeTextElement(t,(function(t){t.getAttributeNames().forEach((function(n){e[n]=t.getAttribute(n)}))})),this.formatAttrs=e,t.select()}},{key:"isNeedSyncState",value:function(t){return!0}},{key:"syncElementState",value:function(t){var e=this.formatAttrs;return e&&Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])})),t}},{key:"applyFormat",value:function(){var t=this.formatAttrs,e=this.getRange();t&&!e.collapsed?(this.execCommandAtRange(),(e=this.getRange()).select()):e.select()}},{key:"execute",value:function(t){var e=t.type;return"extract"===e?this.extractFormat():"apply"===e?this.applyFormat():void("cancel"===e&&this.cancel())}}]),n}(xu);function Gl(){return document.documentElement.lang||navigator.language||navigator.userLanguage||""}kt.install("bold",Au),kt.install("italic",Tu),kt.install("link",Bu),kt.install("style",Cu),kt.install("delete",qu),kt.install("backspace",Fu),kt.install("enter",Xu),kt.install("input",Zu),kt.install("textInput",Ju),kt.install("list",_o),kt.install("insertBox",tl),kt.install("tab",nl),kt.install("blockStyle",il),kt.install("sup",sl),kt.install("sub",pl),kt.install("log",ml),kt.install("textDecoration",wl),kt.install("stroke",wl.Stroke),kt.install("underline",wl.Underline),kt.install("overline",wl.Overline),kt.install("split",Ol),kt.install("header",_l),kt.install("title",Sl),kt.install("paragraph",Dl),kt.install("insertHr",Tl),kt.install("insertCheckbox",Bl),kt.install("quote",Ul),kt.install("resetText",Wl),kt.install("insertCustom",Zl),kt.install("format",Xl),kt.install("clipboard",zo);var Jl={get:function(t,e){var n=Gl();return arguments.length>0?[].concat(t).indexOf(n)>=0?n:e||"":n},getSimple:function(t,e){var n=Gl();return n=n.replace(/-[^-]*/g,"").toLowerCase(),arguments.length>0?[].concat(t).indexOf(n)>=0?n:e||"":n}},Ql="",$l=function(){function t(t){this._currentLang="",this._languages=Object.create(null),this._prefix="",t&&(this._currentLang=t.lang||Ql,t.prefix&&(this._prefix=t.prefix))}return t.lang=function(t){if(0===arguments.length)return Ql;Ql=t||""},t.prototype.lang=function(t){if(0===arguments.length)return this._currentLang||Ql;this._currentLang=t||""},t.prototype.use=function(t){var e=t.lang,n=t.data,r=t.prefix,o=void 0===r?"":r;e=e||"";var i=this._languages[e];if(i||(this._languages[e]=i={}),o){var a=n||{};Object.keys(a).forEach((function(t){i[o+t]=a[t]}))}else Object.assign(i,n)},t.prototype.get=function(t,e){e=e||this.lang();var n="";if(!t)return n;var r=this._languages[e];return"object"==typeof t&&(n=t.default||this._prefix+t,t=t.lid),this._prefix&&(t=this._prefix+t),r?r.hasOwnProperty(t)?r[t]:this._parent&&this._parent.get.apply(this._parent,arguments)||n:n},t.prototype.create=function(){var e=new t;return e._parent=this,e},t.prototype.forkWithPrefix=function(e){var n=new t;return n._currentLang=this._currentLang,n._languages=this._languages,n._parent=this._parent,n._prefix=this._prefix+(e||""),n},t}(),ts=new $l;$l.lang()||ts.lang(Jl.get(["en","zh-CN"],"en")),function(t){t.use(n(29))}(ts);var es=ts.forkWithPrefix("editor."),ns=Array.prototype.slice;function rs(t){return k.isElementInstanceOf(t,ni)}function os(t){return ns.call(t.querySelector("colgroup").children)}function is(t){for(var e=t;e;)if(rs(e=e.parentNode))return e}function as(t,e,n){return n>=t&&n<=e}function cs(t,e){var n=ni.getElementModel(t),r=n.getCols();if(e){var o=e.cols.reduce((function(t,e){return t+e}),0);e.cols.forEach((function(t,e){var n=t/o*100;r[e].style.width="".concat(n,"%")})),e.needSyncTableSize&&(n.table.style.width="".concat(o,"px"))}else{var i=n.table.getBoundingClientRect().width,a=[],c=r.reduce((function(t,e){var n=ni.getColWidth(e,i);return a.push(n),t+n}),0),u=i/c;cs(t,{cols:a=a.map((function(t){return t*u}))})}}function us(t,e,n){if(2===arguments.length)return 0|(e.getAttribute(t)||1);1===n?e.hasAttribute(t)&&e.removeAttribute(t):e.setAttribute(t,String(n))}function ls(t,e){var n=ns.call(arguments);return n.unshift("rowspan"),us.apply(null,n)}function ss(t,e){var n=ns.call(arguments);return n.unshift("colspan"),us.apply(null,n)}var fs=function(t){function e(){return t.getProxyElement()}return{pushLog:function(){t.editor.saveLog()},getProxyElement:e,findCell:function(t){return r.findUpUtil(t,(function(t){return(e=t)&&"td"===(e.tagName||"").toLowerCase()&&rs(null==e||null===(n=e.parentNode.parentNode)||void 0===n||null===(r=n.parentNode)||void 0===r?void 0:r.parentElement);var e,n,r}),(function(t){return rs(t)||t===e()}))},isResizing:function(){},isSelectMoving:function(){}}},ps=Array.prototype.slice,hs=function(t){function e(t,e){var n=ti(os(t).length).tr;n.setAttribute("index",String(e));var r=ni.getElementModel(t),o=r.getRows(),i=r.tbody,a=o.length,c=o[e],u=ps.call(n.children);t:for(var l=0;l<e;l++){var s=o[l];if(s)for(var f=ps.call(s.children),p=f.length,h=function(t){var n=f[t],r=0|n.getAttribute("index"),o=ss(n),i=r,a=r+o-1,c=ls(n),s=l,p=l+c-1,h=!1;if(u=u.filter((function(t){var n=0|(t.getAttribute("index")||1);return!as(s,p,e)||!as(i,a,n)||(ir(t),h=!0,!1)})),h&&ls(n,c+1),0===u.length)return"break|removeSomeCells"},v=0;v<p;v++){if("break|removeSomeCells"===h(v))break t}}for(var d=e;d<a;d++){var m=o[d],y=0|m.getAttribute("index");m.setAttribute("index",String(y+1))}c?i.insertBefore(n,c):i.appendChild(n)}function n(t,e){var n=ni.getElementModel(t),r=os(t)[e],o=document.createElement("col");o.style.width="80px";var i=!1;r?n.colgroup.insertBefore(o,r):(n.colgroup.appendChild(o),i=!0);for(var a=n.getRows(),c=a.length,u={},l=0;l<c;l++){var s=a[l];if(i){var f=$o().element;f.setAttribute("index",e),s.appendChild(f)}else for(var p=ps.call(s.children),h=p.length,v=0;v<h;v++){var d=p[v],m=0|d.getAttribute("index"),y=ss(d),g=m+y-1;if(!u["".concat(l,"-").concat(m)])if(as(m+1,g,e)){ss(d,y+1);for(var b=ls(d),x=l;x<l+b;x++)for(var E=m;E<m+y;E++)u["".concat(x,"-").concat(E)]=!0}else if(m>=e){if(!u["".concat(l,"-").concat(e)]){var w=$o().element;w.setAttribute("index",e),s.insertBefore(w,d),u["".concat(l,"-").concat(e)]=!0}d.setAttribute("index",String(m+1))}}}cs(t)}return{addRowBefore:function(t,n){e(t,0|n.parentElement.getAttribute("index"))},addRowAfter:function(t,n){e(t,(0|n.parentElement.getAttribute("index"))+ls(n))},addColBefore:function(t,e){n(t,0|e.getAttribute("index"))},addColAfter:function(t,e){n(t,(0|e.getAttribute("index"))+ss(e))},deleteCurrentCellRow:function(t,e){!function(t,e){for(var n=ni.getElementModel(t),r=n.getRows(),o=n.getCols(),i=r[e],a=i,c={};a;){for(var u=ps.call(a.children),l=0|a.getAttribute("index"),s=0;s<u.length;s++){var f=u[s],p=0|f.getAttribute("index"),h=ss(f);if(as(l,l+ls(f)-1,e))for(var v=p;v<p+h;v++)c[v]=f;if(Object.keys(c).length===o.length)break}a=a.previousElementSibling}for(var d=0;d<o.length;d++){var m=c[d];if(!m)return;var y=m.parentElement,g=0|y.getAttribute("index"),b=ls(m);if(g<e)ls(m,b-=1),d+=ss(m)-1;else if(g===e&&b>1){ls(m,b-1);var x=0|m.getAttribute("index");d+=ss(m)-1;for(var E=y.nextElementSibling,w=E.firstElementChild,C=void 0;w;){if((0|w.getAttribute("index"))>x){C=w;break}w=w.nextElementSibling}C?E.insertBefore(m,C):E.appendChild(m)}}var O=i.nextElementSibling;for(ir(i);O;){var k=0|O.getAttribute("index");O.setAttribute("index",String(k-1)),O=O.nextElementSibling}}(t,e.parentElement.getAttribute("index"))},deleteCurrentCellCol:function(t,e){!function(t,e){var n=ni.getElementModel(t),r=n.getRows();ir(n.getCols()[e]);for(var o={},i=0;i<r.length;i++)for(var a=r[i],c=ps.call(a.children),u=c.length,l=0;l<u;l++){var s=c[l],f=0|s.getAttribute("index"),p=ss(s),h=f+p-1,v="".concat(i,"-").concat(f);f>e?s.setAttribute("index",String(f-1)):as(f,h,e)&&(p>1?(o[v]||ss(s,p-1),o[v]=!0):ir(s))}cs(t)}(t,e.getAttribute("index"))},deleteTable:function(e){t.editor.selectState.executeDelete()}}},vs=qo("select-none"),ds=function(t,e){var n=e.getProxyElement,a=e.findCell,c=e.pushLog,u=function(t,e,n){return r.getScreenInfo(r.getPosition(t),e,n).position};function l(e){var n,o=t.editor.selectState.getTarget(),i=null==o||null===(n=o.firstElementChild)||void 0===n?void 0:n.firstElementChild;if(k.isElementInstanceOf(i,ni)){var c=a((e.native||e).target);if(c){var l={width:c.offsetWidth,height:c.offsetHeight},s=u(e,c,!0);if(s.x>5&&s.x<l.width-5)return}var f={};return[i].some((function(t){var n=t.firstElementChild;if(n){var o=r.getScreenInfo(r.getPosition(e),n,!0),i=o.position,a=o.points,c=n.offsetWidth,u=n.offsetHeight;if(!(i.x<5||i.x-c>5||i.y<5||i.y-u>-5)){var l=0,s=os(t);return s.pop(),s.some((function(e){var n=ni.getColWidth(e,c);if(l+=n,Math.abs(i.x-l)<=5)return f.colElement=e,f.x=l,f.table=t,f.tableWidth=c,f.colWidth=n,f.points=a,!0}))}}})),f.table?f:void 0}}var s={resizeLog:!1,resizeTarget:null,resizeInfo:null,startEventPos:null};!function(t){var e=function(){return t.getProxyElement()};i.touchable()?(t.register("touchstart:tableResizeStart",e,o.simulateMouseDownEvent),t.register("touchmove:tableResizeMove",e,o.simulateMouseDownEvent),t.register("touchend:tableResizeEnd",e,o.simulateMouseDownEvent)):(t.register("mousedown:tableResizeStart",(function(t){if(0===t.button)return e()})),t.register("mousemove:tableResizeMove",e),t.register("mouseup:tableResizeEnd,mouseleave:tableResizeEnd",(function(t){if(0===t.button)return e()})))}(t),t.on("tableResizeStart",(function(e){var n=l(e);n&&(e.preventDefault(),e.target=n,function(e){s.resizeLog||(s.resizeLog=!0,c());var n=(s.resizeTarget=e.target).table;s.startEventPos=u(e,n),function(e){if(!e)return;t.editor.getContainer().setAttribute(vs,"")}(n)}(e))}));var f,p=(f=null,function(){return f||(f=(new ei).create())});function h(e){s.resizeLog=!1;var n=s.resizeTarget;if(n){var r=n.table;if(s.resizeInfo){var o=s.resizeInfo,i=o.colElement,a=o.colWidth,c=o.originColWidth,u=o.originTableWidth,l=i.nextElementSibling,f=a-c,h=ni.getElementModel(r).getCols(),v={cols:[],needSyncTableSize:!l};h.forEach((function(t){t===i?v.cols.push(a):t===l?v.cols.push(ni.getColWidth(t,u)-f):v.cols.push(ni.getColWidth(t,u))})),cs(r,v)}ir(p()),function(e){e&&t.editor.getContainer().removeAttribute(vs)}(r),s.resizeTarget=null,s.resizeInfo=null}}return t.on("tableResizeMove",(function(o){if(s.resizeTarget||e.isSelectMoving())!function(t){var e=s.resizeTarget;if(e){t.preventDefault(),t.stopPropagation();var o=u(t,e.table),i=s.startEventPos,a=o.x-i.x,c=e.tableWidth,l=p(),f=n();if(l.parentElement!==f){var h=r.getCTM(e.table,f),v=e.table.offsetWidth,d=e.table.offsetHeight;r.select(l).css({left:-v/2+"px",top:-d/2+"px",width:v+"px",height:d+"px",transform:h}),f.appendChild(l)}var m=r.QRDeCompositionMatrix(r.getCTM(l,document.body)).scale;a/=(null==m?void 0:m.x)||1;var y=e.colElement.nextElementSibling,g=e.colWidth,b=-(g-10),x=y?ni.getColWidth(y,c)-10:0;a<b&&(a=b),y&&a>x&&(a=x);var E=c;l.style.width="".concat(E,"px");var w=e.x+a-e.table.scrollLeft;l.firstElementChild.style.left="".concat(w,"px");var C=e.colWidth+a;s.resizeInfo={colElement:e.colElement,originTableWidth:c,originColWidth:g,colWidth:C}}}(o);else{var i=l(o),a=t.editor.getWrapper();a.style.cursor=i?r.getCursorStyle({pointA:i.points[0],pointB:i.points[3]}):""}})),t.on("tableResizeEnd",(function(t){s.resizeTarget&&h()})),e.isResizing=function(){return!!s.resizeTarget},{}};var ms=function(){function t(e,n){f()(this,t),this.children=[],this.selector=e||"",this.content=n||""}return h()(t,[{key:"add",value:function(t){this.children.push(t)}},{key:"remove",value:function(t){var e=this.children.indexOf(t);-1!==e&&this.children.splice(e,1)}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.selector||"",n=this.children.map((function(t){return t.toString(e)})).join("\n"),r="".concat(t).concat(e);if(r){var o="".concat(r,"{\n").concat(this.content||"","}\n");return o+n}return n||this.content?"\n".concat(this.content||"","\n").concat(n,"\n"):""}},{key:"toElement",value:function(){var e=t.createElement();return e.textContent=this.toString(),e}}],[{key:"createElement",value:function(){var t=document.createElement("style");return t.type="text/css",t}}]),t}(),ys=Array.prototype.slice,gs=qo("select-none"),bs=function(t){var e=document.createDocumentFragment();if(ur(t))return e;var n=t.firstElementChild;if(k.isElementInstanceOf(n,w))for(;n.firstElementChild;)e.appendChild(n.firstElementChild);return e},xs=function(t,e){var n=e.getProxyElement,o=e.findCell;var i={selectionStartTarget:null,selectionMoveTarget:null};t.register("mousemove:tableSelectMove",(function(t){if(!e.isResizing())return r.findUpUtil(t.target,(function(t){return rs(t)}),(function(t){return t===n()}))})),t.register("mousedown:tableSelectStart",(function(t){if(0===t.button&&!k.isElementInstanceOf(t.target,N)){var e=o(t.target);return e||void 0}})),t.register("mouseleave:tableSelectEnd",(function(t){if(0===t.button)return i.selectionStartTarget?t.target:void 0})),t.register("mouseup:tableSelectEnd",(function(t){if(0===t.button)return t.target})),t.on("tableSelectStart",(function(e){!function(e){var n=e.target;i.selectionStartTarget=n,i.selectionMoveTarget=n,a=function(){!function(e){if(!e)return;t.editor.getContainer().setAttribute(gs,"")}(is(n))}}(e)}));var a=null;var c,u,l=(u=1,function(){return c?{element:c,id:u++}:{element:c=ms.createElement(),id:u++}});function s(t,e){if(t){var n=ni.getElementModel(t),r=e||{},o=r.minRow,i=r.maxRow,a=r.minCol,c=r.maxCol;t._selectOptions=e;for(var u,s,f=qo("style-id"),p=n.getRows(),h=p.length,v=l(),d=v.element,m=v.id,y=[],g=o;e&&g<=i&&g<h;g++)for(var b=g>=o&&g<=i,x=p[g],E=x.children,w=x.childElementCount,C="[".concat(f,'="').concat(m,'"]>table>tbody>tr[index="').concat(g,'"]'),O=0;O<w;O++){var k=E[O],_=0|k.getAttribute("index");if(_>c)break;if(b&&_>=a&&_<=c){var R=ss(k),S=g===o,A=g+ls(k)-1===i,M=_===a,T=_+R-1===c,P='>td[index="'.concat(_,'"]'),j="".concat(C).concat(P),z=[],N="".concat(2,"px;");M&&z.push("\n              border-left-width:".concat(N,";\n            ")),T&&z.push("\n              border-right-width:".concat(N,";\n            ")),S&&z.push("\n              border-top-width:".concat(N,";\n            ")),A&&z.push("\n              border-bottom-width:".concat(N,";\n            ")),z.length>0&&(y.push("".concat(j,":before{\n              content:'';\n              ").concat(z.join("\n"),"\n            }")),y.push("".concat(j,":after{\n              content:'';\n              ").concat(z.join("\n"),"\n            }"))),u||(u=k),s=k}}0===y.length?(ir(d),d.textContent="",t.removeAttribute(f)):(t.setAttribute(f,"".concat(m)),d.parentElement!==t&&t.appendChild(d),d.textContent=y.join("\n")),e&&(e.cellSelection={startCell:u,endCell:s})}}function f(t,e,n){var r=0|t.getAttribute("index"),o=ss(t),i=e,a=i+ls(t)-1,c=r+o-1,u={minRow:i,maxRow:a,minCol:r,maxCol:c},l=function(t,e){return as(t.minCol,t.maxCol,e.minCol)||as(t.minCol,t.maxCol,e.maxCol)?as(e.minRow,e.maxRow,t.minRow)||as(e.minRow,e.maxRow,t.maxRow):as(t.minRow,t.maxRow,e.minRow)||as(t.minRow,t.maxRow,e.maxRow)?as(e.minCol,e.maxCol,t.minCol)||as(e.minCol,e.maxCol,t.maxCol):void 0},s=Object.assign({},n),f=!1;return(l(n,u)||l(u,n))&&(s.minRow>i&&(s.minRow=i,s.updated=!0),s.minCol>r&&(s.minCol=r,s.updated=!0),s.maxRow<a&&(s.maxRow=a,s.updated=!0),s.maxCol<c&&(s.maxCol=c,s.updated=!0),f=!0),{area:s,success:f,point:{minRow:i,maxRow:a,minCol:r,maxCol:c}}}function p(t){var e=i.selectionStartTarget;if(e){var n=i.selectionMoveTarget,r=o(t.native.target);if(r&&(i.selectionMoveTarget=r,n!==e)){a&&(a(),a=null);var c={rowIndex:0|r.parentNode.getAttribute("index"),colIndex:0|r.getAttribute("index"),rowspan:ls(r),colspan:ss(r)},u={rowIndex:0|e.parentNode.getAttribute("index"),colIndex:0|e.getAttribute("index"),rowspan:ls(e),colspan:ss(e)},l=Math.min(c.rowIndex,u.rowIndex),p=Math.max(c.rowIndex+c.rowspan-1,u.rowIndex+u.rowspan-1),h=Math.min(c.colIndex,u.colIndex),v=Math.max(c.colIndex+c.colspan-1,u.colIndex+u.colspan-1),d=is(e),m=is(r);if(d!==m)return i.selectionStartTarget=i.selectionMoveTarget=r,void s(d);s(m,function t(e,n){for(var r=ni.getElementModel(e).getRows(),o=r.length,i=-1,a=-1,c=-1,u=-1,l=!1,s=0;s<o;s++){var p=r[s],h=p.children,v=p.childElementCount,d=0|p.getAttribute("index");if(d>n.maxRow)break;for(var m=0;m<v;m++){var y=f(h[m],d,n),g=y.area,b=y.success,x=y.point;if(g.updated)return g.updated=!1,t(e,g);if(b){var E=x.minRow,w=x.maxRow,C=x.minCol,O=x.maxCol;l?(C<i&&(i=C),O>a&&(a=O),E<c&&(c=E),w>u&&(u=w)):(i=C,a=O,c=E,u=w,l=!0)}}}return{minRow:c,maxRow:u,minCol:i,maxCol:a}}(m,{minRow:l,maxRow:p,minCol:h,maxCol:v}))}}}function h(e){return t.editor.commandManager.execCommand("tableSelection",e)}function v(){var e=is(i.selectionStartTarget),n=h({type:"getSelection"});if(e){if(function(e){e&&t.editor.getContainer().removeAttribute(gs)}(e),a)a=null,n&&n.table!==e?s(n.table):s(e),h({type:"setSelection",value:null});else if(i.selectionStartTarget){t.editor.removeRanges();var r=e._selectOptions;n&&n.table!==e&&s(n.table),r&&h({type:"setSelection",value:{table:e,selectOptions:r}})}i.selectionStartTarget=null,i.selectionMoveTarget=null}else n&&(h({type:"setSelection",value:null}),s(n.table))}return t.on("tableSelectMove",(function(t){p(t)})),t.on("tableSelectEnd",(function(t){v()})),e.isSelectMoving=function(){return!!i.selectionStartTarget},{mergeCells:function(t){var e=t._selectOptions;if(e){for(var n=ni.getElementModel(t),r=e.minRow,o=e.maxRow,i=e.minCol,a=e.maxCol,c=n.getRows(),u=[],l=null,s=r;s<=o;s++)for(var f=c[s],p=ys.call(f.children),h=p.length,v=0;v<h;v++){var d=p[v],m=0|d.getAttribute("index");m<i||m>a||(s>r||m!==i?(u.push(bs(d)),ir(d)):(l=d,ss(d,a-i+1),ls(d,o-r+1)))}l&&k.isElementInstanceOf(l.firstElementChild,w)&&u.forEach((function(t){l.firstElementChild.appendChild(t)}))}},selectTableArea:s}},Es=Je("ky-native"),ws=Es.prefixName,Cs=Es.prefixClassName,Os=new $l;Os.lang(Jl.get(["en","zh-CN"],"en")),function(t){t.use(n(30)),t.use(n(31))}(Os);var ks=Os,_s=ks.forkWithPrefix("component.colorPicker.");function Rs(){return Ss('\n    <div class="'.concat(Cs("color-picker"),'" data-more="false" data-visible="true" spellcheck="false">\n      <div class="').concat(Cs("color-groups"),'">\n        <div class="').concat(Cs("default-colors"),'">\n          \n        </div>\n        <div class="').concat(Cs("basic-colors-wrapper"),'">\n          <header class="').concat(Cs("color-group-header"),'"><span>').concat(_s.get({lid:"baseColor",default:"baseColor"}),'</span></header>\n          <div class="').concat(Cs("basic-colors"),'"></div>\n        </div>\n        <div class="').concat(Cs("custom-colors-wrapper"),'">\n          <header class="').concat(Cs("color-group-header"),'"><span>').concat(_s.get({lid:"customColor",default:"custom color"}),'</span></header>\n          <div class="').concat(Cs("custom-colors"),'"></div>\n        </div>\n      </div>\n      <div class="').concat(Cs("more-colors"),'">\n        <div class="').concat(Cs("txt-btn"),'" data-click="onMoreColorClick">').concat(_s.get({lid:"moreColor",default:"more color"}),'</div>\n      </div>\n      <div class="').concat(Cs("custom-color-setting"),'">\n        <div data-click="onCvsClick" class="').concat(Cs("color-cvs"),'">\n          <div class="').concat(Cs("hsv-s"),'">\n            <div class="').concat(Cs("hsv-v"),'"></div>\n          </div>\n          <div data-click="onSliderClick" data-type="current" class="').concat(Cs("color-current")," ").concat(Cs("color-block-slider"),'"></div>\n        </div>\n        <div class="').concat(Cs("hsv-ha"),'">\n          <div>\n            <div class="').concat(Cs("color-item-preview")," ").concat(Cs("color-item"),'" data-click="onCurrentColorClick"></div>\n          </div>\n          <div>\n            <div data-click="onTrackClick" class="').concat(Cs("hsv-h"),'">\n              <div y="0" data-click="onSliderClick" data-type="hsv-h" class="').concat(Cs("color-block-slider"),'"></div>\n            </div>\n            <div data-type="sliderTrack" data-click="onTrackClick" class="').concat(Cs("hsv-a"),'">\n              <div y="0" data-click="onSliderClick" data-type="hsv-a" class="').concat(Cs("color-block-slider"),'"></div>\n            </div>\n          </div>\n        </div>\n        <div class="').concat(Cs("color-info"),'">\n          <table>\n            <colgroup>\n              <col>\n              <col style="width:32px">\n              <col style="width:32px">\n              <col style="width:32px">\n              <col style="width:32px">\n            </colgroup>\n            <tbody>\n              <tr>\n                <td>\n                  <div><input class="').concat(Cs("color-info-hex"),'" @change="onHexInputChange"/></div>\n                  <div>HEX</div>\n                </td>\n                <td>\n                  <div><input class="').concat(Cs("color-info-r"),'" @change="onColorRInputChange"/></div>\n                  <div>R</div>\n                </td>\n                <td>\n                  <div><input class="').concat(Cs("color-info-g"),'" @change="onColorGInputChange"/></div>\n                  <div>G</div>\n                </td>\n                <td>\n                  <div><input class="').concat(Cs("color-info-b"),'" @change="onColorBInputChange"/></div>\n                  <div>B</div>\n                </td>\n                <td>\n                  <div><input class="').concat(Cs("color-info-a"),'" @change="onColorAlphaInputChange"/></div>\n                  <div>A</div>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n    '))}function Ss(t){return(new DOMParser).parseFromString(t,"text/html").body.firstElementChild}function As(t){(null==t?void 0:t.parentNode)&&t.parentNode.removeChild(t)}function Ms(t){for(;t.firstChild;)As(t.firstChild)}n(32);function Ts(t){return"#"===t[0]&&(t=t.slice(1)),3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:parseInt(t[0]+t[1],16),g:parseInt(t[2]+t[3],16),b:parseInt(t[4]+t[5],16)}}function Ps(t){var e=t.toString(16);return e.length<2&&(e="0"+e),e}function js(t){return"".concat(Ps(t.r)).concat(Ps(t.g)).concat(Ps(t.b))}function zs(t){var e=t.r/255,n=t.g/255,r=t.b/255,o=Math.max(e,n,r),i=o-Math.min(e,n,r),a={h:0,s:0,v:0};return 0===i?a.h=0:o===e?a.h=60*(n-r)/i:o===n?a.h=60*((r-e)/i+2):o===r&&(a.h=60*((e-n)/i+4)),a.s=0===o?0:i/o,a.v=o,a}function Ns(t){var e=t.h,n=t.s,r=t.v,o=n*r,i=o*(1-Math.abs(e/60%2-1)),a=r-o,c={r:0,g:0,b:0};return e<60?Object.assign(c,{r:o,g:i,b:0}):e>=60&&e<120?Object.assign(c,{r:i,g:o,b:0}):e>=120&&e<180?Object.assign(c,{r:0,g:o,b:i}):e>=180&&e<240?Object.assign(c,{r:0,g:i,b:o}):e>=240&&e<300?Object.assign(c,{r:i,g:0,b:o}):e>=300&&e<360&&Object.assign(c,{r:o,g:0,b:i}),c.r=255*(c.r+a)|0,c.g=255*(c.g+a)|0,c.b=255*(c.b+a)|0,c}function Bs(t,e){return void 0===e&&(e=1),"rgba(".concat(t.r,",").concat(t.g,",").concat(t.b,",").concat(e,")")}function Is(t){return"rgb(".concat(t.r,",").concat(t.g,",").concat(t.b,")")}function Ls(t){if(!t)return{type:"rgba",value:{r:255,g:255,b:255,a:0}};var e={type:"hex",value:"#000"};if("#"===(t=t.trim())[0])return e.value=t,e;var n=t.match(/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d\.]+)\s*)?\)$/);return n?(void 0!==n[5]?e={type:"rgba",value:{r:Number(n[1]),g:Number(n[2]),b:Number(n[3]),a:Number(n[5])}}:void 0!==n[3]&&(e={type:"rgba",value:{r:Number(n[1]),g:Number(n[2]),b:Number(n[3]),a:1}}),e):e}function Ds(t){var e=function(t){var e=Ls(t);return"hex"===e.type?Ts(e.value):e.value}(t),n=zs(e),r=Math.max(n.s,1-n.v)>.5?0:1;return n.h=(n.h+180)%360,n.v=1-r,n.s=r,Bs(e=Ns(n))}var Hs=["@change","@click"];function Vs(t,e){var n=function(t){Hs.forEach((function(n){var r=t.getAttribute(n)||"";r&&(t.removeAttribute(n),t.addEventListener(n.slice(1),(function(t){e.emit(r,null,[t])})))}));for(var r=t.firstElementChild;r;)n(r),r=r.nextElementSibling};n(t)}var Us,Fs=(Us=function(t,e){return(Us=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Us(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ws=function(t){function e(e){var n=t.call(this,e)||this;return n.init(),n}return Fs(e,t),e.prototype.init=function(){var t=this,e={blockElement:null,startPoint:null,startPos:null},n=this;var o=".".concat(Cs("color-block-slider")),i=function(){return t.getProxyElement()};this.register("mousedown:blockDragStart",(function(t){return r.findUpUtil(t.target,(function(t){if(t.matches(o))return!!t}),(function(t){return t===i()}))})),this.register("mousemove:blockDragMove",(function(t){return e.blockElement})),this.register("mouseup:blockDragEnd,mouseleave:blockDragEnd",(function(){return e.blockElement})),this.register("click:itemClick",(function(t){return r.findUpUtil(t.target,(function(t){if(t.getAttribute("data-click"))return!!t}),(function(t){return t===i()}))}));var a={"hsv-h":function(t,e,r){var o=e.parentElement.getBoundingClientRect(),i=r.x/o.width*6;n.emit("hueChange",null,[t,{h:Math.min(360,60*i|0)}])},"hsv-a":function(t,e,r){var o=e.parentElement.getBoundingClientRect(),i=r.x/o.width;i=1*i.toFixed(2),n.emit("alphaChange",null,[t,{alpha:i}])},current:function(t,e,r){var o=e.parentElement.getBoundingClientRect(),i=r.x/o.width,a=r.y/o.height,c=1*i.toFixed(2),u=1*a.toFixed(2);n.emit("selectChange",null,[t,{s:c,v:1-u}])}};this.on("blockDragStart",(function(t){t.stopPropagation();var n=t.target;e.startPos=r.getPosition(t,n.parentElement);var o=n.getBoundingClientRect(),i=n.parentElement.getBoundingClientRect();e.blockElement=n,e.startPoint={x:o.x-i.x,y:o.y-i.y}})),this.on("blockDragMove",(function(t){var n=t.target,o=e.startPos,i=e.startPoint,c=r.getPosition(t,t.target.parentElement),u=n.parentElement.getBoundingClientRect(),l=c.x-o.x,s=c.y-o.y,f=i.x+l;f=Math.max(0,f),f=Math.min(f,u.width),n.style.left="".concat(f,"px");var p={x:f,y:0};if("0"!==n.getAttribute("y")){var h=i.y+s;h=Math.max(0,h),h=Math.min(h,u.height),n.style.top="".concat(h,"px"),p.y=h}var v=n.getAttribute("data-type");a[v]&&a[v](t,n,p)})),this.on("blockDragEnd",(function(t){t.stopPropagation(),e.blockElement=null,e.startPoint=null,e.startPos=null}));var c={onSliderClick:function(t){t.stopPropagation()},onTrackClick:function(t){this.onCvsClick(t)},onCvsClick:function(t){var e=t.target,n=r.getPosition(t,e),i=e.querySelector(o),c=e.getBoundingClientRect();n.x=Math.max(0,n.x),n.x=Math.min(c.width,n.x),i&&(i.style.left="".concat(n.x,"px")),"0"!==i.getAttribute("y")&&(n.y=Math.max(0,n.y),n.y=Math.min(c.height,n.y),i.style.top="".concat(n.y,"px"));var u=i.getAttribute("data-type");a[u]&&a[u](t,i,n)},onColorInfoClick:function(t){return function(t){if(navigator.clipboard&&navigator.clipboard.writeText)return navigator.clipboard.writeText(t)}(t.target.textContent)},onCurrentColorClick:function(t){n.emit("previewColorClick",null,[t])},onMoreColorClick:function(t){t.stopPropagation(),n.emit("toggleCustomPanel",null,[t])},onColorItemClick:function(t){n.emit("colorClick",null,[t])}};this.on("itemClick",(function(t){var e=t.target.getAttribute("data-click");e&&c[e]&&c[e](t)}))},e.prototype.mount=function(e){t.prototype.mount.call(this,e),Vs(this.getProxyElement(),this)},e}(Tt),qs={read:function(t){try{var e=localStorage.getItem(t);if(e){var n=JSON.parse(e);if(Array.isArray(n))return n}}catch(t){console.warn(t)}return[]},write:function(t,e){try{localStorage.setItem(t,JSON.stringify(e.filter((function(t){return!!t}))))}catch(t){console.warn(t)}}},Ks=function(){function t(t){void 0===t&&(t=30),this._items=[],this._map={},this._maxSize=30,this._storage=qs,this.key=ws("__COLOR_PICKER__"),this._maxSize=t,this.setItems(this._storage.read(this.key))}return t.prototype.setStorage=function(t){this._storage=t},t.prototype.validateSize=function(){for(var t=this._map,e=this._items,n=this._maxSize;n<e.length;n++){delete t[e[n]]}e.length=this._maxSize},t.prototype.setItems=function(t){if(void 0===t&&(t=[]),t){var e=[],n={};t.slice(0,30).forEach((function(t){n.hasOwnProperty(t)||(e.push(t),n[t]=!0)})),this._items=e,this._map=n,this._storage.write(this.key,this._items)}},t.prototype.addColor=function(t){var e=this._map,n=this._items;if(e.hasOwnProperty(t)){var r=n.indexOf(t);n.splice(r,1),n.unshift(t)}else n.unshift(t),e[t]=!0;this.validateSize(),this._storage.write(this.key,this._items)},t.prototype.removeColor=function(t){var e=this._map,n=this._items;if(e.hasOwnProperty(t)){var r=n.indexOf(t);n.splice(r,1),delete e[t]}this._storage.write(this.key,this._items)},t.prototype.getItems=function(){return[].concat(this._items)},t}(),Zs=function(){function t(t){this.hex="",this.rgb={r:255,g:255,b:255},this.hsv={h:1,s:0,v:0},this.alpha=1,t?this.setColor(t):this.setHsv({h:0,s:0,v:1})}return t.equalsWith=function(e,n){var r=new t(e),o=new t(n);return r.equalsWith(o)},t.prototype.equalsWith=function(e){return e instanceof t||(e=new t(e)),e.alpha===this.alpha&&e.hex===this.hex},t.prototype.setColor=function(t){var e=Ls(t);if("hex"===e.type)this.setHex(e.value);else if("rgba"===e.type){var n=e.value;this.setRgb(n),this.setAlpha(n.a)}},t.prototype.setHex=function(t){this.hex=t,Object.assign(this.rgb,Ts(t))},t.prototype.setRgb=function(t,e,n){var r=this.rgb;"object"==typeof t?(r.r=t.r,r.g=t.g,r.b=t.b):(r.r=t,r.g=e,r.b=n),this.hex=js(r),Object.assign(this.hsv,zs(r))},t.prototype.setHsv=function(t){var e=Ns(t);Object.assign(this.rgb,e),this.hex=js(e),Object.assign(this.hsv,t)},t.prototype.setAlpha=function(t){this.alpha=t},t}(),Ys=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Xs(){var t=document.createElement("div");return t.className=Cs("color-row"),t}function Gs(){var t=document.createElement("div"),e=Ss('<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M417.185185 768c-9.481481 0-18.962963-3.792593-26.548148-11.377778l-246.518518-246.518518c-15.17037-15.17037-15.17037-37.925926 0-53.096297 15.17037-15.17037 37.925926-15.17037 53.096296 0L417.185185 676.977778l409.6-409.6c15.17037-15.17037 37.925926-15.17037 53.096296 0 15.17037 15.17037 15.17037 37.925926 0 53.096296l-436.148148 436.148148c-7.585185 7.585185-17.066667 11.377778-26.548148 11.377778z"></path></svg>');return t.className=Cs("color-item"),t.setAttribute("data-click","onColorItemClick"),t.appendChild(e),t._icon=e,t}function Js(t){for(var e=t&&t.nextElementSibling;e;){var n=e.nextElementSibling;As(e),e=n}}function Qs(t,e){var n;if(!e||0===e.length){(n=t.firstElementChild)?(Ms(n),Js(n)):(n=Xs(),t.appendChild(n));var r=document.createElement("span");return r.className=Cs("empty-text"),r.innerText="暂无",n.appendChild(r),void(n._empty=!0)}var o=null;e.forEach((function(e,r){r%10==0?((n=n?n.nextElementSibling:t.firstElementChild)?n._empty&&(Ms(n),n._empty=!1):(n=Xs(),t.appendChild(n)),o&&Js(o),(o=n.firstElementChild)||(o=Gs(),n.appendChild(o))):o&&o.nextElementSibling?o=o.nextElementSibling:(o=Gs(),n.appendChild(o)),o._icon.style.fill=Ds(e),o.style.background="transparent"===e?"":e})),Js(n),Js(o)}var $s=function(t){function e(e){var n=t.call(this,e)||this;return n.relElements={},n}return Ys(e,t),e.prototype.initRelElements=function(t){var e=this.relElements;["hex","r","g","b","a"].forEach((function(n){var r=".".concat(Cs("color-info-"+n));e[n]=t.querySelector(r)})),e.cvs=t.querySelector(".".concat(Cs("color-cvs"))),e.preview=t.querySelector(".".concat(Cs("color-item-preview"))),e.sliderH=t.querySelector(".".concat(Cs("hsv-h")," .").concat(Cs("color-block-slider"))),e.sliderA=t.querySelector(".".concat(Cs("hsv-a")," .").concat(Cs("color-block-slider"))),e.sliderCvs=t.querySelector(".".concat(Cs("color-cvs")," .").concat(Cs("color-block-slider")))},e.prototype.syncRelElementsState=function(){var t=this.relElements,e=this.hsv,n=t.sliderH;if(n){var r=n.parentElement.getBoundingClientRect(),o=e.h/360*r.width;n.style.left="".concat(o,"px");var i=t.sliderA,a=i.parentElement.getBoundingClientRect().width*this.alpha;i.style.left="".concat(a,"px");var c=t.sliderCvs,u=c.parentElement.getBoundingClientRect(),l=e.s*u.width,s=(1-e.v)*u.height;c.style.left="".concat(l,"px"),c.style.top="".concat(s,"px")}},e.prototype.syncPreview=function(){var t=this.relElements,e=this.alpha;t.preview.style.backgroundColor=Bs(this.rgb,e)},e.prototype.syncCvsElementBgColor=function(){var t=this.relElements.cvs,e=this.hsv;if(t){var n=e.h/60,r=Math.floor(n),o=Math.ceil(n),i=function(t,e){return{r:(t.r+e.r)/2,g:(t.g+e.g)/2,b:(t.b+e.b)/2}}(tf[r],tf[o]);t.style.backgroundColor=Is(i)}},e.prototype.sync=function(t){var e=this.hex,n=this.rgb,r=n.r,o=n.g,i=n.b,a=this.alpha,c=[{key:"hex",value:"#".concat(e)},{key:"r",value:r},{key:"g",value:o},{key:"b",value:i},{key:"a",value:a}],u=this.relElements;c.forEach((function(e){var n=u[e.key];n&&(t&&-1===t.indexOf(e.key)||(n.value=String(e.value).toUpperCase()))})),this.syncPreview()},e}(Zs),tf=["#f00","#ff0","#0f0","#0ff","#00f","#f0f","#f00"].map((function(t){return Ts(t)})),ef=function(){function t(){this._colorInfo=new $s,this._customColors=new Ks,this._customPanelVisible=!1,this._syncCustomTimeout=null,this.eventManager=new Ws,this.bindEvents()}return t.prototype.getContainer=function(){return this._container},t.prototype._renderDefaultColorItems=function(t){Qs(t.querySelector(".".concat(Cs("default-colors"))),[this.getActiveColor()||"#000"])},t.prototype._renderBasicColorItems=function(t){Qs(t.querySelector(".".concat(Cs("basic-colors"))),["transparent","rgb(0, 0, 0)","rgb(38, 38, 38)","rgb(89, 89, 89)","rgb(140, 140, 140)","rgb(191, 191, 191)","rgb(217, 217, 217)","rgb(233, 233, 233)","rgb(245, 245, 245)","rgb(255, 255, 255)","rgb(245, 34, 45)","rgb(250, 84, 28)","rgb(250, 140, 22)","rgb(250, 219, 20)","rgb(82, 196, 26)","rgb(19, 194, 194)","rgb(24, 144, 255)","rgb(47, 84, 235)","rgb(114, 46, 209)","rgb(235, 47, 150)","rgb(255, 232, 230)","rgb(255, 236, 224)","rgb(255, 239, 209)","rgb(252, 252, 202)","rgb(228, 247, 210)","rgb(211, 245, 240)","rgb(212, 238, 252)","rgb(222, 232, 252)","rgb(239, 225, 250)","rgb(250, 225, 235)","rgb(255, 163, 158)","rgb(255, 187, 150)","rgb(255, 213, 145)","rgb(255, 251, 143)","rgb(183, 235, 143)","rgb(135, 232, 222)","rgb(145, 213, 255)","rgb(173, 198, 255)","rgb(211, 173, 247)","rgb(255, 173, 210)","rgb(255, 77, 79)","rgb(255, 122, 69)","rgb(255, 169, 64)","rgb(255, 236, 61)","rgb(115, 209, 61)","rgb(54, 207, 201)","rgb(64, 169, 255)","rgb(89, 126, 247)","rgb(146, 84, 222)","rgb(247, 89, 171)","rgb(207, 19, 34)","rgb(212, 56, 13)","rgb(212, 107, 8)","rgb(212, 177, 6)","rgb(56, 158, 13)","rgb(8, 151, 156)","rgb(9, 109, 217)","rgb(29, 57, 196)","rgb(83, 29, 171)","rgb(196, 29, 127)","rgb(130, 0, 20)","rgb(135, 20, 0)","rgb(135, 56, 0)","rgb(97, 71, 0)","rgb(19, 82, 0)","rgb(0, 71, 79)","rgb(0, 58, 140)","rgb(6, 17, 120)","rgb(34, 7, 94)","rgb(120, 6, 80)"])},t.prototype._renderCustomColorItems=function(t){var e=this._customColors;Qs(t.querySelector(".".concat(Cs("custom-colors"))),e.getItems())},t.prototype._renderColorItems=function(t){this._renderDefaultColorItems(t),this._renderBasicColorItems(t),this._renderCustomColorItems(t)},t.prototype.bindEvents=function(){var t=this,e=this.eventManager;e.on("hueChange",(function(e,n){var r=n.h;t.setCustomHsv({h:r})})),e.on("selectChange",(function(e,n){var r=n.s,o=n.v;t.setCustomHsv({s:r,v:o})})),e.on("alphaChange",(function(e,n){var r=n.alpha;t.setCustomAlpha(r)})),e.on("toggleCustomPanel",(function(){var e=!t.isCustomPanelVisible();t.setCustomPanelVisible(e)})),e.on("onHexInputChange",(function(e){var n=zs(Ts(e.target.value));t.setCustomHsv(n)}));var n=function(e,n){var r;n=n||0;var o=t._colorInfo,i=zs(Object.assign({},o.rgb,((r={})[e]=n,r)));o.setHsv(Object.assign({},o.hsv,i)),o.syncRelElementsState(),o.syncPreview(),o.syncCvsElementBgColor()};e.on("onColorRInputChange",(function(t){n("r",t.target.value)})),e.on("onColorGInputChange",(function(t){n("g",t.target.value)})),e.on("onColorBInputChange",(function(t){n("b",t.target.value)})),e.on("onColorAlphaInputChange",(function(e){var n=e.target.value||1,r=t._colorInfo;r.setAlpha(n),r.syncPreview(),r.syncRelElementsState()})),e.on("previewColorClick",(function(n){var r=t._customColors,o=n.target.style.backgroundColor||"transparent";r.addColor(o),t._renderCustomColorItems(t.getContainer()),t.setActiveColor(o),t._renderDefaultColorItems(t.getContainer()),e.emit("change",null,[o])})),e.on("colorClick",(function(n){var r=n.target.style.backgroundColor||"transparent";t.setActiveColor(r),t._renderDefaultColorItems(t.getContainer()),e.emit("change",null,[r])}))},t.prototype.setCustomHex=function(t){var e=Ts(t);this.setCustomRgb(e.r,e.g,e.b)},t.prototype.setCustomColor=function(t){this._colorInfo.setColor(t)},t.prototype.getRgbaColor=function(){return Bs(this._colorInfo.rgb)},t.prototype.getCustomRgbColor=function(){return Is(this._colorInfo.rgb)},t.prototype.getCustomHexColor=function(){return this._colorInfo.hex},t.prototype.getCustomRgb=function(){return Object.assign({},this._colorInfo.rgb)},t.prototype.setCustomRgb=function(t,e,n){var r=zs("object"==typeof t?t:{r:t,g:e,b:n});this.setCustomHsv(r)},t.prototype.setCustomHsv=function(t){void 0===t&&(t={});var e=this._colorInfo;e.setHsv(Object.assign({},e.hsv,t)),t.hasOwnProperty("h")&&e.syncCvsElementBgColor(),e.sync()},t.prototype.setCustomAlpha=function(t){void 0===t&&(t=1);var e=this._colorInfo;e.setAlpha(t),e.sync(["a"])},t.prototype.isCustomPanelVisible=function(){return this._customPanelVisible},t.prototype.setCustomPanelVisible=function(t){void 0===t&&(t=!1),this._customPanelVisible=!!t;var e=this.getContainer();e&&e.setAttribute("data-more",String(t))},t.prototype.setVisible=function(t){void 0===t&&(t=!1);var e=this.getContainer();e&&(e.setAttribute("data-visible",String(t)),this.setCustomPanelVisible(!1))},t.prototype.setActiveColor=function(t){this.getContainer()&&function(t,e){for(var n=t.querySelectorAll(".".concat(Cs("color-groups")," .").concat(Cs("color-item"))),r=e?new Zs(e):null,o=Cs("active-item"),i=n.length,a=0;a<i;a++){var c=n[a];r&&r.equalsWith(c.style.backgroundColor)?c.setAttribute(o,"true"):c.removeAttribute(o)}}(this.getContainer(),t),this._activeColor=t},t.prototype.getActiveColor=function(){return this._activeColor},t.prototype.createContainerNode=function(){var t=Rs();return this._container=t,this._renderColorItems(t),this._colorInfo.initRelElements(t),this.eventManager.mount(t),this._activeColor&&this.setActiveColor(this._activeColor),this._colorInfo.sync(),t},t.prototype.getContainerNode=function(){return this._container||(this._container=this.createContainerNode()),this._container},t.prototype.render=function(){return this.getContainerNode(),this._container},t}();function nf(){return r.toNode('\n    <div class="'.concat(Cs("dropdown"),'">\n      <div class="').concat(Cs("dropdown-selection-wrapper"),'" @click="togglePopupVisible">\n        <div class="').concat(Cs("dropdown-selection"),'" @click="selectionClick"></div>\n        <div class="').concat(Cs("dropdown-tri"),'" tabindex="-1">\n          ').concat('<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M512 640l170.666667-213.333333H341.333333z"></path></svg>','\n        </div>\n      </div>\n      <div class="').concat(Cs("dropdown-popup"),'" @click="popupClick"></div>\n    </div>\n  '))}n(33);var rf=ks.forkWithPrefix("component.dropdown."),of=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),af=Object(_t.findUniqueKey)("data");function cf(t,e){if(1===arguments.length)return t[af];2===arguments.length&&(t[af]=e)}function uf(t){var e=document.createElement("span");return e.className=Cs("text-wrapper"),e.textContent=t,e}var lf=function(t){function e(e){var n=t.call(this)||this;return n.props=Object.assign({},e),n.init(),n}return of(e,t),e.prototype.init=function(){var t=this.props,e=nf();e.className=e.className+" "+(t.className||"");var n=e.querySelector(".".concat(Cs("dropdown-selection"))),r=e.querySelector(".".concat(Cs("dropdown-popup")));this._selection=n,this._popup=r,this._container=e,Vs(e,this),this.bindEvents()},e.prototype.updateProps=function(t){Object.assign(this.props,t),this.refresh()},e.prototype.bindEvents=function(){var t=this,e=!1,n=function(){e?e=!1:(document.removeEventListener("click",n),t.props.popupVisible&&t.updateProps({popupVisible:!1}))};this.on("togglePopupVisible",(function(r){!function(r){e=!0;var o=!t.props.popupVisible;o?document.addEventListener("click",n):document.removeEventListener("click",n),t.updateProps({popupVisible:o})}()})),this.on("popupClick",(function(e){var n=r.findUpUtil(e.target,(function(t){if(cf(t))return!!t}),(function(t){return t===e.currentTarget}));if(n){var o=cf(n),i=t.props.value;t.emit("itemClick",null,[o.key]),i!==o.key&&(t.updateProps({value:o.key,popupVisible:!1}),t.emit("change",null,[o.key]))}}))},e.prototype.refresh=function(){var t=this.props,e=this._selection;Ms(e);var n=function(t){if(t.renderSelection)return t.renderSelection(t);var e;if(t.value){var n=t.items.find((function(e){return e.key===t.value}));return n?"string"==typeof(e=n.render())&&(e=uf(e)):e=uf(t.value),e}return uf(rf.get({lid:"placeholder",default:"please select"}))}(t);n&&e.appendChild(n);var r=this._container,o=this._popup;if(Ms(o),t.popupVisible){var i=function(t){var e=t.items;if(t.renderItems)return t.renderItems(t);"function"==typeof e&&(e=e());var n=document.createElement("div");if(n.className=Cs("dropdown-popup-items"),!e||0===e.length){var r=document.createElement("div");return r.className=Cs("dropdown-empty-pop-item"),r.innerText=rf.get({lid:"emptyText",default:"no data"}),n.appendChild(r),n}return e&&e.forEach((function(e){var r,o=document.createElement("div");o.className="".concat(Cs("dropdown-pop-item")," ").concat(t.value===e.key?Cs("dropdown-pop-item-active"):""),!1!==t.selectable&&cf(o,e),"string"==typeof(r=e.render?e.render(t):e.key)&&(r=uf(r)),o.appendChild(r),n.appendChild(o)})),n}(this.props);i&&o.appendChild(i),r.setAttribute("data-visible","")}else r.removeAttribute("data-visible");r.setAttribute("mode",t.mode||"vertical"),r.setAttribute("align",t.align||"left")},e.prototype.render=function(){return this.refresh(),this._container},e}(Tt),sf=(n(34),ks.forkWithPrefix("component.linkSetting.")),ff=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pf=function(t){function e(e){return t.call(this)||this}return ff(e,t),e.prototype.createDomNode=function(){var t=this;if(this._container)return this._container;var e=document.createElement("div");e.className=Cs("link-setting");var n=document.createElement("div"),r=Cs("link-setting-row"),o=document.createElement("div");o.className=r;var i=document.createElement("label");i.innerText=sf.get("text"),o.appendChild(i);var a=document.createElement("input");a.type="text",o.appendChild(a),n.appendChild(o),(o=document.createElement("div")).className=r,(i=document.createElement("label")).innerText=sf.get({lid:"link",default:"link"}),o.appendChild(i);var c=document.createElement("textarea");o.appendChild(c),n.appendChild(o),n.addEventListener("click",(function(t){t.stopPropagation()})),e.appendChild(n);var u=document.createElement("footer"),l=document.createElement("div");return l.className=Cs("native-btn"),l.textContent=sf.get({lid:"ok",default:"ok"}),l.addEventListener("click",(function(){var e=a.value,n=c.value;t.emit("change",null,[{text:e,href:n}])})),u.appendChild(l),e.appendChild(u),this._container=e,e},e.prototype.render=function(){return this.createDomNode()},e}(Tt),hf=(n(35),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),vf=1,df=function(t){function e(e){var n=t.call(this)||this;return n.props={},Object.assign(n.props,e),n}return hf(e,t),e.prototype.createDom=function(){var t=this;if(this._container)return this._container;var e=document.createElement("div"),n=document.createElement("style");n.setAttribute("rel","stylesheet"),e.appendChild(n);for(var o=document.createElement("div"),i=0;i<10;i++){var a=document.createElement("div");a.className=Cs("setting-row");for(var c=0;c<10;c++){var u=document.createElement("div");u.className=Cs("setting-cell"),u.setAttribute("row",String(i)),u.setAttribute("col",String(c)),a.appendChild(u)}o.appendChild(a)}e.appendChild(o);var l=document.createElement("div"),s=vf++,f=Cs("table-setting");l.className=f,l.setAttribute("index",String(s)),l.appendChild(e);var p=document.createElement("footer");p.textContent="0 * 0",l.appendChild(p);var h={rows:0,cols:0},v=function(t,e){var r="";if(arguments.length>0){for(var o=[],i=0;i<=t;i++)for(var a=0;a<=e;a++)o.push(".".concat(f,'[index="').concat(s,'"] [row="').concat(i,'"][col="').concat(a,'"]{background-color:#eee;}'));r=o.join("\n"),h.rows=t+1,h.cols=e+1,p.innerText="".concat(h.rows," * ").concat(h.cols)}else h.rows=0,h.cols=0,p.innerText="0 * 0";n.textContent=r};return e.addEventListener("mousemove",(function(t){var n=r.getPosition(t,e),o=r.getElementScale(e),i=o.x,a=o.y,c=n.x/(i||1),u=n.y/(a||1),l=Math.ceil(u/24)-1,s=Math.ceil(c/24)-1;v(l,s)})),e.addEventListener("mouseleave",(function(t){v()})),e.addEventListener("click",(function(){h.rows&&h.cols&&t.emit("change",null,[{rows:h.rows,cols:h.cols}])})),this._container=l,l},e.prototype.render=function(){return this.createDom(),this._container},e}(Tt),mf=(n(36),ks.forkWithPrefix("component.imageSetting.")),yf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gf=function(t){function e(e){return t.call(this)||this}return yf(e,t),e.prototype.createDomNode=function(){var t=this;if(this._container)return this._container;var e=document.createElement("div");e.className=Cs("image-setting");var n=document.createElement("div"),r=Cs("image-setting-row"),o=document.createElement("div");o.className=r;var i=document.createElement("label");i.innerText=mf.get({lid:"imageTitle",default:"image title"}),o.appendChild(i);var a=document.createElement("input");a.type="text",o.appendChild(a),n.appendChild(o),(o=document.createElement("div")).className=r,(i=document.createElement("label")).innerText=mf.get({lid:"src",default:"image src"}),o.appendChild(i);var c=document.createElement("textarea");o.appendChild(c),n.appendChild(o),n.addEventListener("click",(function(t){t.stopPropagation()})),e.appendChild(n);var u=document.createElement("footer"),l=document.createElement("div");return l.className=Cs("native-btn"),l.textContent=mf.get({lid:"ok",default:"ok"}),l.addEventListener("click",(function(){var e=a.value,n=c.value;t.emit("change",null,[{title:e,src:n}])})),u.appendChild(l),e.appendChild(u),this._container=e,e},e.prototype.render=function(){return this.createDomNode()},e}(Tt),bf=(n(37),ks.forkWithPrefix("component.videoSetting.")),xf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ef=function(t){function e(e){return t.call(this)||this}return xf(e,t),e.prototype.createDomNode=function(){var t=this;if(this._container)return this._container;var e=document.createElement("div");e.className=Cs("video-setting");var n=document.createElement("div"),r=Cs("video-setting-row"),o=document.createElement("div");o.className=r;var i=document.createElement("label");i.innerText=bf.get({lid:"videoTitle",default:"video title"}),o.appendChild(i);var a=document.createElement("input");a.type="text",o.appendChild(a),n.appendChild(o),(o=document.createElement("div")).className=r,(i=document.createElement("label")).innerText=bf.get({lid:"src",default:"video src"}),o.appendChild(i);var c=document.createElement("textarea");o.appendChild(c),n.appendChild(o),n.addEventListener("click",(function(t){t.stopPropagation()})),e.appendChild(n);var u=document.createElement("footer"),l=document.createElement("div");return l.className=Cs("native-btn"),l.textContent=bf.get({lid:"ok",default:"ok"}),l.addEventListener("click",(function(){var e=a.value,n=c.value;t.emit("change",null,[{title:e,src:n}])})),u.appendChild(l),e.appendChild(u),this._container=e,e},e.prototype.render=function(){return this.createDomNode()},e}(Tt),wf=ws("disabled"),Cf=ws("hide"),Of=function(){function t(t){this.name="",this._enabled=!0,this._visible=!0,this.name=t.name,t.hasOwnProperty("visible")&&(this._visible=!!t.visible),t.hasOwnProperty("enabled")&&(this._enabled=!!t.enabled)}return t.prototype.connect=function(t){this.toolbar=t},t.prototype.onSelect=function(t){this.toolbar&&this.toolbar.onToolbarItemValueApply(t)},t.prototype.setValue=function(t){this._value=t},t.prototype.getValue=function(){return this._value},t.prototype.isEnabled=function(){return this._enabled},t.prototype.setEnabled=function(t){this._enabled=t;var e=this._container;e&&(t?e.removeAttribute(wf):e.setAttribute(wf,""))},t.prototype.setVisible=function(t){this._visible=t;var e=this._container;e&&(t?e.removeAttribute(Cf):e.setAttribute(Cf,""))},t.prototype.isVisible=function(){return this._visible},t.prototype.renderBody=function(){return null},t.prototype.getClassName=function(){return Cs("toolbar-item")},t.prototype._createContainer=function(){var t=document.createElement("div");return t.className=this.getClassName(),this.name&&t.setAttribute("type",this.name),this.isEnabled()||t.setAttribute(wf,""),this.isVisible()||t.setAttribute(Cf,""),t},t.prototype.getContainer=function(){return this._container?this._container:this._container=this._createContainer()},t.prototype.render=function(){var t=this.renderBody(),e=this.getContainer();return t&&e.appendChild(t),e},t}(),kf=Object.create(null),_f=function(t){Object.assign(kf,t)},Rf=function(t){var e=kf[t];if(!e)return null;var n=e();if(n&&!(n instanceof Of))throw new TypeError("invalid toolbar item type!");return n},Sf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Af=function(t){function e(e){var n=t.call(this,e)||this;return n._options={},n._value=!1,Object.assign(n._options,e),n}return Sf(e,t),e.prototype.getClassName=function(){return"".concat(t.prototype.getClassName.call(this)," ").concat(Cs("toolbar-item-icon"))},e.prototype.setValue=function(e){if(t.prototype.setValue.call(this,e),!1!==this._options.stateless){var n=this.getContainer(),r=Cs("active");e?n.setAttribute(r,""):n.removeAttribute(r)}},e.prototype._createContainer=function(){var e=this,n=t.prototype._createContainer.call(this);return n.addEventListener("click",(function(){e.setValue(!e.getValue()),e.onSelect({type:e.name,data:e.getValue()})})),n},e.prototype.renderBody=function(){return this._options.icon},e}(Of),Mf=r.toNode;function Tf(){return Mf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M288.581818 209.454545v530.618182h530.618182V209.454545H288.581818z m484.072727 484.072728H335.127273v-65.163637L456.145455 512l74.472727 97.745455 148.945454-148.945455 97.745455 121.018182v111.709091z m0-186.181818l-97.745454-116.363637-144.290909 144.290909-69.818182-93.090909-125.672727 125.672727V256h437.527272v251.345455z"></path></svg>')}function Pf(){return Mf('<svg viewBox="0 0 1137 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M547.84 549.622519l-61.933037-184.32-65.839407 184.32h127.772444zM457.007407 303.407407h62.501926l148.062815 417.185186h-60.567704l-41.377185-124.965926h-161.374815L360.068741 720.592593H303.407407l153.6-417.185186zM799.819852 508.207407c21.010963 0 38.343111 5.802667 52.072296 17.521778 13.425778 11.643259 20.138667 26.510222 20.138667 45.207704 0 18.090667-7.319704 34.436741-21.352296 49.303704-8.533333 8.760889-23.779556 19.835259-45.093926 33.564444-22.224593 13.994667-35.65037 26.244741-40.504889 36.788148H872.296296V720.592593h-151.703703c0-21.276444 7.016296-39.670519 21.617777-55.409778 7.926519-8.760889 24.727704-21.579852 49.986371-38.229334 13.994667-9.329778 23.779556-17.180444 29.885629-23.36237 9.443556-10.202074 14.260148-21.276444 14.260149-32.919704 0-11.415704-3.337481-19.873185-9.443556-25.41037-6.409481-5.537185-15.815111-8.154074-28.368593-8.154074-13.349926 0-23.438222 4.361481-30.113185 13.12237-6.712889 8.116148-10.353778 20.707556-10.998518 37.015704h-35.650371c0.341333-23.324444 7.319704-41.984 21.352297-56.282074 14.298074-15.17037 33.223111-22.755556 56.699259-22.755556z"></path></svg>')}function jf(){return Mf('<svg viewBox="0 0 1137 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M547.84 549.622519l-61.933037-184.32-65.839407 184.32h127.772444zM457.007407 303.407407h62.501926l148.062815 417.185186h-60.567704l-41.377185-124.965926h-161.374815L360.068741 720.592593H303.407407l153.6-417.185186zM799.819852 303.407407c21.010963 0 38.343111 5.802667 52.072296 17.521778 13.425778 11.643259 20.138667 26.510222 20.138667 45.207704 0 18.090667-7.319704 34.436741-21.352296 49.303704-8.533333 8.760889-23.779556 19.835259-45.093926 33.564444-22.224593 13.994667-35.65037 26.244741-40.504889 36.788148H872.296296v29.999408h-151.703703c0-21.276444 7.016296-39.670519 21.617777-55.409778 7.888593-8.760889 24.689778-21.579852 49.948445-38.229334 13.994667-9.329778 23.779556-17.180444 29.885629-23.36237 9.443556-10.202074 14.260148-21.276444 14.260149-32.919704 0-11.415704-3.337481-19.873185-9.443556-25.41037-6.371556-5.537185-15.777185-8.154074-28.330667-8.154074-13.349926 0-23.438222 4.361481-30.113185 13.12237-6.712889 8.116148-10.353778 20.707556-10.998518 37.015704h-35.650371c0.341333-23.324444 7.319704-41.946074 21.352297-56.282074 14.298074-15.17037 33.223111-22.755556 56.699259-22.755556z"></path></svg>')}n(38);var zf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nf=function(t){function e(e){var n=t.call(this,e)||this;return n._options={name:""},Object.assign(n._options,e),n}return zf(e,t),e.prototype.getClassName=function(){return"".concat(t.prototype.getClassName.call(this)," ").concat(Cs("toolbar-item-dropdown"))},e.prototype.getDropdownProps=function(){var t=this._options;return{mode:t.mode,align:t.align,value:this.getValue(),items:t.items}},e.prototype.createDropdown=function(){var t=this,e=new lf(this.getDropdownProps());return e.on("change",(function(e){t.setValue(e),t.onSelect({type:t.name,data:e})})),e},e.prototype.setValue=function(e){t.prototype.setValue.call(this,e),this._dropdown&&this._dropdown.updateProps({value:e})},e.prototype.renderBody=function(){var t=this._dropdown;return t||(t=this.createDropdown(),this._dropdown=t),t.render()},e}(Of),Bf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),If=function(t){function e(e){var n=t.call(this,Object.assign({mode:"horizontal",align:"center",items:[{key:"left",render:function(){return Mf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M283.461818 590.941091h335.732364v52.689454H283.461818v-52.689454z m0-210.618182h335.732364v52.642909H283.461818V380.322909z m503.575273 157.975273H283.508364v-52.689455h503.528727v52.689455z m0 210.618182H283.508364V696.32h503.528727v52.642909zM283.508364 327.68V274.990545h503.528727V327.68H283.508364z"></path></svg>')}},{key:"center",render:function(){return Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M378.212174 592.317217v53.515131h267.575652v-53.515131h-267.575652zM271.137391 752.862609h481.636174v-53.515131H271.181913v53.515131z m0-214.060522h481.636174V485.286957H271.181913v53.51513z m107.030261-160.545391v53.51513h267.575652V378.256696h-267.575652zM271.137391 271.226435v53.51513h481.636174V271.226435H271.181913z"></path></svg>')}},{key:"right",render:function(){return Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M271.137391 752.862609H752.862609v-53.515131H271.181913v53.515131z m160.589913-107.030261h321.090783v-53.515131H431.727304v53.515131zM271.137391 538.802087h481.636174V485.286957H271.181913v53.51513z m160.545392-107.030261h321.090782V378.256696H431.727304v53.51513zM271.137391 271.226435v53.51513h481.636174V271.226435H271.181913z"></path></svg>')}},{key:"justify",render:function(){return Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M378.212174 592.317217v53.515131h267.575652v-53.515131h-267.575652zM271.137391 752.862609h481.636174v-53.515131H271.181913v53.515131z m0-214.060522h481.636174V485.286957H271.181913v53.51513z m107.030261-160.545391v53.51513h267.575652V378.256696h-267.575652zM271.137391 271.226435v53.51513h481.636174V271.226435H271.181913z"></path></svg>')}}]},e))||this;return n._value="left",n}return Bf(e,t),e}(Nf),Lf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();var Df=function(t){function e(e){var n=t.call(this,Object.assign({items:["12px","13px","14px","15px","16px","20px","22px","24px","30px","32px","40px","48px"].map((function(t){return{key:t,render:function(){return t}}}))},e))||this;return n._value="14px",n}return Lf(e,t),e}(Nf),Hf=(n(39),ks.forkWithPrefix("toolbar.")),Vf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uf=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};function Ff(t,e){var n=document.createElement("div");return n.className=Cs("toolbar-txt-type"),n.textContent=t,e&&Object.keys(e).forEach((function(t){n.style[t]=e[t]})),n}var Wf=[{fontSize:"28px"},{fontSize:"24px"},{fontSize:"20px"},{fontSize:"16px"},{fontSize:"14px"}],qf=function(t){function e(e){var n=t.call(this,Object.assign({items:Uf([{key:"normal",render:function(){return Ff(Hf.get({lid:"textType.normal",default:"normal"}))}},{key:"title",render:function(){return Ff(Hf.get({lid:"textType.title",default:"title"}),{fontSize:"30px",lineHeight:"30px",fontWeight:"bold"})}}],Wf.map((function(t,e){var n=t.fontSize,r="h".concat(e+1);return{key:r,render:function(){return Ff(Hf.get({lid:"textType.".concat(r),default:r}),{fontSize:n,fontWeight:"bold",lineHeight:n})}}})),!0)},e))||this;return n._value="normal",n}return Vf(e,t),e}(Nf),Kf=(n(40),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Zf=Cs("toolbar-color-current");var Yf=function(t){function e(e){return t.call(this,e)||this}return Kf(e,t),e.prototype.getClassName=function(){return t.prototype.getClassName.call(this)+" "+Cs("toolbar-picker")},e.prototype.createDropdown=function(){var e=t.prototype.createDropdown.call(this);return e.on("popupClick",(function(t){t.stopPropagation()})),e},e.prototype.setValue=function(e){t.prototype.setValue.call(this,e),this._dropdown&&(this._dropdown.updateProps({value:e}),this._picker&&this._picker.setActiveColor(e))},e.prototype._syncCurrentColor=function(t){t=t||this.getContainer();var e=this.getValue();if(e){var n=t.querySelector(".".concat(Zf));n&&(n.style.backgroundColor=e)}},e.prototype.getDropdownProps=function(){var e=this,n=t.prototype.getDropdownProps.call(this),r=this._options;return n.renderSelection=function(){var t=function(t){var e=document.createElement("div");e.className=Cs("toolbar-color-selection"),e.appendChild(t);var n=document.createElement("div");return n.className=Zf,e.appendChild(n),e}(r.getIcon());return e._syncCurrentColor(t),t},n.renderItems=function(){return e._picker||(e._picker=new ef,e._picker.eventManager.on("change",(function(t){e.setValue(t),e.onSelect({type:e.name,data:t}),e._dropdown.updateProps({popupVisible:!1})}))),e._picker.render()},n},e}(Nf),Xf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gf=function(t){function e(e){var n={getIcon:function(){return Mf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M503.156364 139.636364L312.133818 625.198545h59.857455L423.563636 489.192727h223.045819l51.665454 136.005818h60.555636L567.854545 139.636364H503.156364zM441.344 442.274909l93.184-242.781091h2.699636l91.834182 242.781091H441.250909z"></path></svg>')}};return t.call(this,Object.assign(n,e))||this}return Xf(e,t),e}(Yf),Jf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qf=function(t){function e(e){var n=this,r={getIcon:function(){return Mf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M707.490909 358.4l-181.527273-181.527273-69.818181-69.818182-32.581819 32.581819 69.818182 69.818181-218.763636 218.763637 251.345454 251.345454 251.345455-251.345454-69.818182-69.818182zM339.781818 428.218182l186.181818-186.181818 148.945455 148.945454 37.236364 37.236364h-372.363637zM772.654545 623.709091c27.927273 0 46.545455-23.272727 46.545455-55.854546 0-27.927273-46.545455-93.090909-46.545455-93.090909s-46.545455 60.509091-46.545454 93.090909 18.618182 55.854545 46.545454 55.854546z"></path></svg>')}};return(n=t.call(this,Object.assign(r,e))||this).setValue("#fff"),n}return Jf(e,t),e}(Yf),$f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();var tp=function(t){function e(e){return t.call(this,e)||this}return $f(e,t),e.prototype.getDropdownProps=function(){var e=this,n=t.prototype.getDropdownProps.call(this);return n.renderSelection=function(){return function(t){var e=document.createElement("div");e.className=Cs("toolbar-table"),e.appendChild(t);var n=document.createElement("div");return e.appendChild(n),e}(Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M913.988 173.68H110.05c-25.671 0-46.676 21.007-46.676 46.679v665.897c0 25.651 20.987 46.638 46.637 46.638H913.95c25.671 0 46.676-21.004 46.676-46.676V220.32c0-25.651-20.988-46.64-46.638-46.64zM339.796 896.142c0 12.016-9.34 21.353-21.305 21.353H104.864c-11.965 0-21.303-9.337-21.303-21.353V768.023c0-12.014 9.338-21.353 21.303-21.353h213.627c11.965 0 21.305 9.34 21.305 21.353v128.118z m0-224.995c0 12.015-9.34 21.353-21.305 21.353H104.864c-11.965 0-21.303-9.338-21.303-21.353V543.029c0-12.013 9.338-21.354 21.303-21.354h213.627c11.965 0 21.305 9.34 21.305 21.354v128.117z m0-223.432c0 12.016-9.34 21.353-21.305 21.353H104.864c-11.965 0-21.303-9.337-21.303-21.353V319.596c0-12.013 9.338-21.353 21.303-21.353h213.627c11.965 0 21.305 9.34 21.305 21.353v128.118zM639.269 896.14c0 12.016-9.34 21.353-21.306 21.353H404.337c-11.966 0-21.305-9.337-21.305-21.353V768.023c0-12.014 9.34-21.353 21.305-21.353h213.626c11.966 0 21.306 9.34 21.306 21.353v128.118z m0-224.995c0 12.015-9.34 21.353-21.306 21.353H404.337c-11.966 0-21.305-9.338-21.305-21.353V543.029c0-12.013 9.34-21.354 21.305-21.354h213.626c11.966 0 21.306 9.34 21.306 21.354v128.117z m0-223.432c0 12.016-9.34 21.353-21.306 21.353H404.337c-11.966 0-21.305-9.337-21.305-21.353V319.596c0-12.013 9.34-21.353 21.305-21.353h213.626c11.966 0 21.306 9.34 21.306 21.353v128.118zM941.864 896.14c0 12.016-9.34 21.353-21.304 21.353H706.933c-11.966 0-21.304-9.337-21.304-21.353V768.023c0-12.014 9.338-21.353 21.304-21.353h213.626c11.966 0 21.304 9.34 21.304 21.353v128.118z m0-224.995c0 12.015-9.34 21.353-21.304 21.353H706.933c-11.966 0-21.304-9.338-21.304-21.353V543.029c0-12.013 9.338-21.354 21.304-21.354h213.626c11.966 0 21.304 9.34 21.304 21.354v128.117z m0-223.432c0 12.016-9.34 21.353-21.304 21.353H706.933c-11.966 0-21.304-9.337-21.304-21.353V319.596c0-12.013 9.338-21.353 21.304-21.353h213.626c11.966 0 21.304 9.34 21.304 21.353v128.118z"></path></svg>'))},n.renderItems=function(){var t=new df;return t.on("change",(function(t){e.onSelect({type:e.name,data:t})})),t.render()},n},e}(Nf),ep=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();var np=function(t){function e(e){return t.call(this,e)||this}return ep(e,t),e.prototype.getIcon=function(){return""},e.prototype.renderSelectionNode=function(t){return function(t){"string"==typeof t&&(t=document.createTextNode(t));var e=document.createElement("div");e.className=Cs("toolbar-icon"),e.appendChild(t);var n=document.createElement("div");return e.appendChild(n),e}(this.getIcon())},e.prototype.renderDropdownItems=function(t){return""},e.prototype.getDropdownProps=function(){var e=this,n=t.prototype.getDropdownProps.call(this);return n.renderSelection=function(t){return e.renderSelectionNode(t)},n.renderItems=function(t){return e.renderDropdownItems(t)},n},e}(Nf),rp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),op=function(t){function e(e){return t.call(this,e)||this}return rp(e,t),e.prototype.getIcon=function(){return Mf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M243.293091 313.623273a69.818182 69.818182 0 0 0 0 98.769454l91.648 91.601455a23.272727 23.272727 0 0 0 32.907636-32.907637L276.247273 379.438545a23.272727 23.272727 0 0 1 0-32.907636l110.964363-110.964364a23.272727 23.272727 0 0 1 32.907637 0l183.249454 183.20291a23.272727 23.272727 0 0 1 0 32.907636l-55.482182 55.528727a23.272727 23.272727 0 1 0 32.907637 32.907637l55.482182-55.482182a69.818182 69.818182 0 0 0 0-98.769455L453.073455 202.612364a69.818182 69.818182 0 0 0-98.769455 0L243.293091 313.623273z m574.091636 352.023272a69.818182 69.818182 0 0 0 0-98.722909l-91.601454-91.648a23.272727 23.272727 0 0 0-32.907637 32.907637l91.601455 91.648a23.272727 23.272727 0 0 1 0 32.907636l-111.010909 111.010909a23.272727 23.272727 0 0 1-32.907637 0l-183.249454-183.249454a23.272727 23.272727 0 0 1 0-32.907637l55.528727-55.528727a23.272727 23.272727 0 1 0-32.907636-32.907636l-55.528727 55.528727a69.818182 69.818182 0 0 0 0 98.722909l183.249454 183.249455a69.818182 69.818182 0 0 0 98.722909 0l111.010909-111.01091z"></path></svg>')},e.prototype.renderDropdownItems=function(t){var e=this,n=new pf;return n.on("change",(function(t){e.onSelect({type:e.name,data:t})})),n.render()},e}(np),ip=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ap=function(t){function e(e){return t.call(this,e)||this}return ip(e,t),e.prototype.getIcon=function(){return Tf()},e.prototype.renderDropdownItems=function(t){var e=this,n=new gf;return n.on("change",(function(t){e.onSelect({type:e.name,data:t})})),n.render()},e}(np),cp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),up=function(t){function e(e){return t.call(this,e)||this}return cp(e,t),e.prototype.getIcon=function(){return Mf('<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M917.333333 896H106.666667a85.333333 85.333333 0 0 1-85.333334-85.333333V213.333333a85.333333 85.333333 0 0 1 85.333334-85.333333h810.666666a85.333333 85.333333 0 0 1 85.333334 85.333333v597.333334a85.333333 85.333333 0 0 1-85.333334 85.333333zM256 170.666667H106.666667a42.666667 42.666667 0 0 0-42.666667 42.666666v42.666667h192V170.666667z m234.666667 0h-192v85.333333h192V170.666667z m234.666666 0h-192v85.333333h192V170.666667z m234.666667 42.666666a42.666667 42.666667 0 0 0-42.666667-42.666666h-149.333333v85.333333h192v-42.666667z m0 85.333334H64v426.666666h896V298.666667z m0 469.333333h-192v85.333333h-42.666667v-85.333333h-192v85.333333h-42.666666v-85.333333h-192v85.333333h-42.666667v-85.333333H64v42.666667a42.666667 42.666667 0 0 0 42.666667 42.666666h810.666666a42.666667 42.666667 0 0 0 42.666667-42.666666v-42.666667z m-498.752-133.013333A21.056 21.056 0 0 1 448 640a21.333333 21.333333 0 0 1-21.333333-21.333333V405.333333a21.333333 21.333333 0 0 1 21.333333-21.333333c4.544 0 8.533333 1.749333 12.010667 4.181333l165.781333 103.936A21.12 21.12 0 0 1 640 512a20.928 20.928 0 0 1-8.64 16.704l-170.112 106.282667z"></path></svg>')},e.prototype.renderDropdownItems=function(t){var e=this,n=new Ef;return n.on("change",(function(t){e.onSelect({type:e.name,data:t})})),n.render()},e}(np),lp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sp=function(t){function e(e){var n={mode:"horizontal",align:"center",items:[{key:"sub",render:Pf},{key:"sup",render:jf}]};return t.call(this,Object.assign(n,e))||this}return lp(e,t),e.prototype.createDropdown=function(){var t=this,e=new lf(this.getDropdownProps());return e.on("itemClick",(function(e){var n=t.getValue()!==e;t.setValue(n?e:null),t.onSelect({type:e,data:n})})),e},e.prototype.getDropdownProps=function(){var e=t.prototype.getDropdownProps.call(this);return e.renderSelection=function(){var t=document.createElement("div");return t.style.width="6px",t},e},e}(Nf),fp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pp=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},hp=function(t){function e(e){var n=t.call(this,Object.assign({align:"left"},e))||this;return n._customItems=[],n._customItemMap={},n}return fp(e,t),e.prototype.createDropdown=function(){return new lf(this.getDropdownProps())},e.prototype.addItem=function(t,e){var n=this._customItemMap;if(n.hasOwnProperty(t))throw new Error("item that key is ".concat(t," has been existed!"));var r=n[t]={key:t,render:e};this._customItems.push(r)},e.prototype.hasItem=function(t){return this._customItemMap.hasOwnProperty(t)},e.prototype.removeItem=function(t){var e=this._customItemMap,n=e[t];if(n){delete e[t];var r=this._customItems,o=r.indexOf(n);-1!==o&&r.splice(o,1)}},e.prototype.getDropdownProps=function(){var e=this,n=t.prototype.getDropdownProps.call(this);return n.renderSelection=function(){var t=document.createElement("div"),e=Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"></path><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path></svg>');return t.appendChild(e),t},n.items=function(){return pp([],e._customItems,!0)},n},e}(Nf),vp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dp=function(t){function e(e){var n={items:[{key:"addIndent",render:function(){return Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM400 646c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zM904 160H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 792H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519c4.5-3.5 4.5-10.3 0-13.9L142.4 381.9c-5.8-4.6-14.4-0.5-14.4 6.9v246.3c0 7.4 8.5 11.6 14.4 7z"></path></svg>')}},{key:"minusIndent",render:function(){return Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM400 646c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zM904 160H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 792H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4 0.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1c-4.5 3.5-4.5 10.3 0 13.8z"></path></svg>')}}]};return t.call(this,Object.assign(n,e))||this}return vp(e,t),e.prototype.getDropdownProps=function(){var e=t.prototype.getDropdownProps.call(this),n=e.items[0];return e.renderSelection=function(){return n.render()},e},e.prototype.createDropdown=function(){var t=this,e=new lf(this.getDropdownProps());return e.on("itemClick",(function(e){t.onSelect({type:t.name,data:e})})),e},e}(Nf),mp=(n(41),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}());var yp=function(t){function e(e){var n=t.call(this,Object.assign({items:["16px","20px","24px","28px","32px","36px","40px","44px","48px","52px","56px","60px"].map((function(t){return{key:t,render:function(){return t}}}))},e))||this;return n._value="24px",n}return mp(e,t),e.prototype.getClassName=function(){return t.prototype.getClassName.call(this)+" "+Cs("toolbar-icon-content")},e.prototype.getDropdownProps=function(){var e=this,n=t.prototype.getDropdownProps.call(this);return n.renderSelection=function(){var t=document.createElement("div");t.className=Cs("toolbar-item-icon-selection"),t.appendChild(Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M648 160H104c-4.4 0-8 3.6-8 8v128c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-64h168v560h-92c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-92V232h168v64c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8z m272.8 546H856V318h64.8c6 0 9.4-7 5.7-11.7L825.7 178.7c-2.9-3.7-8.5-3.7-11.3 0L713.6 306.3c-3.7 4.7-0.4 11.7 5.7 11.7H784v388h-64.8c-6 0-9.4 7-5.7 11.7l100.8 127.5c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.8-4.7 0.4-11.7-5.6-11.7z"></path></svg>'));var n=document.createElement("span");return n.textContent=e._value,t.appendChild(n),t},n},e}(Nf),gp={cancel:function(){return Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M412.253091 254.138182L232.727273 392.378182l179.525818 138.24V415.557818h179.525818a176.221091 176.221091 0 1 1 0 352.395637h-123.019636v46.545454h123.019636a222.766545 222.766545 0 1 0 0-445.486545H412.253091V254.138182z"></path></svg>')},redo:function(){return Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M611.746909 254.138182L791.272727 392.378182l-179.525818 138.24V415.557818H432.221091a176.221091 176.221091 0 1 0 0 352.395637h123.019636v46.545454H432.221091a222.766545 222.766545 0 1 1 0-445.486545h179.525818V254.138182z"></path></svg>')},bold:function(){return Mf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M372.363636 279.272727v465.454546h210.571637c48.779636 0 87.319273-9.122909 114.269091-27.368728 31.464727-22.155636 47.522909-56.738909 47.522909-103.656727 0-31.278545-7.68-56.738909-22.481455-74.938182-15.36-18.944-37.888-31.325091-68.049454-37.236363 23.133091-9.076364 40.494545-21.457455 52.642909-38.4 12.194909-18.292364 18.618182-40.448 18.618182-66.513455 0-35.188364-12.194909-63.255273-35.933091-84.107636C663.831273 290.350545 627.898182 279.272727 582.283636 279.272727H372.363636z m75.124364 62.603637h116.177455c30.813091 0 52.642909 5.213091 66.792727 15.639272 12.846545 9.774545 19.874909 26.065455 19.874909 48.221091 0 24.110545-7.028364 41.704727-19.874909 52.829091-13.498182 10.426182-35.979636 16.290909-68.049455 16.290909h-114.967272V341.876364z m0 195.537454h126.464c33.373091 0 57.762909 5.864727 73.169455 17.594182 14.801455 11.776 22.481455 30.673455 22.481454 57.390545 0 26.065455-10.24 44.311273-30.813091 56.040728-16.058182 9.122909-38.493091 13.684364-66.746182 13.684363H447.488v-144.709818z"></path></svg>')},italic:function(){return Mf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M606.068364 279.272727h66.466909V232.727273h-194.280728v46.545454h79.639273l-105.192727 392.610909H381.067636v46.545455h194.327273v-46.545455h-74.472727L606.068364 279.272727z"></path></svg>')},stroke:function(){return Mf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M443.112727 265.355636C475.089455 243.618909 516.561455 232.727273 566.923636 232.727273c54.365091 0 97.885091 12.241455 129.163637 37.422545 32.674909 25.832727 51.013818 64.605091 55.808 115.572364H696.785455c-6.144-35.374545-19.735273-61.207273-40.820364-78.196364-21.736727-17.687273-52.363636-25.832727-91.787636-25.832727-36.026182 0-63.906909 5.445818-84.340364 17.687273-23.133091 13.591273-34.676364 33.978182-34.676364 61.905454 0 24.436364 13.591273 44.218182 41.472 59.112727 8.098909 4.514909 23.924364 10.519273 47.243637 17.966546h351.418181v46.545454h-209.92c11.264 4.701091 20.200727 9.076364 26.856728 13.032728 40.122182 24.482909 60.509091 58.507636 60.509091 102.679272 0 42.170182-16.989091 76.194909-51.013819 100.677819-33.978182 23.784727-79.546182 36.026182-137.30909 36.026181-57.157818 0-102.027636-12.241455-134.702546-36.724363-38.074182-29.230545-59.159273-73.448727-63.255273-133.306182h55.109819c4.747636 42.170182 19.735273 73.448727 44.218181 93.184 22.434909 17.687273 55.063273 27.229091 98.583273 27.229091 39.470545 0 72.098909-7.493818 96.581818-22.481455 24.482909-14.941091 36.724364-35.374545 36.724364-61.207272 0-30.580364-16.290909-54.365091-48.314182-71.400728-13.591273-8.145455-48.267636-19.688727-102.679273-35.374545a2104.645818 2104.645818 0 0 1-39.563636-12.334546H253.812364v-46.545454h165.469091c-20.014545-19.688727-29.882182-44.497455-29.882182-74.379636 0-42.170182 17.687273-75.496727 53.713454-98.629819z"></path></svg>')},underline:function(){return Mf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M371.432727 489.192727V232.727273h47.755637v257.070545c0 40.820364 8.750545 71.68 27.415272 92.672 19.223273 21.550545 49.524364 32.628364 90.949819 32.628364 40.773818 0 71.074909-11.077818 90.903272-32.581818 18.106182-21.038545 27.415273-51.944727 27.415273-92.718546V232.727273h47.802182v256.465454c0 54.225455-13.963636 95.604364-41.425455 124.183273-28.532364 29.137455-69.911273 43.752727-124.741818 43.752727-54.784 0-96.162909-14.615273-124.136727-43.194182-27.973818-29.137455-41.984-70.516364-41.984-124.741818z m-97.186909 277.876364h534.341818v-46.545455H274.245818v46.545455z"></path></svg>')},overline:function(){return Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M512 890.88A238.933333 238.933333 0 0 1 273.066667 651.946667v-361.813334a34.133333 34.133333 0 1 1 68.266666 0v361.813334a170.666667 170.666667 0 1 0 341.333334 0v-361.813334a34.133333 34.133333 0 1 1 68.266666 0v361.813334a238.933333 238.933333 0 0 1-238.933333 238.933333z m273.066667-761.173333h-546.133334a27.306667 27.306667 0 0 1 0-54.613334h546.133334a27.306667 27.306667 0 1 1 0 54.613334z"></path></svg>')},ol:function(){return Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M330.666667 192h640a42.666667 42.666667 0 0 0 0-85.333333h-640a42.666667 42.666667 0 0 0 0 85.333333zM970.666667 469.333333h-640a42.666667 42.666667 0 1 0 0 85.333334h640a42.666667 42.666667 0 0 0 0-85.333334zM970.666667 832h-640a42.666667 42.666667 0 0 0 0 85.333333h640a42.666667 42.666667 0 0 0 0-85.333333zM94.378667 735.914667a85.333333 85.333333 0 0 0-82.474667 63.317333 32 32 0 1 0 61.866667 16.469333 21.333333 21.333333 0 1 1 20.608 26.88 32 32 0 1 0 0 64 21.333333 21.333333 0 1 1-20.565334 27.093334 32 32 0 1 0-61.653333 17.066666 85.333333 85.333333 0 1 0 153.130667-70.314666 10.709333 10.709333 0 0 1 0-11.861334 85.333333 85.333333 0 0 0-70.912-132.736zM181.333333 458.581333a85.333333 85.333333 0 0 0-170.666666 0 32 32 0 0 0 64 0 21.333333 21.333333 0 0 1 42.666666 0 43.989333 43.989333 0 0 1-9.685333 27.52L17.664 598.570667A32 32 0 0 0 42.666667 650.581333h106.666666a32 32 0 0 0 0-64h-17.877333a10.624 10.624 0 0 1-8.32-17.322666L157.866667 526.08a108.544 108.544 0 0 0 23.466666-67.498667zM170.666667 223.914667h-10.666667A10.666667 10.666667 0 0 1 149.333333 213.333333V69.248A58.752 58.752 0 0 0 90.666667 10.581333H64a32 32 0 0 0 0 64h10.666667A10.666667 10.666667 0 0 1 85.333333 85.333333v128a10.666667 10.666667 0 0 1-10.666666 10.666667H64a32 32 0 0 0 0 64H170.666667a32 32 0 0 0 0-64z"></path></svg>')},ul:function(){return Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M106.666667 170.581333m-106.666667 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z"></path><path d="M362.666667 213.333333H981.333333a42.666667 42.666667 0 0 0 0-85.333333H362.666667a42.666667 42.666667 0 0 0 0 85.333333z"></path><path d="M106.666667 511.914667m-106.666667 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z"></path><path d="M981.333333 469.333333H362.666667a42.666667 42.666667 0 0 0 0 85.333334H981.333333a42.666667 42.666667 0 0 0 0-85.333334z"></path><path d="M106.666667 853.248m-106.666667 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z"></path><path d="M981.333333 810.666667H362.666667a42.666667 42.666667 0 0 0 0 85.333333H981.333333a42.666667 42.666667 0 0 0 0-85.333333z"></path></svg>')},option:function(){return Mf('<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M66.947024 294.976504h159.9617c36.912378 0 66.947024-30.091087 66.947024-67.084095V67.600126c0-36.984945-30.034646-67.084094-66.947024-67.084095H66.938961C30.042709 0.524094 0 30.623244 0 67.608189v160.292283c0 36.993008 30.034646 67.084094 66.947024 67.084095z m-15.851843-227.376378c0-8.772535 7.095433-15.884094 15.851843-15.884095h159.9617c8.756409 0 15.851843 7.111559 15.851843 15.884095v160.292283c0 8.780598-7.095433 15.884094-15.851843 15.884095H66.938961a15.859906 15.859906 0 0 1-15.84378-15.884095V67.600126zM0 592.363843v-160.292284c0-36.984945 30.034646-67.084094 66.947024-67.084094h159.9617c36.912378 0 66.947024 30.09915 66.947024 67.084094v160.292284c0 36.984945-30.034646 67.084094-66.947024 67.084094H66.938961C30.042709 659.431811 0 629.332661 0 592.347717zM51.095181 431.853858v160.292284c0 8.772535 7.095433 15.884094 15.851843 15.884094h159.9617a15.859906 15.859906 0 0 0 15.851843-15.884094V431.853858c0-8.772535-7.095433-15.884094-15.851843-15.884094H66.938961a15.859906 15.859906 0 0 0-15.84378 15.884094zM0 956.601449v-160.292284c0-36.984945 30.034646-67.076031 66.947024-67.076031h159.9617c36.912378 0 66.947024 30.091087 66.947024 67.084094v160.292284c0 36.984945-30.034646 67.084094-66.947024 67.084094H66.938961c-36.904315 0-66.938961-30.09915-66.938961-67.084094z m51.095181-160.292284v160.292284c0 8.780598 7.095433 15.884094 15.851843 15.884094h159.9617a15.859906 15.859906 0 0 0 15.851843-15.884094v-160.292284c0-8.772535-7.095433-15.876031-15.851843-15.876031H66.938961a15.859906 15.859906 0 0 0-15.84378 15.884094zM996.472945 66.358425a25.656441 25.656441 0 0 1 25.648378 25.704819 25.656441 25.656441 0 0 1-25.648378 25.704819h-574.568819a25.656441 25.656441 0 0 1-25.648378-25.704819 25.656441 25.656441 0 0 1 25.648378-25.704819h574.568819z m0 111.591811c14.182803 0 25.43874 11.497827 25.648378 25.704819a25.656441 25.656441 0 0 1-25.648378 25.704819h-574.568819a25.656441 25.656441 0 0 1-25.648378-25.704819 25.656441 25.656441 0 0 1 25.648378-25.704819h574.568819z m0 252.661921c14.182803 0 25.43874 11.489764 25.648378 25.704819a25.656441 25.656441 0 0 1-25.648378 25.704819h-574.568819a25.656441 25.656441 0 0 1-25.648378-25.704819 25.656441 25.656441 0 0 1 25.648378-25.704819h574.568819z m0 111.801449c14.182803 0 25.43874 11.497827 25.648378 25.704819a25.656441 25.656441 0 0 1-25.648378 25.704819h-574.568819a25.656441 25.656441 0 0 1-25.648378-25.704819 25.656441 25.656441 0 0 1 25.648378-25.704819h574.568819z m0 252.653859c14.182803 0 25.43874 11.497827 25.648378 25.704818a25.656441 25.656441 0 0 1-25.648378 25.704819h-574.568819a25.656441 25.656441 0 0 1-25.648378-25.704819 25.656441 25.656441 0 0 1 25.648378-25.704818h574.568819z m25.43874 137.304692a25.753197 25.753197 0 0 1-25.43874 25.704819h-574.568819a25.656441 25.656441 0 0 1-25.648378-25.704819 25.656441 25.656441 0 0 1 25.648378-25.704818h574.359181a25.656441 25.656441 0 0 1 25.648378 25.704818z"></path></svg>')},hr:function(){return Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M213.333333 554.666667a42.666667 42.666667 0 0 1 0-85.333334h597.333334a42.666667 42.666667 0 0 1 0 85.333334H213.333333z"></path></svg>')},image:Tf,quote:function(){return Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M195.541333 739.029333C151.594667 692.352 128 640 128 555.136c0-149.333333 104.832-283.178667 257.28-349.354667l38.101333 58.794667c-142.293333 76.970667-170.112 176.853333-181.205333 239.829333 22.912-11.861333 52.906667-16 82.304-13.269333 76.970667 7.125333 137.642667 70.314667 137.642667 148.864a149.333333 149.333333 0 0 1-149.333334 149.333333 165.162667 165.162667 0 0 1-117.248-50.304z m426.666667 0C578.261333 692.352 554.666667 640 554.666667 555.136c0-149.333333 104.832-283.178667 257.28-349.354667l38.101333 58.794667c-142.293333 76.970667-170.112 176.853333-181.205333 239.829333 22.912-11.861333 52.906667-16 82.304-13.269333 76.970667 7.125333 137.642667 70.314667 137.642666 148.864a149.333333 149.333333 0 0 1-149.333333 149.333333 165.162667 165.162667 0 0 1-117.248-50.304z"></path></svg>')},checkbox:function(){return Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M466.346667 722.346667l-199.68-182.613334a3.84 3.84 0 0 1 0-5.973333l51.2-55.466667a4.693333 4.693333 0 0 1 5.973333 0l139.946667 119.466667a3.84 3.84 0 0 0 5.973333 0l223.146667-241.066667a4.693333 4.693333 0 0 1 6.4 0l54.186666 54.186667a4.266667 4.266667 0 0 1 0 5.973333l-280.32 305.066667a4.266667 4.266667 0 0 1-6.4 0.853333zM806.4 213.333333H217.6a3.84 3.84 0 0 0-4.266667 4.266667v588.8a3.84 3.84 0 0 0 4.266667 4.266667h588.8a3.84 3.84 0 0 0 4.266667-4.266667V217.6a3.84 3.84 0 0 0-4.266667-4.266667zM853.333333 849.066667a4.693333 4.693333 0 0 1-4.693333 4.693333H174.506667a4.693333 4.693333 0 0 1-4.693334-4.693333V174.933333A4.693333 4.693333 0 0 1 174.933333 170.666667h674.133334a4.693333 4.693333 0 0 1 4.693333 4.693333z"></path></svg>')},formatFill:function(){return Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M840 192h-56v-72c0-13.3-10.7-24-24-24H168c-13.3 0-24 10.7-24 24v272c0 13.3 10.7 24 24 24h592c13.3 0 24-10.7 24-24V256h32v200H465c-22.1 0-40 17.9-40 40v136h-44c-4.4 0-8 3.6-8 8v228c0 0.6 0.1 1.3 0.2 1.9-0.1 2-0.2 4.1-0.2 6.1 0 46.4 37.6 84 84 84s84-37.6 84-84c0-2.1-0.1-4.1-0.2-6.1 0.1-0.6 0.2-1.2 0.2-1.9V640c0-4.4-3.6-8-8-8h-44V520h351c22.1 0 40-17.9 40-40V232c0-22.1-17.9-40-40-40zM720 352H208V160h512v192zM477 876c0 11-9 20-20 20s-20-9-20-20V696h40v180z"></path></svg>')},formatClean:function(){return Mf('<svg viewBox="0 0 1137 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M599.22963 682.666667h-170.666667l-128.948148-128.948148L606.814815 246.518519l227.555555 227.555555-204.8 208.592593h-30.34074z m11.377777-37.925926l53.096297-53.096297-174.45926-174.459259-136.533333 132.740741 94.814815 94.814815h163.081481z m-273.066666 75.851852h493.037037v37.925926h-493.037037v-37.925926z"></path></svg>')},banner:function(){return Mf('<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M896 85.333333c-72.533333 0-128 55.466667-128 128H256c0-72.533333-55.466667-128-128-128S0 140.8 0 213.333333v597.333334c0 72.533333 55.466667 128 128 128s128-55.466667 128-128h512c0 72.533333 55.466667 128 128 128s128-55.466667 128-128V213.333333c0-72.533333-55.466667-128-128-128zM170.666667 810.666667c0 25.6-17.066667 42.666667-42.666667 42.666666s-42.666667-17.066667-42.666667-42.666666V213.333333c0-25.6 17.066667-42.666667 42.666667-42.666666s42.666667 17.066667 42.666667 42.666666v597.333334z m85.333333-85.333334V298.666667h512v426.666666H256z m682.666667 85.333334c0 25.6-17.066667 42.666667-42.666667 42.666666s-42.666667-17.066667-42.666667-42.666666V213.333333c0-25.6 17.066667-42.666667 42.666667-42.666666s42.666667 17.066667 42.666667 42.666666v597.333334z"></path><path d="M652.8 384h-298.666667c-25.6 0-42.666667 17.066667-42.666666 42.666667s17.066667 42.666667 42.666666 42.666666h298.666667c25.6 0 42.666667-17.066667 42.666667-42.666666s-21.333333-42.666667-42.666667-42.666667zM567.466667 554.666667h-213.333334c-25.6 0-42.666667 17.066667-42.666666 42.666666s17.066667 42.666667 42.666666 42.666667h213.333334c25.6 0 42.666667-17.066667 42.666666-42.666667s-21.333333-42.666667-42.666666-42.666666z"></path></svg>')}},bp={cancel:!0,redo:!0,hr:!0,checkbox:!0,formatClean:!0};var xp={};Object.keys(gp).forEach((function(t){var e;xp[t]=(e=t,function(){return new Af({icon:gp[e](),name:e,stateless:!bp[e]})})})),xp.subSup=function(){return new sp({name:"subSup"})},xp.textAlign=function(){return new If({name:"textAlign"})},xp.indent=function(){return new dp({name:"indent"})},xp.fontSize=function(){return new Df({name:"fontSize"})},xp.lineHeight=function(){return new yp({name:"lineHeight"})},xp.textType=function(){return new qf({name:"textType"})},xp.fontColor=function(){return new Gf({name:"fontColor"})},xp.textBgColor=function(){return new Qf({name:"textBgColor",getIcon:function(){return Mf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M849.838 62h-675.675c-61.819 0-112.162 50.231-112.162 112.219v675.619c0 61.819 50.231 112.162 112.162 112.162h675.675c61.875 0 112.162-50.231 112.162-112.162v-675.619c0-61.875-50.231-112.219-112.162-112.219zM689.75 849.5l-53.831-168.75h-247.725l-53.887 168.75h-103.556l226.181-618.75h110.194l226.125 618.75h-103.5z"></path><path d="M510.819 343.25l-93.656 281.25h189.787l-92.813-281.25z"></path></svg>')}})},xp.blockBgColor=function(){return new Qf({name:"blockBgColor"})},xp.table=function(){return new tp({name:"table"})},xp.link=function(){return new op({name:"link"})},xp.image=function(){return new ap({name:"image",align:"right"})},xp.video=function(){return new up({name:"video",align:"right"})},xp.custom=function(){return new hp({name:"custom",align:"left"})},_f(xp);n(42);var Ep=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wp=ws("disabled"),Cp=(function(t){function e(e){var n=t.call(this)||this;return n._options={groups:[{items:["custom"]},{items:["cancel","redo"]},{items:["formatFill","formatClean"]},{items:["textType","fontSize","bold","italic","stroke","underline","overline","subSup"]},{items:["fontColor","textBgColor","blockBgColor"]},{items:["textAlign","ol","ul","option","indent","lineHeight"]},{items:["link","table","image","video","hr","banner","checkbox","quote"]}]},n._toolbarItemMap={},n._enabled=!0,n._hidden=!1,Object.assign(n._options,e),n}Ep(e,t),e.prototype.onToolbarItemValueApply=function(t){this.emit("itemSelect",null,[t])},e.prototype.getToolbarItems=function(){return Object.values(this._toolbarItemMap)},e.prototype.setToolbarItemValue=function(t,e){var n=this._toolbarItemMap;n.hasOwnProperty(t)&&n[t].setValue(e)},e.prototype.setToolbarItemEnabled=function(t,e){var n=this._toolbarItemMap;n.hasOwnProperty(t)&&n[t].setEnabled(e)},e.prototype.setToolbarItemVisible=function(t,e){var n=this._toolbarItemMap;n.hasOwnProperty(t)&&n[t].setVisible(e)},e.prototype.addCustomToolbarItem=function(t,e){var n=this._customToolbarItem;n&&n.addItem(t,e)},e.prototype.removeCustomToolbarItem=function(t){var e=this._customToolbarItem;e&&e.removeItem(t)},e.prototype.setEnabled=function(t){this._enabled=!!t;var e=this._container;e&&(this.isEnabled()?e.removeAttribute(wp):e.setAttribute(wp,""))},e.prototype.isEnabled=function(){return this._enabled},e.prototype.getContainer=function(){if(this._container)return this._container;var t=document.createElement("div");return this._container=t,t.className=Cs("toolbar"),this.isEnabled()||t.setAttribute(wp,""),this._hidden&&this.hide(),this._container},e.prototype.hide=function(){this._container?(this._container.setAttribute("data-hidden",""),this._hidden=!0):this._hidden=!0},e.prototype.show=function(){this._container?(this._container.removeAttribute("data-hidden"),this._hidden=!1):this._hidden=!1},e.prototype.render=function(){var t=this._options.groups,e=this.getContainer();Ms(e);var n=this,r=this._toolbarItemMap,o=this._options.groupSplitLine,i=void 0===o||o;return t.forEach((function(o,a){var c=o.wrapper,u=c?document.createElement("div"):null;if(u&&(u.className=Cs("toolbar-group-wrapper")),o.items.forEach((function(t){var o=Rf(t);o&&(r[t]=o,o instanceof hp&&(n._customToolbarItem=o),o.connect(n),c?null==u||u.appendChild(o.render()):e.appendChild(o.render()))})),c&&e.appendChild(u),i&&t.length>1&&a!==t.length-1){var l=document.createElement("div");l.className=Cs("toolbar-group-split"),e.appendChild(l)}})),e}}(Tt),1);var Op=function(t){var e,n,r=function(t){for(var e=t.firstElementChild;e;){if("style"===String(e.tagName).toLowerCase()&&e.hasAttribute("data-style"))return e;e=e.nextElementSibling}return e||((e=ms.createElement()).setAttribute("data-style",""),t.appendChild(e)),e}(t),o=t.getAttribute("data-setting"),i={};if(o)try{n={},i=(e=o)?(e.split(";").forEach((function(t){var e=t.split(":");2===e.length&&(n[e[0]]=e[1])})),n):n}catch(t){}return{table:t,setting:i,element:r}},kp=function(t){var e=t.setting,n=t.element,r=t.table,o=r.getAttribute("tid");o||(o="id_".concat(Cp++,"_")+Date.now(),r.setAttribute("tid",o));var i,a=[],c="".concat(ni.tagName,"[").concat("tid",'="').concat(o,'"]>table'),u="".concat(c,">tbody>tr>td");e.borderColor&&(a.push("".concat(c,"{border-color:").concat(e.borderColor,";}")),a.push("".concat(u,"{border-color:").concat(e.borderColor,";}"))),e.borderSize&&(a.push("".concat(c,"{border-width:").concat(e.borderSize,";}")),a.push("".concat(u,"{border-width:").concat(e.borderSize,";}"))),e.bgColor&&a.push("".concat(c,"{background:").concat(e.bgColor,";}")),n.textContent=a.join("\n"),r.setAttribute("data-setting",(i=e,Object.keys(i).map((function(t){return"".concat(t,":").concat(i[t])})).join(";")))},_p=function(t,e,n){var r=Op(t);r.setting[e]=n,kp(r)},Rp=function(t,e){_p(t,"borderColor",e)},Sp=function(t){return Op(t).setting.borderColor},Ap=function(t,e){_p(t,"borderSize",e)},Mp=function(t){return Op(t).setting.borderSize},Tp=function(t,e){_p(t,"bgColor",e)},Pp=function(t){return Op(t).setting.bgColor};n(43);var jp={apply:function(t){var e=hs(t),n={setTableBorderColor:Rp,getTableBorderColor:Sp,setTableBorderSize:Ap,getTableBorderSize:Mp,setTableBgColor:Tp,getTableBgColor:Pp},o=e.addRowBefore,a=e.addRowAfter,c=e.addColBefore,u=e.addColAfter,l=e.deleteCurrentCellRow,s=e.deleteCurrentCellCol,f=e.deleteTable,p=n.setTableBorderColor,h=n.setTableBorderSize,v=n.setTableBgColor,d=fs(t);ds(t,d);var m=d.getProxyElement,y=d.pushLog,g=d.findCell,b=xs(t,d),x=b.selectTableArea,E=b.mergeCells;t.editor.extensionsApi.mergeCells=E;var w=[{holder:e,methods:["addRowBefore","addRowAfter","addColBefore","addColAfter","deleteCurrentCellRow","deleteCurrentCellCol","deleteTable"]},{holder:n,methods:["setTableBorderColor","getTableBorderColor","setTableBorderSize","getTableBorderSize","setTableBgColor","getTableBgColor"]},{holder:d,methods:["pushLog"]}],C=t.editor;function O(){var e=t.editor.getWrapper();e._contextMenu&&ir(e._contextMenu),e._contextMenu=null}function _(e,n){var o=n.items,i=t.editor.getWrapper(),a=r.getPosition(e),c=document.createElement("div");c.className=Ko("context-menu"),o.forEach((function(t){c.appendChild(function(t){var e=document.createElement("div");return e.className=Ko("context-menu-item"),e.innerHTML=t.html,t.handler&&e.addEventListener("click",(function(e){y(),t.handler(e)})),t.create&&(e.setAttribute("ext",""),e.appendChild(t.create())),e}(t))}));var u=a.x,l=a.y;c.style.left="".concat(u,"px"),c.style.top="".concat(l,"px"),c.addEventListener("click",(function(t){t.stopPropagation()}));var s=document.createElement("div");s.className=Ko("context-menu-wrapper"),s.appendChild(c),s.addEventListener("contextmenu",(function(t){return t.preventDefault()})),i._contextMenu=s,s.addEventListener("click",O),document.body.appendChild(s)}function R(t){var e=document.createElement("div");e.className=Ko("ctx-sub-menu-item"),e.setAttribute("type","color-picker");var n=new ef;return n.eventManager.on("change",(function(e){y(),t(e)})),e.appendChild(n.render()),e.addEventListener("click",(function(t){return t.stopPropagation()})),e}w.forEach((function(t){var e=C.extensionsApi;t.methods.forEach((function(n){e[n]=t.holder[n]}))})),C.extensionsApi.findTableInfo=function(){var t={},e=C.getNormalizedRange();if(!e)return t;var n=g(e.startElement);return t.cell=n,n&&(t.table=jr(n,C.getContainer(),(function(t){return k.isElementInstanceOf(t,ni)}))),t},i.touchable()||(t.register("contextmenu:tableContextMenu",(function(e){var n,o=r.findUpUtil(e.target,(function(t){return rs(t)}),(function(t){return t===m()})),i=(null===(n=o.parentElement)||void 0===n?void 0:n.parentElement)===t.editor.selectState.getTarget();if(o&&i)return o})),t.onNative("mousedown",(function(t){0===t.button&&O()}))),t.on("tableContextMenu",(function(e){e.stopPropagation(),e.preventDefault(),O();var n=g(e.native.target),i=e.target,d={items:[]},m=t.editor.getNormalizedRange(),b=function(){O(),x(i),m&&m.select()};if(n&&(d.items=[{html:es.get({lid:"table.insertRowBefore",default:"insert row before current"}),handler:function(){o(i,n),b()}},{html:es.get({lid:"table.insertRowAfter",default:"insert row after current"}),handler:function(){a(i,n),b()}},{html:es.get({lid:"table.insertColBefore",default:"insert column before current"}),handler:function(){c(i,n),b()}},{html:es.get({lid:"table.insertColAfter",default:"insert column after current"}),handler:function(){u(i,n),b()}},{html:es.get({lid:"table.deleteCurrentRow",default:"delete current row"}),handler:function(){l(i,n),b()}},{html:es.get({lid:"table.deleteCurrentCol",default:"delete current column"}),handler:function(){s(i,n),b()}}]),i._selectOptions){var w=i._selectOptions,C=w.minCol,k=w.maxCol,S=w.minRow,A=w.maxRow,M=n.getAttribute("index"),T=n.parentNode.getAttribute("index");if(as(C,k,M)&&as(S,A,T)){var P=[{html:es.get({lid:"table.mergeCells",default:"merge cells"}),handler:function(){E(i),b()}}];d.items=d.items.concat(P)}}d.items.push({html:es.get({lid:"table.deleteTable",default:"delete table"}),handler:function(){f(i),b()}}),d.items.push({html:es.get({lid:"table.borderSize",default:"border size"}),handler:function(){b()},create:function(){return function(t){var e=document.createElement("div");e.className=Ko("ctx-sub-menu-item"),e.setAttribute("type","dropdown");var n=Object(_t.findUniqueKey)("dataKey");return Array(8).fill(0).forEach((function(t,r){var o=document.createElement("div");o[n]=!0;var i=8-r-1;o.setAttribute("key",String(i)),o.textContent="".concat(i,"px"),e.appendChild(o)})),e.addEventListener("click",(function(o){var i=r.findUpUtil(o.target,(function(t){if(t[n])return!!t}),(function(t){return t===e}));i&&(y(),t(i.getAttribute("key")+"px"))})),e}((function(t){h(i,t)}))}}),d.items.push({html:es.get({lid:"table.borderColor",default:"border color"}),handler:function(){b()},create:function(){return R((function(t){p(i,t)}))}}),d.items.push({html:es.get({lid:"table.bgColor",default:"background color"}),handler:function(){b()},create:function(){return R((function(t){v(i,t)}))}}),_(e,d)}))},applyBase:function(t){}};function zp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Np=function(t){m()(n,t);var e=zp(n);function n(t){var r;return f()(this,n),(r=e.call(this,t))._tables=Object.create(null),r}return h()(n,[{key:"putTable",value:function(t,e){this._tables[t]=e}},{key:"removeTable",value:function(t){delete this._tables[t]}},{key:"getTables",value:function(){return Object.values(this._tables)}}]),n}(Ea);function Bp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Ip=function(t){m()(n,t);var e=Bp(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"execute",value:function(t){if(this.getRange().collapsed){var e=t.cols,r=void 0===e?3:e,o=t.rows,i=void 0===o?3:o;R()(x()(n.prototype),"execute",this).call(this,{attrs:{meta:"".concat(i,",").concat(r)},innerHTML:!0,type:"table"})}}}]),n}(Zl),Lp=Array.prototype.slice,Dp=function(t){m()(n,t);var e=Bp(n);function n(){var t,r;f()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return g()(r,(t=r=e.call.apply(e,[this].concat(i)),r.commandType=xt,r._selection=null,t))}return h()(n,[{key:"setCellBgColor",value:function(t){var e=this._selection;if(e)for(var n=e.table,r=e.selectOptions,o=r.minCol,i=r.maxCol,a=r.minRow,c=r.maxRow,u=ni.getElementModel(n),l=Lp.call(u.getRows()),s=a;s<=c&&s<l.length;s++){var f=l[s];if(!(s<a||s>c))for(var p=f.firstElementChild;p;){var h=0|p.getAttribute("index");if(h>=o&&h<=i){var v=mr(p);v["background-color"]=t,p.setAttribute("style",v.toString())}p=p.nextElementSibling}}}},{key:"getStyle",value:function(t){var e=t.styleNames,n=[].concat(e).reduce((function(t,e){return t[e]=!0,t}),{}),r={},o=this._selection;if(!o)return r;for(var i=o.table,a=o.selectOptions,c=a.minCol,u=a.maxCol,l=a.minRow,s=a.maxRow,f=ni.getElementModel(i),p=Lp.call(f.getRows()),h=l;h<=s&&h<p.length;h++){var v=p[h];if(!(h<l||h>s))for(var d=v.firstElementChild;d;){var m=0|d.getAttribute("index");m>=c&&m<=u&&Cu.fillStyleValues(d,r,n),d=d.nextElementSibling}}return r}},{key:"getState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.createState();return"style"===t.type&&(e.data=this.getStyle.apply(this,arguments)),e}},{key:"execute",value:function(t){var e=(t||{}).type;return"getSelection"===e?this._selection:"setSelection"!==e?"setCellBgColor"===e?this.setCellBgColor(t.value):void 0:void(this._selection=t.value)}}]),n}(Et),Hp=Object(_t.findUniqueKey)("TableEvents"),Vp=Object(_t.findUniqueKey)("BaseTableEvents"),Up=1;k.register(new ni),kt.install("insertTable",Ip),kt.install("tableSelection",Dp),yu.defineCustomMount("table",(function(t,e){var n="".concat(Up++),r=e.get(Hp),o=e.get(Vp);o||(o=new Np(e),jp.applyBase(o),e.put(Vp,o)),r||(r=new Np(e),jp.apply(r),e.events.on("editModeChange",(function(t){t?r.mount(e.getWrapper()):r.unmount()})),e.put(Hp,r));var i=t.firstElementChild;if(i){var a=yu.getElementsByElementType(i,ut);null==a||a.forEach((function(t){e.mountCustomElement(t)}))}else{var c=t.getAttribute("meta"),u=3,l=3;if(c){var s=c.split(","),f=parseInt(s[0]||""),p=parseInt(s[1]||"");f&&(u=f),p&&(l=p)}i=k.createElement(ni,{cols:l,rows:u}),t.appendChild(i)}return t.style.width="100%",r.putTable(n,i),o.putTable(n,i),function(t){var e=Op(t);kp(e)}(i),o.mount(e.getWrapper()),e.isEditMode()&&r.mount(e.getWrapper()),function(){r.removeTable(n),o.removeTable(n),0===r.getTables().length&&(r.unmount(),e.remove(Hp),r.emit("tableUnmount")),0===o.getTables().length&&(o.unmount(),e.remove(Vp),o.emit("tableUnmount"))}}));n(44);function Fp(t,e,n){Object.assign(t.style,{},e||{});var r=[Ko("image-viewer-icon")];n&&r.push(n);var o=document.createElement("div");return o.setAttribute("class",r.join(" ")),o.appendChild(t),o}var Wp=function(t,e){if(i.touchable()){var n=null;t.addEventListener("touchstart",(function(t){n=r.getPosition(o.simulateMouseDownEvent(t))})),t.addEventListener("touchend",(function(t){var i=t.changedTouches||t.touches;if(1===(null==i?void 0:i.length)){t.preventDefault();var a=r.getPosition(o.simulateMouseDownEvent(t));n&&r.distanceOf(a,n)<5&&e(t)}}))}else t.addEventListener("click",e)};var qp={apply:function(t){var e=null,n=null,o=function(){var e=document.createElement("div");e.className=Ko("image-viewer");var o=document.createElement("div");o.className=Ko("image-viewer-body");var a=document.createElement("div");a.className=Ko("image-viewer-cvs"),a.appendChild(o);var c=function(t){o.style.transform="translate3d(".concat(t.tx,"px,").concat(t.ty,"px,0) scale(").concat(t.scale||1,")")},u=function(){var t={tx:0,ty:0,scale:1};g.syncZoomState(t),c(t)},l=function(t){n=t,m.src=t.src,e.parentElement!==document.body&&document.body.appendChild(e)},s=Fp(Lu('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M546.942134 511.818772l327.456957-326.128977c9.617355-9.577423 9.648071-25.135361 0.070648-34.751692-9.577423-9.617355-25.137409-9.647048-34.750668-0.070648L512.119795 477.137729 184.520518 150.868479c-9.616331-9.577423-25.176316-9.545683-34.751692 0.070648-9.577423 9.616331-9.545683 25.174268 0.070648 34.751692l327.457981 326.127953-327.457981 326.128978c-9.616331 9.577423-9.647048 25.135361-0.070648 34.751692a24.496456 24.496456 0 0 0 17.41117 7.231702 24.500552 24.500552 0 0 0 17.340522-7.162078L512.119795 546.499816l327.599276 326.26925a24.492361 24.492361 0 0 0 17.340522 7.162078 24.5026 24.5026 0 0 0 17.41117-7.231702c9.577423-9.617355 9.545683-25.175292-0.070648-34.751692L546.942134 511.818772z" fill="#ffffff"></path></svg>'),{},Ko("image-viewer-close"));e.appendChild(s);var f=Fp(Lu('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M784.652701 955.6957 346.601985 517.644983c-2.822492-2.822492-2.822492-7.902977 0-11.289967l439.179713-439.179713c6.77398-6.77398 10.725469-16.370452 10.725469-25.966924L796.507166 36.692393c0-20.32194-16.370452-36.692393-36.692393-36.692393l-4.515987 0c-9.596472 0-19.192944 3.951488-25.966924 10.725469L250.072767 489.420066c-12.418964 12.418964-12.418964 32.740904 0 45.159868l477.565601 477.565601c7.338479 7.338479 17.499449 11.854465 28.224917 11.854465l0 0c22.015436 0 40.079383-18.063947 40.079383-40.079383l0 0C796.507166 973.759647 791.99118 963.598677 784.652701 955.6957z" fill="#ffffff"></path></svg>'),{},Ko("image-viewer-btn-prev"));function p(){var e=n?Sr(n,(function(t){return t.getAttribute("type")===Yp}),(function(e){return e===t.editor.getContainer()})):null,r=null==e?void 0:e.querySelector("img");v.style.display=r?"":"none",v.onclick=function(){u(),l(r),p(),h()}}function h(){var e=n?Ar(n,(function(t){return t.getAttribute("type")===Yp}),(function(e){return e===t.editor.getContainer()})):null;u();var r=null==e?void 0:e.querySelector("img");f.style.display=r?"":"none",f.onclick=function(){u(),l(r),p(),h()}}e.appendChild(f);var v=Fp(Lu('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M246.121279 955.6957l438.050717-438.050717c2.822492-2.822492 2.822492-7.902977 0-11.289967L244.992282 67.175303c-6.77398-6.77398-10.725469-16.370452-10.725469-25.966924L234.266814 36.692393C234.266814 16.370452 250.637266 0 270.959206 0l4.515987 0c9.596472 0 19.192944 3.951488 25.966924 10.725469l478.694598 478.694598c12.418964 12.418964 12.418964 32.740904 0 45.159868l-477.565601 477.565601c-7.338479 7.338479-17.499449 11.854465-28.224917 11.854465l0 0c-22.015436 0-40.079383-18.063947-40.079383-40.079383l0 0C234.266814 973.759647 238.7828 963.598677 246.121279 955.6957z" fill="#ffffff"></path></svg>'),{},Ko("image-viewer-btn-next"));e.appendChild(v);var d=function(){ir(e),u()};Wp(s,d);var m=new Image;o.appendChild(m),lo((function(){p(),h()})),e.appendChild(a),i.touchable()&&Wp(a,(function(t){t.target!==m&&d()}));var y=function(t){return!!r.findUpUtil(t.target,(function(t){return t===a}),(function(t){return t===e}))},g=Qn.create({maxZoom:100,minZoom:.2,zoomElement:o,canvasElement:a,dragEnabled:y,scaleEnabled:y,onZoomDragStart:function(t){t.native.preventDefault()},onZoomScale:function(t,e){c(e)},onZoomDragMove:function(t,e){c(e)}});return g.mount(e),{zoomInstance:g,element:e,show:l,close:d,reset:u}};t.register("click:imageClick",(function(e){return r.findUpUtil(e.target,(function(t){return t.getAttribute("type")===Yp}),(function(e){return e===t.getProxyElement()}))})),t.on("imageClick",(function(n){var r=n.target,a=t.editor.selectState.getTarget();if(!t.editor.isEditMode()||!i.touchable()&&(null==a?void 0:a.firstElementChild)===r){var c=r.querySelector("img");c&&function(t){e||(e=o()),e.reset(),e.show(t)}(c)}})),t.on("willDestroy",(function(){e&&e.close()}))}};function Kp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Zp=function(t){m()(n,t);var e=Kp(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"execute",value:function(t){if(t){var e=t.title,r=void 0===e?"":e,o=t.src,i=t.width,a=void 0===i?"100%":i,c=t.height,u=void 0===c?"auto":c;R()(x()(n.prototype),"execute",this).call(this,{resize:!0,type:Yp,width:a,height:u,attrs:{class:Ko("image"),src:o,title:r}})}}}]),n}(Zl),Yp=(n(45),n(46),"image"),Xp=Object(_t.findUniqueKey)("ImageEvents");kt.install("insertImage",Zp);var Gp=function(){var t=to()(no.a.mark((function t(e,n){var r,o,i,a,c;return no.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=new Image).crossOrigin="anonymous",!e.isLocalUrlSchema(n)){t.next=9;break}return t.next=5,e.fetch(n);case 5:o=t.sent,r.src=URL.createObjectURL(o),t.next=16;break;case 9:return r.src=e.transformLocalUrl(n),i=null,a=null,c=new Promise((function(t,e){i=t,a=e})),r.onload=function(){i()},r.onerror=function(){a()},t.next=16,c;case 16:return t.abrupt("return",r);case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();yu.defineCustomMount(Yp,(function(t,e){e.get(Xp)||(e.put(Xp,!0),qp.apply(e.baseEvents));var n=t.getAttribute("src")||"";Gp(e,n).then((function(e){ar(t);var n=e.width/e.height;n&&t.setAttribute("data-ratio",String(n)),t.removeAttribute(yu.PendingAttribute),t.appendChild(e)})),ar(t),t.setAttribute(yu.PendingAttribute,"");var r=function(){var t=document.createElement("div");t.className=Ko("loading-icon");var e=document.createElement("div");return e.style.minHeight="200px",e.style.width="100%",e.style.height="100%",e.appendChild(t),e}(),o=t.getAttribute("data-ratio");o&&(r.style.aspectRatio=o,r.style.minHeight="initial",r.style.height="initial"),t.appendChild(r)}));n(47);function Jp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var Qp=function(t){m()(n,t);var e=Jp(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"execute",value:function(t){if(t){var e=t.title,r=t.src,o=t.width,i=void 0===o?"100%":o,a=t.height,c=void 0===a?200:a;R()(x()(n.prototype),"execute",this).call(this,{resize:["none"],type:$p,width:i,height:c,attrs:{class:Ko("video"),src:r,title:e}})}}}]),n}(Zl);kt.install("insertVideo",Qp);var $p="video",th={mov:"quicktime"};yu.defineCustomMount($p,(function(t,e){var n=t.getAttribute("src"),r=document.createElement("video");r.controls=!0,r.preload="metadata",r.crossOrigin="anonymous";var o=document.createElement("source");if(n){o.src=e.transformLocalUrl(n);var i="video/mp4",a=n.match(/\.(\w+)$/);if(a){var c=a[1];c&&(c=c.toLowerCase(),c=th[c.toLowerCase()]||c),i="video/".concat(c)}o.type=i}r.appendChild(o),r.addEventListener("loadedmetadata",(function(){t.style.height="initial";var e=String(r.videoWidth/r.videoHeight);t.style.aspectRatio=e})),ar(t);var u=setTimeout((function(){t.appendChild(r)}),300);return function(){clearTimeout(u)}}));n(48);function eh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var nh=function(t){m()(n,t);var e=eh(n);function n(t){return f()(this,n),e.call(this,t)}return h()(n,[{key:"execute",value:function(t){var e=(t||{}).height,r=void 0===e?100:e;R()(x()(n.prototype),"execute",this).call(this,{resize:!0,type:rh,innerHTML:!0,width:"100%",height:r,attrs:{class:Ko("banner")}})}}]),n}(Zl);kt.install("insertBanner",nh);var rh="banner";yu.defineCustomMount(rh,(function(t){if(!t.children.length){var e=Cr();t.appendChild(e)}}));var oh=yu,ih=n(14),ah=n.n(ih),ch=document.getElementById("doc"),uh=new oh({editMode:!1,urlTransformer:function(t,e){if("api.internal"!==new URL(t).hostname)return t;var n=t.lastIndexOf("/"),r=t.substring(n+1);return"./files/".concat(r)}}),lh=document.createElement("div");lh.className=ah.a.editor,document.body.appendChild(lh),uh.render({el:lh,content:null==ch?void 0:ch.innerHTML})}]);